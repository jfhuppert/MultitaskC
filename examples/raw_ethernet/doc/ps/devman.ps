%!PS-Adobe-2.0
%%Creator: dvips(k) 5.92b Copyright 2002 Radical Eye Software
%%Title: devman.dvi
%%Pages: 25
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Helvetica-Bold Times-Roman Times-Italic Courier
%%+ Times-Bold
%%DocumentPaperSizes: a4
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o devman.ps devman.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2003.09.30:1544
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% File  8r.enc as of 2002-03-12 for PSNFSS 9
%
% This is the encoding vector for Type1 and TrueType fonts to be used
% with TeX.  This file is part of the PSNFSS bundle, version 9
% 
% Authors: S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry, W. Schmidt
%
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida + Euro.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
%
% (6) /Euro is assigned to 128, as in Windows ANSI
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /Euro /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]FontType 0
ne{/Metrics exch def dict begin Encoding{exch dup type/integertype ne{
pop pop 1 sub dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get
div def}ifelse}forall Metrics/Metrics currentdict end def}{{1 index type
/nametype eq{exit}if exch pop}loop}ifelse[2 index currentdict end
definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{dup
sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1 roll
mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def dup[
exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}if}
forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}def
end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/setpagedevice{pop}N/copypage{}N/p 3 def
@MacSetUp}N/doclip{psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll
newpath 4 copy 4 2 roll moveto 6 -1 roll S lineto S lineto S lineto
closepath clip newpath moveto}N/endTexFig{end psf$SavedState restore}N
/@beginspecial{SDict begin/SpecialSave save N gsave normalscale
currentpoint TR @SpecialDefaults count/ocount X/dcount countdictstack N}
N/@setspecial{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs
neg 0 rlineto closepath clip}if ho vo TR hsc vsc scale ang rotate
rwiSeen{rwi urx llx sub div rhiSeen{rhi ury lly sub div}{dup}ifelse
scale llx neg lly neg TR}{rhiSeen{rhi ury lly sub div dup scale llx neg
lly neg TR}if}ifelse CLIP 2 eq{newpath llx lly moveto urx lly lineto urx
ury lineto llx ury lineto closepath clip}if/showpage{}N/erasepage{}N
/setpagedevice{pop}N/copypage{}N newpath}N/@endspecial{count ocount sub{
pop}repeat countdictstack dcount sub{end}repeat grestore SpecialSave
restore end}N/@defspecial{SDict begin}N/@fedspecial{end}B/li{lineto}B
/rl{rlineto}B/rc{rcurveto}B/np{/SaveX currentpoint/SaveY X N 1
setlinecap newpath}N/st{stroke SaveX SaveY moveto}N/fil{fill SaveX SaveY
moveto}N/ellipse{/endangle X/startangle X/yrad X/xrad X/savematrix
matrix currentmatrix N TR xrad yrad scale 0 0 1 startangle endangle arc
savematrix setmatrix}N end

%%EndProcSet
%%BeginProcSet: color.pro
%!
TeXDict begin/setcmykcolor where{pop}{/setcmykcolor{dup 10 eq{pop
setrgbcolor}{1 sub 4 1 roll 3{3 index add neg dup 0 lt{pop 0}if 3 1 roll
}repeat setrgbcolor pop}ifelse}B}ifelse/TeXcolorcmyk{setcmykcolor}def
/TeXcolorrgb{setrgbcolor}def/TeXcolorgrey{setgray}def/TeXcolorgray{
setgray}def/TeXcolorhsb{sethsbcolor}def/currentcmykcolor where{pop}{
/currentcmykcolor{currentrgbcolor 10}B}ifelse/DC{exch dup userdict exch
known{pop pop}{X}ifelse}B/GreenYellow{0.15 0 0.69 0 setcmykcolor}DC
/Yellow{0 0 1 0 setcmykcolor}DC/Goldenrod{0 0.10 0.84 0 setcmykcolor}DC
/Dandelion{0 0.29 0.84 0 setcmykcolor}DC/Apricot{0 0.32 0.52 0
setcmykcolor}DC/Peach{0 0.50 0.70 0 setcmykcolor}DC/Melon{0 0.46 0.50 0
setcmykcolor}DC/YellowOrange{0 0.42 1 0 setcmykcolor}DC/Orange{0 0.61
0.87 0 setcmykcolor}DC/BurntOrange{0 0.51 1 0 setcmykcolor}DC
/Bittersweet{0 0.75 1 0.24 setcmykcolor}DC/RedOrange{0 0.77 0.87 0
setcmykcolor}DC/Mahogany{0 0.85 0.87 0.35 setcmykcolor}DC/Maroon{0 0.87
0.68 0.32 setcmykcolor}DC/BrickRed{0 0.89 0.94 0.28 setcmykcolor}DC/Red{
0 1 1 0 setcmykcolor}DC/OrangeRed{0 1 0.50 0 setcmykcolor}DC/RubineRed{
0 1 0.13 0 setcmykcolor}DC/WildStrawberry{0 0.96 0.39 0 setcmykcolor}DC
/Salmon{0 0.53 0.38 0 setcmykcolor}DC/CarnationPink{0 0.63 0 0
setcmykcolor}DC/Magenta{0 1 0 0 setcmykcolor}DC/VioletRed{0 0.81 0 0
setcmykcolor}DC/Rhodamine{0 0.82 0 0 setcmykcolor}DC/Mulberry{0.34 0.90
0 0.02 setcmykcolor}DC/RedViolet{0.07 0.90 0 0.34 setcmykcolor}DC
/Fuchsia{0.47 0.91 0 0.08 setcmykcolor}DC/Lavender{0 0.48 0 0
setcmykcolor}DC/Thistle{0.12 0.59 0 0 setcmykcolor}DC/Orchid{0.32 0.64 0
0 setcmykcolor}DC/DarkOrchid{0.40 0.80 0.20 0 setcmykcolor}DC/Purple{
0.45 0.86 0 0 setcmykcolor}DC/Plum{0.50 1 0 0 setcmykcolor}DC/Violet{
0.79 0.88 0 0 setcmykcolor}DC/RoyalPurple{0.75 0.90 0 0 setcmykcolor}DC
/BlueViolet{0.86 0.91 0 0.04 setcmykcolor}DC/Periwinkle{0.57 0.55 0 0
setcmykcolor}DC/CadetBlue{0.62 0.57 0.23 0 setcmykcolor}DC
/CornflowerBlue{0.65 0.13 0 0 setcmykcolor}DC/MidnightBlue{0.98 0.13 0
0.43 setcmykcolor}DC/NavyBlue{0.94 0.54 0 0 setcmykcolor}DC/RoyalBlue{1
0.50 0 0 setcmykcolor}DC/Blue{1 1 0 0 setcmykcolor}DC/Cerulean{0.94 0.11
0 0 setcmykcolor}DC/Cyan{1 0 0 0 setcmykcolor}DC/ProcessBlue{0.96 0 0 0
setcmykcolor}DC/SkyBlue{0.62 0 0.12 0 setcmykcolor}DC/Turquoise{0.85 0
0.20 0 setcmykcolor}DC/TealBlue{0.86 0 0.34 0.02 setcmykcolor}DC
/Aquamarine{0.82 0 0.30 0 setcmykcolor}DC/BlueGreen{0.85 0 0.33 0
setcmykcolor}DC/Emerald{1 0 0.50 0 setcmykcolor}DC/JungleGreen{0.99 0
0.52 0 setcmykcolor}DC/SeaGreen{0.69 0 0.50 0 setcmykcolor}DC/Green{1 0
1 0 setcmykcolor}DC/ForestGreen{0.91 0 0.88 0.12 setcmykcolor}DC
/PineGreen{0.92 0 0.59 0.25 setcmykcolor}DC/LimeGreen{0.50 0 1 0
setcmykcolor}DC/YellowGreen{0.44 0 0.74 0 setcmykcolor}DC/SpringGreen{
0.26 0 0.76 0 setcmykcolor}DC/OliveGreen{0.64 0 0.95 0.40 setcmykcolor}
DC/RawSienna{0 0.72 1 0.45 setcmykcolor}DC/Sepia{0 0.83 1 0.70
setcmykcolor}DC/Brown{0 0.81 1 0.60 setcmykcolor}DC/Tan{0.14 0.42 0.56 0
setcmykcolor}DC/Gray{0 0 0 0.50 setcmykcolor}DC/Black{0 0 0 1
setcmykcolor}DC/White{0 0 0 0 setcmykcolor}DC end

%%EndProcSet
TeXDict begin @defspecial

 /DvipsToPDF { 72.27 mul Resolution div } def /PDFToDvips { 72.27 div
Resolution mul } def /HyperBorder { 1 PDFToDvips } def /H.V {pdf@hoff
pdf@voff null} def /H.B {/Rect[pdf@llx pdf@lly pdf@urx pdf@ury]} def
/H.S { currentpoint HyperBorder add /pdf@lly exch def dup DvipsToPDF
/pdf@hoff exch def HyperBorder sub /pdf@llx exch def } def /H.L { 2
sub dup /HyperBasePt exch def PDFToDvips /HyperBaseDvips exch def currentpoint
HyperBaseDvips sub /pdf@ury exch def /pdf@urx exch def } def /H.A {
H.L currentpoint exch pop vsize 72 sub exch DvipsToPDF HyperBasePt
sub sub /pdf@voff exch def } def /H.R { currentpoint HyperBorder sub
/pdf@ury exch def HyperBorder add /pdf@urx exch def currentpoint exch
pop vsize 72 sub exch DvipsToPDF sub /pdf@voff exch def } def systemdict
/pdfmark known not {userdict /pdfmark systemdict /cleartomark get put}
if
 
@fedspecial end TeXDict begin
39158280 55380996 1000 600 600 (devman.dvi) @start /Fa
134[96 3[105 57 96 67 1[105 105 105 153 48 2[48 105 105
57 96 105 96 1[96 16[115 1[124 3[96 48 4[124 124 124
124 7[96 1[96 1[96 1[96 1[96 96 1[48 1[48 44[{
 TeXBase1Encoding ReEncodeFont }34 172.154 /Helvetica-Bold
rf /Fb 138[61 1[55 39 2[61 61 89 28 2[28 1[61 1[55 3[55
14[72 26[55 3[55 1[55 2[28 46[{ TeXBase1Encoding ReEncodeFont }16
99.6264 /Helvetica-Bold rf /Fc 133[37 1[42 2[46 28 32
37 1[46 42 46 69 23 46 1[23 1[42 28 37 46 37 46 42 39[42
42 42 1[42 3[42 1[23 21 28 45[{ TeXBase1Encoding ReEncodeFont }28
83.022 /Times-Bold rf /Fd 130[45 45 45 45 45 45 45 45
45 45 45 45 45 45 45 45 45 45 45 1[45 45 45 45 45 45
45 45 45 1[45 1[45 1[45 2[45 1[45 45 45 45 45 1[45 45
45 45 45 45 1[45 45 1[45 45 45 45 45 45 3[45 1[45 45
45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45
1[45 3[45 34[{ TeXBase1Encoding ReEncodeFont }74 74.7198
/Courier rf /Fe 134[37 2[37 42 23 32 32 1[42 42 42 1[23
37 2[42 42 1[37 2[42 42 19[69 7[51 60 10[42 42 42 42
42 42 42 42 42 42 4[56 1[28 28 40[{ TeXBase1Encoding ReEncodeFont }32
83.022 /Times-Italic rf /Ff 106[23 149[{ TeXBase1Encoding ReEncodeFont }
1 66.4176 /Times-Roman rf /Fg 134[66 66 93 66 73 40 66
47 73 73 73 73 106 33 66 1[33 73 73 40 66 73 66 73 66
9[113 1[86 73 80 86 1[80 93 86 100 73 86 1[33 86 1[73
80 86 86 86 86 1[73 5[66 66 66 66 66 66 66 66 66 2[33
1[33 2[40 40 36[73 3[{ TeXBase1Encoding ReEncodeFont }58
119.552 /Helvetica-Bold rf /Fh 133[37 42 42 60 42 42
23 32 28 42 42 42 42 65 23 42 23 23 42 42 28 37 42 37
42 37 28 42 39 3[51 60 60 78 60 60 51 46 55 60 46 60
60 74 51 60 32 28 60 60 46 51 60 55 55 60 1[37 47 47
47 23 23 42 42 42 42 42 42 42 42 42 42 23 21 28 21 47
42 28 28 28 1[69 42 42 34 30[46 46 2[{ TeXBase1Encoding ReEncodeFont }
86 83.022 /Times-Roman rf /Fi 134[80 80 112 80 88 48
80 56 88 88 88 88 128 40 80 1[40 88 88 48 80 88 80 88
80 7[96 1[135 2[88 1[104 1[96 1[104 120 1[104 1[40 1[112
88 96 104 104 104 104 8[80 80 80 80 80 80 80 80 2[40
48 45[{ TeXBase1Encoding ReEncodeFont }50 143.462 /Helvetica-Bold
rf /Fj 137[115 126 69 115 80 1[126 126 126 1[57 3[126
2[115 2[126 115 19[172 7[138 149 68[{ TeXBase1Encoding ReEncodeFont }16
206.584 /Helvetica-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: a4
a4
%%EndPaperSize
 end
%%EndSetup
%%Page: 1 1
TeXDict begin 1 0 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a -600 -600
a
SDict begin [ /Title () /Subject () /Creator (LaTeX with hyperref package)
/Author () /Producer (dvips + Distiller) /Keywords () /DOCINFO pdfmark
end
 -600 -600 a Black 0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102
a 0 TeXcolorgray 0 TeXcolorgray -2 -102 a
SDict begin H.R end
 -2 -102 a -2
-102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.1) cvn H.B /DEST pdfmark
end
 -2 -102 a Black Black -2 -11 a
SDict begin [ /Count -4 /Dest (0.1.1) cvn /Title (1. About this Developers Manual)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (0.1.1.2) cvn /Title (1.1. Obtaining the most recent version of this document)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.1.2.2) cvn /Title (1.2. Feedback)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.1.3.2) cvn /Title (1.3. Copyrights and Trademarks)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (0.1.4.2) cvn /Title (1.4. Acknowledgements and Thanks)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.2.1) cvn /Title (2. Characteristics of Etherboot)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -3 /Dest (0.3.1) cvn /Title (3. The execution environment of Etherboot)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (0.3.5.2) cvn /Title (3.1. The network booting process)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.3.6.2) cvn /Title (3.2. To compress or not to compress, that is the question)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.3.7.2) cvn /Title (3.3. Real and protected mode)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -4 /Dest (0.4.1) cvn /Title (4. The architecture of Etherboot)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.4.8.2) cvn /Title (4.1. Etherboot core)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.4.9.2) cvn /Title (4.2. Drivers) /OUT
pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (0.4.10.2) cvn /Title (4.3. Miscellaneous)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.4.11.2) cvn /Title (4.4. External auxiliary programs)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.5.1) cvn /Title (5. The development environment of Etherboot)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -2 /Dest (0.6.1) cvn /Title (6. Frequently asked questions)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.6.12.2) cvn /Title (6.1. How portable is Etherboot?)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.6.13.2) cvn /Title (6.2. How can I get Etherboot to boot a Cardbus \(PCMCIA\) or a USB NIC?)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -9 /Dest (0.7.1) cvn /Title (7. Writing an Etherboot Driver)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.7.14.2) cvn /Title (7.1. Preliminaries)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.7.15.2) cvn /Title (7.2. Background information)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -1 /Dest (0.7.16.2) cvn /Title (7.3. Structure of the code)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.7.16.1.3) cvn /Title (7.3.1. Rom naming rules)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.7.17.2) cvn /Title (7.4. Booting the code from a floppy)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (0.7.18.2) cvn /Title (7.5. Booting the test code with another Etherboot ROM)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.7.19.2) cvn /Title (7.6. Writing the code)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.7.20.2) cvn /Title (7.7. Things to watch out for)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (0.7.21.2) cvn /Title (7.8. Tidying up)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.7.22.2) cvn /Title (7.9. Keeping your driver in sync with the Linux version)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (0.8.1) cvn /Title (8. A potted history of Etherboot)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -8 /Dest (1.0) cvn /Title (A. Draft Net Boot Image Proposal 0.3, June 15, 1997)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (1.9.1) cvn /Title (A.1. Preamble the why)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (1.10.1) cvn /Title (A.2. The target)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (1.11.1) cvn /Title (A.3. Net Boot Process Description)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (1.12.1) cvn /Title (A.4. Image Format with Initial Magic Number.)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (1.13.1) cvn /Title (A.5. Boot prom entry points.)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (1.14.1) cvn /Title (A.6. Example of a boot image.)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (1.15.1) cvn /Title (A.7. Terms) /OUT
pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (1.16.1) cvn /Title (A.8. References)
/OUT pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ /Count -0 /Dest (2.0) cvn /Title (B. Compression algorithm, 1 July 1997)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Count -0 /Dest (3.0) cvn /Title (C. Copying conditions of the compression code, 1 July 1997)
/OUT pdfmark end
 -2 -11 a -2 -11 a
SDict begin [ /Page 1 /View [ /Fit ] /PageMode /UseOutlines  /DOCVIEW
pdfmark end
 -2 -11 a -2 -11
a
SDict begin [ {Catalog} << /ViewerPreferences << >> >> /PUT pdfmark
end
 -2 -11 a -2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 12 H.A end
 -2 -11 a -2 -11
a
SDict begin [ /View [/XYZ H.V] /Dest (Doc-Start) cvn H.B /DEST pdfmark
end
 -2 -11 a -2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 12 H.A end
 -2 -11 a -2 -11
a
SDict begin [ /View [/XYZ H.V] /Dest (0) cvn H.B /DEST pdfmark end
 -2 -11 a 686 136 a Fj(Etherboot)58 b(De)m(veloper)m(s)g(Man)n(ual)
1860 412 y Fi(K)n(en)39 b(Y)-13 b(ap)1710 688 y(Geor)n(g)39
b(Baum)542 921 y Fh(This)20 b(document)e(e)o(xplains)h(the)i(internals)
e(of)h(the)g(Etherboot)f(package.)f(The)i(information)e(here)h(applies)
h(to)542 1028 y(v)o(ersion)e(5.2)i(of)g(Etherboot.)39
1369 y
SDict begin H.S end
 39 1369 a 39 1369 a
SDict begin 13 H.A end
 39 1369 a 39 1369 a
SDict begin [ /View [/XYZ H.V] /Dest (33) cvn H.B /DEST pdfmark end
 39 1369
a -2 1746 a Fi(1.)39 b(About)f(this)h(De)n(veloper)n(s)e(Man)o(ual)2210
1746 y
SDict begin H.S end
 2210 1746 a 2210 1746 a
SDict begin 22.464 H.A end
 2210 1746 a 2210 1746
a
SDict begin [ /View [/XYZ H.V] /Dest (0.1.1) cvn H.B /DEST pdfmark
end
 2210 1746 a -2 1776 a
SDict begin H.S end
 -2 1776 a -2 1776 a
SDict begin 13 H.A end
 -2 1776 a
-2 1776 a
SDict begin [ /View [/XYZ H.V] /Dest (35) cvn H.B /DEST pdfmark end
 -2 1776 a 396 2074 a Fg(1.1.)e(Obtaining)f(the)g(most)f
(recent)h(ver)n(sion)h(of)e(this)h(document)3562 2074
y
SDict begin H.S end
 3562 2074 a 3562 2074 a
SDict begin 18.72 H.A end
 3562 2074 a 3562 2074 a
SDict begin [ /View [/XYZ H.V] /Dest (0.1.1.2) cvn H.B /DEST pdfmark
end
 3562
2074 a -2 2160 a
SDict begin H.S end
 -2 2160 a -2 2160 a
SDict begin 13 H.A end
 -2 2160 a -2 2160
a
SDict begin [ /View [/XYZ H.V] /Dest (37) cvn H.B /DEST pdfmark end
 -2 2160 a 396 2242 a Fh(This)21 b(document)d(and)h(related)h
(documents)f(are)h(also)g(k)o(ept)g(online)f(at)2429
2242 y
SDict begin H.S end
 2429 2242 a 2429 2242 a
SDict begin 13 H.A end
 2429 2242 a 2429 2242
a
SDict begin [ /View [/XYZ H.V] /Dest (38) cvn H.B /DEST pdfmark end
 2429 2242 a Fh(the)h(Etherboot)f(Home)g(P)o(age)396
2350 y(\(http://etherboot.sourcefor)o(g)o(e.n)o(et/\).)14
b(This)21 b(will)g(in)f(general)f(ha)n(v)o(e)h(the)g(latest)h(source)e
(distrib)n(utions)h(and)396 2458 y(documentation.)-2
2500 y
SDict begin H.S end
 -2 2500 a -2 2500 a
SDict begin 13 H.A end
 -2 2500 a -2 2500 a
SDict begin [ /View [/XYZ H.V] /Dest (39) cvn H.B /DEST pdfmark end
 -2 2500
a 396 2827 a Fg(1.2.)35 b(Feedbac)n(k)1176 2827 y
SDict begin H.S end
 1176
2827 a 1176 2827 a
SDict begin 18.72 H.A end
 1176 2827 a 1176 2827 a
SDict begin [ /View [/XYZ H.V] /Dest (0.1.2.2) cvn H.B /DEST pdfmark
end
 1176 2827
a -2 2888 a
SDict begin H.S end
 -2 2888 a -2 2888 a
SDict begin 13 H.A end
 -2 2888 a -2 2888 a
SDict begin [ /View [/XYZ H.V] /Dest (41) cvn H.B /DEST pdfmark end
 -2
2888 a 396 2995 a Fh(Comments)20 b(on)g(and)f(corrections)g(for)g(this)
i(De)n(v)o(elopers)e(Manual)g(may)h(be)g(directed)f(to)h(the)3098
2995 y
SDict begin H.S end
 3098 2995 a 3098 2995 a
SDict begin 13 H.A end
 3098 2995 a 3098 2995
a
SDict begin [ /View [/XYZ H.V] /Dest (42) cvn H.B /DEST pdfmark end
 3098 2995 a Fh(primary)e(author)396 3103 y(\(mailto:k)o(en_yapA)-9
b(T)l(usersPERIODsourcefor)n(g)o(ePERIODn)o(et\).)-2
3162 y
SDict begin H.S end
 -2 3162 a -2 3162 a
SDict begin 13 H.A end
 -2 3162 a -2 3162 a
SDict begin [ /View [/XYZ H.V] /Dest (43) cvn H.B /DEST pdfmark end
 -2 3162
a 396 3472 a Fg(1.3.)35 b(Cop)n(yrights)f(and)g(T)-10
b(rademarks)2203 3472 y
SDict begin H.S end
 2203 3472 a 2203 3472 a
SDict begin 18.72 H.A end
 2203
3472 a 2203 3472 a
SDict begin [ /View [/XYZ H.V] /Dest (0.1.3.2) cvn H.B /DEST pdfmark
end
 2203 3472 a -2 3559 a
SDict begin H.S end
 -2 3559 a -2
3559 a
SDict begin 13 H.A end
 -2 3559 a -2 3559 a
SDict begin [ /View [/XYZ H.V] /Dest (45) cvn H.B /DEST pdfmark end
 -2 3559 a 396 3640 a Fh(This)21
b(manual)e(may)h(be)g(reproduced)d(in)j(whole)g(or)g(in)g(part,)g
(without)f(fee,)h(subject)g(to)g(the)h(follo)n(wing)d(restrictions:)-2
3700 y
SDict begin H.S end
 -2 3700 a -2 3700 a
SDict begin 13 H.A end
 -2 3700 a -2 3700 a
SDict begin [ /View [/XYZ H.V] /Dest (46) cvn H.B /DEST pdfmark end
 -2 3700
a -2 3700 a
SDict begin H.S end
 -2 3700 a -2 3700 a
SDict begin 13 H.A end
 -2 3700 a -2 3700 a
SDict begin [ /View [/XYZ H.V] /Dest (47) cvn H.B /DEST pdfmark end
 -2
3700 a -2 3741 a
SDict begin H.S end
 -2 3741 a -2 3741 a
SDict begin 13 H.A end
 -2 3741 a -2 3741
a
SDict begin [ /View [/XYZ H.V] /Dest (48) cvn H.B /DEST pdfmark end
 -2 3741 a Black 396 3914 a Ff(\225)p Black 479 3914
a
SDict begin H.S end
 479 3914 a 479 3914 a
SDict begin 13 H.A end
 479 3914 a 479 3914 a
SDict begin [ /View [/XYZ H.V] /Dest (49) cvn H.B /DEST pdfmark end
 479 3914
a 21 w Fh(The)i(cop)o(yright)e(notice)i(abo)o(v)o(e)e(and)i(this)h
(permission)e(notice)g(must)i(be)f(preserv)o(ed)e(complete)h(on)h(all)h
(complete)e(or)479 4022 y(partial)h(copies.)-2 4040 y
SDict begin H.S end

-2 4040 a -2 4040 a
SDict begin 13 H.A end
 -2 4040 a -2 4040 a
SDict begin [ /View [/XYZ H.V] /Dest (50) cvn H.B /DEST pdfmark end
 -2 4040 a Black
396 4172 a Ff(\225)p Black 479 4172 a
SDict begin H.S end
 479 4172 a 479
4172 a
SDict begin 13 H.A end
 479 4172 a 479 4172 a
SDict begin [ /View [/XYZ H.V] /Dest (51) cvn H.B /DEST pdfmark end
 479 4172 a 21 w Fh(An)o(y)g(translation)f
(or)h(deri)n(v)o(ed)e(w)o(ork)i(must)g(be)g(appro)o(v)o(ed)d(by)j(the)g
(author)f(in)h(writing)g(before)f(distrib)n(ution.)-2
4189 y
SDict begin H.S end
 -2 4189 a -2 4189 a
SDict begin 13 H.A end
 -2 4189 a -2 4189 a
SDict begin [ /View [/XYZ H.V] /Dest (52) cvn H.B /DEST pdfmark end
 -2 4189
a Black 396 4321 a Ff(\225)p Black 479 4321 a
SDict begin H.S end
 479 4321
a 479 4321 a
SDict begin 13 H.A end
 479 4321 a 479 4321 a
SDict begin [ /View [/XYZ H.V] /Dest (53) cvn H.B /DEST pdfmark end
 479 4321 a 21 w Fh(If)h(you)f
(distrib)n(ute)h(this)h(w)o(ork)e(in)i(part,)e(instructions)h(for)f
(obtaining)g(the)h(complete)f(v)o(ersion)g(of)h(this)g(manual)g(must)
479 4429 y(be)g(included,)f(and)g(a)i(means)f(for)g(obtaining)e(a)j
(complete)e(v)o(ersion)g(pro)o(vided.)-2 4447 y
SDict begin H.S end
 -2 4447
a -2 4447 a
SDict begin 13 H.A end
 -2 4447 a -2 4447 a
SDict begin [ /View [/XYZ H.V] /Dest (54) cvn H.B /DEST pdfmark end
 -2 4447 a Black 396 4578
a Ff(\225)p Black 479 4578 a
SDict begin H.S end
 479 4578 a 479 4578 a
SDict begin 13 H.A end
 479
4578 a 479 4578 a
SDict begin [ /View [/XYZ H.V] /Dest (55) cvn H.B /DEST pdfmark end
 479 4578 a 21 w Fh(Small)i(portions)d(may)i(be)g
(reproduced)d(as)k(illustrations)f(for)g(re)n(vie)n(ws)g(or)g(quotes)f
(in)h(other)g(w)o(orks)g(without)f(this)479 4686 y(permission)g(notice)
h(if)h(proper)d(citation)i(is)h(gi)n(v)o(en.)e(Exceptions)f(to)j(these)
f(rules)g(may)g(be)g(granted)f(for)g(academic)479 4794
y(purposes:)g(Write)i(to)f(the)h(author)d(and)i(ask.)g(These)g
(restrictions)g(are)g(here)g(to)g(protect)f(us)i(as)g(authors,)e(not)h
(to)479 4902 y(restrict)h(you)e(as)i(learners)e(and)h(educators.)p
Black -2 5569 a
SDict begin H.S end
 -2 5569 a -2 5569 a
SDict begin 13 H.A end
 -2 5569 a -2 5569
a
SDict begin [ /View [/XYZ H.V] /Dest (57) cvn H.B /DEST pdfmark end
 -2 5569 a 3842 5638 a Fe(1)p Black eop end
%%Page: 2 2
TeXDict begin 2 1 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black 0
TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.2) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
-2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (56) cvn H.B /DEST pdfmark end
 -2 -11 a
396 72 a Fh(All)h(trademarks)e(mentioned)f(in)i(this)h(document)d
(belong)h(to)h(their)g(respecti)n(v)o(e)f(o)n(wners.)-2
132 y
SDict begin H.S end
 -2 132 a -2 132 a
SDict begin 13 H.A end
 -2 132 a -2 132 a
SDict begin [ /View [/XYZ H.V] /Dest (57) cvn H.B /DEST pdfmark end
 -2 132 a 396
442 a Fg(1.4.)35 b(Ac)n(kno)n(wledg)q(ements)i(and)d(Thanks)2445
442 y
SDict begin H.S end
 2445 442 a 2445 442 a
SDict begin 18.72 H.A end
 2445 442 a 2445 442 a
SDict begin [ /View [/XYZ H.V] /Dest (0.1.4.2) cvn H.B /DEST pdfmark
end
 2445
442 a -2 528 a
SDict begin H.S end
 -2 528 a -2 528 a
SDict begin 13 H.A end
 -2 528 a -2 528 a
SDict begin [ /View [/XYZ H.V] /Dest (59) cvn H.B /DEST pdfmark end
 -2
528 a 396 610 a Fh(Thanks)19 b(to)i(all)g(the)f(people)f(who)h(ha)n(v)o
(e)f(contrib)n(uted)f(information)g(and)i(corrections)e(to)j(this)g
(document.)-2 752 y
SDict begin H.S end
 -2 752 a -2 752 a
SDict begin 13 H.A end
 -2 752 a -2 752
a
SDict begin [ /View [/XYZ H.V] /Dest (60) cvn H.B /DEST pdfmark end
 -2 752 a 359 x Fi(2.)39 b(Characteristics)e(of)i(Etherboot)2089
1111 y
SDict begin H.S end
 2089 1111 a 2089 1111 a
SDict begin 22.464 H.A end
 2089 1111 a 2089 1111
a
SDict begin [ /View [/XYZ H.V] /Dest (0.2.1) cvn H.B /DEST pdfmark
end
 2089 1111 a -2 1185 a
SDict begin H.S end
 -2 1185 a -2 1185 a
SDict begin 13 H.A end
 -2 1185 a
-2 1185 a
SDict begin [ /View [/XYZ H.V] /Dest (62) cvn H.B /DEST pdfmark end
 -2 1185 a 396 1291 a Fh(F)o(or)20 b(an)g(introduction)e(to)i
(Etherboot)e(from)i(the)g(user)g(perspecti)n(v)o(e)e(you)i(may)f(wish)i
(to)f(read)g(the)3207 1291 y
SDict begin H.S end
 3207 1291 a 3207 1291 a
SDict begin 13 H.A end

3207 1291 a 3207 1291 a
SDict begin [ /View [/XYZ H.V] /Dest (63) cvn H.B /DEST pdfmark end
 3207 1291 a Fh(User)h(Manual)396
1399 y(\(../userman/t1.html\))c(\002rst.)-2 1455 y
SDict begin H.S end
 -2
1455 a -2 1455 a
SDict begin 13 H.A end
 -2 1455 a -2 1455 a
SDict begin [ /View [/XYZ H.V] /Dest (64) cvn H.B /DEST pdfmark end
 -2 1455 a 396 1548
a Fh(In)j(order)f(to)h(understand)f(Etherboot)f(de)n(v)o(elopment,)f
(it)k(is)g(necessary)e(to)i(\002rst)g(understand)d(ho)n(w)h(Etherboot)f
(dif)n(fers)396 1656 y(from)h(normal)g(application)g(programs.)-2
1716 y
SDict begin H.S end
 -2 1716 a -2 1716 a
SDict begin 13 H.A end
 -2 1716 a -2 1716 a
SDict begin [ /View [/XYZ H.V] /Dest (65) cvn H.B /DEST pdfmark end
 -2 1716
a -2 1716 a
SDict begin H.S end
 -2 1716 a -2 1716 a
SDict begin 13 H.A end
 -2 1716 a -2 1716 a
SDict begin [ /View [/XYZ H.V] /Dest (66) cvn H.B /DEST pdfmark end
 -2
1716 a -2 1757 a
SDict begin H.S end
 -2 1757 a -2 1757 a
SDict begin 13 H.A end
 -2 1757 a -2 1757
a
SDict begin [ /View [/XYZ H.V] /Dest (67) cvn H.B /DEST pdfmark end
 -2 1757 a Black 463 1930 a Fh(1.)p Black 546 1930 a
SDict begin H.S end

546 1930 a 546 1930 a
SDict begin 13 H.A end
 546 1930 a 546 1930 a
SDict begin [ /View [/XYZ H.V] /Dest (68) cvn H.B /DEST pdfmark end
 546 1930
a 20 w Fh(Etherboot)g(runs)g(as)i(a)g(standalone)e(program,)f(not)h
(under)g(an)h(operating)f(system.)h(The)g(only)f(services)h(it)h
(relies)546 2038 y(on)e(are)i(those)f(pro)o(vided)d(by)j(the)g(BIOS)h
(of)f(the)g(motherboard,)d(or)j(LinuxBIOS.)-2 2056 y
SDict begin H.S end

-2 2056 a -2 2056 a
SDict begin 13 H.A end
 -2 2056 a -2 2056 a
SDict begin [ /View [/XYZ H.V] /Dest (69) cvn H.B /DEST pdfmark end
 -2 2056 a Black
463 2188 a Fh(2.)p Black 546 2188 a
SDict begin H.S end
 546 2188 a 546 2188
a
SDict begin 13 H.A end
 546 2188 a 546 2188 a
SDict begin [ /View [/XYZ H.V] /Dest (70) cvn H.B /DEST pdfmark end
 546 2188 a 20 w Fh(It)h(has)f(complete)f
(access)i(to)g(the)f("bare)f(metal")h(of)g(the)h(machine.)-2
2206 y
SDict begin H.S end
 -2 2206 a -2 2206 a
SDict begin 13 H.A end
 -2 2206 a -2 2206 a
SDict begin [ /View [/XYZ H.V] /Dest (71) cvn H.B /DEST pdfmark end
 -2 2206
a Black 463 2337 a Fh(3.)p Black 546 2337 a
SDict begin H.S end
 546 2337
a 546 2337 a
SDict begin 13 H.A end
 546 2337 a 546 2337 a
SDict begin [ /View [/XYZ H.V] /Dest (72) cvn H.B /DEST pdfmark end
 546 2337 a 20 w Fh(It)g(needs)f(to)g
(ha)n(v)o(e)g(as)h(small)f(a)h(memory)d(footprint)h(as)i(practicable,)d
(in)j(order)e(to)h(maximise)g(the)g(amount)f(of)546 2445
y(memory)f(a)n(v)n(ailable)i(to)g(the)g(code)g(that)g(it)h(loads.)-2
2636 y
SDict begin H.S end
 -2 2636 a -2 2636 a
SDict begin 13 H.A end
 -2 2636 a -2 2636 a
SDict begin [ /View [/XYZ H.V] /Dest (extension) cvn H.B /DEST pdfmark
end
 -2 2636
a 377 x Fi(3.)39 b(The)g(e)n(x)o(ecution)e(en)-6 b(vir)m(onment)37
b(of)j(Etherboot)2906 3013 y
SDict begin H.S end
 2906 3013 a 2906 3013 a
SDict begin 22.464 H.A end

2906 3013 a 2906 3013 a
SDict begin [ /View [/XYZ H.V] /Dest (0.3.1) cvn H.B /DEST pdfmark
end
 2906 3013 a -2 3015 a
SDict begin H.S end
 -2 3015
a -2 3015 a
SDict begin 13 H.A end
 -2 3015 a -2 3015 a
SDict begin [ /View [/XYZ H.V] /Dest (75) cvn H.B /DEST pdfmark end
 -2 3015 a 396 3341 a
Fg(3.1.)35 b(The)f(netw)n(ork)f(booting)g(pr)n(ocess)2290
3341 y
SDict begin H.S end
 2290 3341 a 2290 3341 a
SDict begin 18.72 H.A end
 2290 3341 a 2290 3341
a
SDict begin [ /View [/XYZ H.V] /Dest (0.3.5.2) cvn H.B /DEST pdfmark
end
 2290 3341 a -2 3428 a
SDict begin H.S end
 -2 3428 a -2 3428 a
SDict begin 13 H.A end
 -2 3428 a
-2 3428 a
SDict begin [ /View [/XYZ H.V] /Dest (77) cvn H.B /DEST pdfmark end
 -2 3428 a 396 3509 a Fh(Since)20 b(this)h(is)g(the)g(part)e
(that)i(the)f(user)g(sees)h(\002rst,)g(let)f(us)h(\002rst)g(demystify)e
(ho)n(w)g(netw)o(ork)g(booting)g(w)o(orks.)-2 3568 y
SDict begin H.S end

-2 3568 a -2 3568 a
SDict begin 13 H.A end
 -2 3568 a -2 3568 a
SDict begin [ /View [/XYZ H.V] /Dest (78) cvn H.B /DEST pdfmark end
 -2 3568 a 396
3658 a Fh(From)h(time)g(immemorial,)f(well)h(actually)g(since)g(the)h
(IBM)f(XT)h(appeared)d(on)i(the)g(mark)o(et,)f(the)h(PC)i(architecture)
c(has)396 3766 y(a)j(mechanism)e(for)g(in)m(v)n(oking)f("e)o(xtension)h
(BIOSes".)i(The)e(original)h(reason)f(for)h(this)g(mechanism)f(w)o(as)i
(to)g(allo)n(w)396 3874 y(adaptor)e(cards)g(that)h(the)g(main)g(BIOS)h
(didn')o(t)d(kno)n(w)h(ho)n(w)g(to)h(deal)g(with)g(to)g(carry)f(R)m
(OMs)i(with)f(initialisation)g(code)f(or)396 3982 y(dri)n(v)o(ers.)g
(An)h(early)g(e)o(xample)f(w)o(as)i(the)f(XT)g(hard)g(disk)g
(controller)-5 b(.)19 b(The)g(main)h(BIOS)h(of)f(XTs)h(only)e(kne)n(w)h
(ho)n(w)f(to)396 4090 y(boot)h(from)f(\003oppies.)g(When)h(an)g(XT)h
(hard)e(disk)h(controller)f(is)i(added,)e(the)h(code)f(in)i(the)f(R)m
(OM)g(on)g(the)g(controller)396 4198 y(appears)g(in)g(the)g(memory)f
(space)h(of)g(the)g(PC)h(and)f(is)h(called)f(as)h(part)f(of)g(the)g
(machine)f(initialisation.)h(Another)396 4306 y(e)o(xample)f(is)i(the)f
(BIOSes)h(on)f(V)o(GA)h(video)e(adaptor)f(cards,)i(although)f(strictly)
h(speaking)f(that)h(is)h(a)g(special)f(case)h(in)396
4414 y(terms)f(of)g(R)m(OM)h(address.)e(When)h(netw)o(ork)f(adaptors)g
(were)i(made)e(for)h(the)g(PC,)h(it)g(w)o(as)g(a)f(natural)g(step)g(to)
h(put)e(R)m(OMs)396 4522 y(on)h(them)g(that)g(could)f(contact)h(a)g
(serv)o(er)g(for)f(netw)o(ork)g(booting.)-2 4581 y
SDict begin H.S end
 -2
4581 a -2 4581 a
SDict begin 13 H.A end
 -2 4581 a -2 4581 a
SDict begin [ /View [/XYZ H.V] /Dest (79) cvn H.B /DEST pdfmark end
 -2 4581 a 396 4671
a Fh(Ho)n(w)h(does)g(the)g(main)g(BIOS)h(kno)n(w)e(that)i(the)f(code)f
(in)i(the)f(R)m(OM)g(is)i(to)e(be)g(e)o(x)o(ecuted)e(and)i(why)f(does)h
(it)h(not)f(e)o(x)o(ecute)396 4779 y(some)g(random)f(code)g(by)h
(accident?)f(The)h(R)m(OM)h(code)e(has)i(se)n(v)o(eral)e(conditions)g
(placed)g(on)h(it.)-2 4839 y
SDict begin H.S end
 -2 4839 a -2 4839 a
SDict begin 13 H.A end
 -2 4839
a -2 4839 a
SDict begin [ /View [/XYZ H.V] /Dest (80) cvn H.B /DEST pdfmark end
 -2 4839 a -2 4839 a
SDict begin H.S end
 -2 4839 a -2 4839 a
SDict begin 13 H.A end
 -2
4839 a -2 4839 a
SDict begin [ /View [/XYZ H.V] /Dest (81) cvn H.B /DEST pdfmark end
 -2 4839 a -2 4880 a
SDict begin H.S end
 -2 4880 a -2 4880
a
SDict begin 13 H.A end
 -2 4880 a -2 4880 a
SDict begin [ /View [/XYZ H.V] /Dest (82) cvn H.B /DEST pdfmark end
 -2 4880 a Black 396 5053 a Ff(\225)p
Black 479 5053 a
SDict begin H.S end
 479 5053 a 479 5053 a
SDict begin 13 H.A end
 479 5053 a 479
5053 a
SDict begin [ /View [/XYZ H.V] /Dest (83) cvn H.B /DEST pdfmark end
 479 5053 a 21 w Fh(The)g(R)m(OM)g(must)h(start)f(on)g(a)h(2kB)f
(boundary)d(in)k(the)f(memory)e(space,)i(between)g(0xC8000)e(and)h
(0xEE000,)479 5161 y(although)g(some)h(main)f(BIOSes)i(scan)g(outside)e
(these)i(limits.)-2 5179 y
SDict begin H.S end
 -2 5179 a -2 5179 a
SDict begin 13 H.A end
 -2 5179
a -2 5179 a
SDict begin [ /View [/XYZ H.V] /Dest (84) cvn H.B /DEST pdfmark end
 -2 5179 a Black 3842 5569 a Fe(2)p Black
eop end
%%Page: 3 3
TeXDict begin 3 2 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black 0
TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.3) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
Black 396 72 a Ff(\225)p Black 479 72 a
SDict begin H.S end
 479 72 a 479
72 a
SDict begin 13 H.A end
 479 72 a 479 72 a
SDict begin [ /View [/XYZ H.V] /Dest (85) cvn H.B /DEST pdfmark end
 479 72 a 21 w Fh(The)g(\002rst)h(tw)o(o)f(bytes)
g(of)g(the)g(R)m(OM)h(must)f(be)g(55)g(AA)h(he)o(x.)-2
90 y
SDict begin H.S end
 -2 90 a -2 90 a
SDict begin 13 H.A end
 -2 90 a -2 90 a
SDict begin [ /View [/XYZ H.V] /Dest (86) cvn H.B /DEST pdfmark end
 -2 90 a Black 396
222 a Ff(\225)p Black 479 222 a
SDict begin H.S end
 479 222 a 479 222 a
SDict begin 13 H.A end
 479
222 a 479 222 a
SDict begin [ /View [/XYZ H.V] /Dest (87) cvn H.B /DEST pdfmark end
 479 222 a 21 w Fh(The)e(third)h(byte)f(of)h(the)g(R)m
(OM)g(should)f(contain)g(the)h(number)e(of)i(bytes)g(in)g(the)g(R)m(OM)
g(code)f(di)n(vided)g(by)g(512.)g(So)h(if)479 330 y(the)g(R)m(OM)h
(code)f(is)h(16kB)e(long,)g(then)h(this)h(byte)f(w)o(ould)f(hold)g(20)h
(he)o(x)g(\(32)f(decimal\).)-2 348 y
SDict begin H.S end
 -2 348 a -2 348
a
SDict begin 13 H.A end
 -2 348 a -2 348 a
SDict begin [ /View [/XYZ H.V] /Dest (88) cvn H.B /DEST pdfmark end
 -2 348 a Black 396 479 a Ff(\225)p
Black 479 479 a
SDict begin H.S end
 479 479 a 479 479 a
SDict begin 13 H.A end
 479 479 a 479 479
a
SDict begin [ /View [/XYZ H.V] /Dest (89) cvn H.B /DEST pdfmark end
 479 479 a 21 w Fh(All)i(the)f(bytes)g(in)g(the)h(R)m(OM)f
(\(speci\002ed)g(by)g(the)g(length)f(byte)h(just)g(mentioned\))e(must)j
(checksum)d(to)j(8)f(bits)h(of)479 587 y(binary)e(zero.)h(The)f(sum)i
(is)g(formed)d(by)i(8)g(bit)h(addition)e(of)g(all)i(the)f(bytes,)g
(thro)n(wing)f(a)o(w)o(ay)h(the)g(carry)-5 b(.)18 b(Note)j(that)479
695 y(there)f(is)h(not)f(a)h(particular)d(location)i(designated)f(as)h
(the)h("checksum)d(byte".)i(Normally)f(the)h(R)m(OM)g(b)n(uilding)479
803 y(process)g(alters)h(an)f(unused)f(byte)g(some)n(where)g(to)i
(ful\002l)f(the)g(checksum)f(condition.)-2 994 y
SDict begin H.S end
 -2 994
a -2 994 a
SDict begin 13 H.A end
 -2 994 a -2 994 a
SDict begin [ /View [/XYZ H.V] /Dest (90) cvn H.B /DEST pdfmark end
 -2 994 a 396 1102 a Fh(If)h(such)g(a)h(R)m
(OM)f(is)i(detected)d(and)h(v)n(alidated)f(by)g(a)i(scan,)f(then)g(the)
g(main)g(BIOS)h(does)f(a)g(f)o(ar)g(call)h(to)f(R)m(OMSEG:3,)396
1210 y(where)g(R)m(OMSEG)g(is)h(the)g(se)o(gment)e(of)h(the)g(R)m(OM)g
(and)g(3)g(is)h(the)g(of)n(fset)e(to)i(transfer)e(control)g(to)h(the)h
(disco)o(v)o(ered)396 1318 y(e)o(xtension)e(BIOS.)i(T)-7
b(ypically)19 b(a)i(netw)o(ork)e(boot)g(R)m(OM)h(does)g(not)g(tak)o(e)h
(full)f(control)f(at)h(this)h(point.)e(Instead)h(the)396
1426 y(normal)f(procedure)f(to)i(do)g(some)f(initialisation)h(or)g
(probing)e(of)i(the)g(hardw)o(are)f(and)g(then)h(plant)f(a)i(v)o(ector)
e(that)h(will)h(be)396 1534 y(called)f(when)g(the)g(BIOS)h(is)g(ready)e
(to)i(boot)e(the)h(OS.)h(The)f(v)o(ector)f(used)h(for)f(this)i(purpose)
d(is)k(normally)c(interrupt)396 1642 y(0x19)h(although)f(interrupt)h
(0x18)g(is)i(sometimes)f(used.)-2 1701 y
SDict begin H.S end
 -2 1701 a -2
1701 a
SDict begin 13 H.A end
 -2 1701 a -2 1701 a
SDict begin [ /View [/XYZ H.V] /Dest (91) cvn H.B /DEST pdfmark end
 -2 1701 a 396 1791 a Fh(F)o(or)g(PCI)h(plug)
e(and)h(play)g(R)m(OMs)h(things)e(are)h(more)g(complicated.)e(F)o(or)i
(the)g(full)g(story)-5 b(,)19 b(you)h(need)f(to)i(get)f(the)396
1899 y(speci\002cations)g(from)f(Phoenix)g(and)h(Intel.)f(Here)h(is)i
(a)e(quick)f(summary)-5 b(.)-2 1958 y
SDict begin H.S end
 -2 1958 a -2 1958
a
SDict begin 13 H.A end
 -2 1958 a -2 1958 a
SDict begin [ /View [/XYZ H.V] /Dest (92) cvn H.B /DEST pdfmark end
 -2 1958 a -2 1958 a
SDict begin H.S end
 -2 1958 a -2
1958 a
SDict begin 13 H.A end
 -2 1958 a -2 1958 a
SDict begin [ /View [/XYZ H.V] /Dest (93) cvn H.B /DEST pdfmark end
 -2 1958 a -2 2000 a
SDict begin H.S end
 -2 2000
a -2 2000 a
SDict begin 13 H.A end
 -2 2000 a -2 2000 a
SDict begin [ /View [/XYZ H.V] /Dest (94) cvn H.B /DEST pdfmark end
 -2 2000 a Black 396 2173
a Ff(\225)p Black 479 2173 a
SDict begin H.S end
 479 2173 a 479 2173 a
SDict begin 13 H.A end
 479
2173 a 479 2173 a
SDict begin [ /View [/XYZ H.V] /Dest (95) cvn H.B /DEST pdfmark end
 479 2173 a 21 w Fh(The)20 b(boot)f(R)m(OM)i(must)f
(satisfy)h(the)f(requirements)e(for)i(R)m(OMs)g(listed)h(abo)o(v)o(e)e
(\(called)g(le)o(gac)o(y)g(R)m(OMs\).)-2 2191 y
SDict begin H.S end
 -2 2191
a -2 2191 a
SDict begin 13 H.A end
 -2 2191 a -2 2191 a
SDict begin [ /View [/XYZ H.V] /Dest (96) cvn H.B /DEST pdfmark end
 -2 2191 a Black 396 2322
a Ff(\225)p Black 479 2322 a
SDict begin H.S end
 479 2322 a 479 2322 a
SDict begin 13 H.A end
 479
2322 a 479 2322 a
SDict begin [ /View [/XYZ H.V] /Dest (97) cvn H.B /DEST pdfmark end
 479 2322 a 21 w Fh(There)g(are)i(tw)o(o)f(additional)
f(structures)g(in)i(the)f(R)m(OM,)g(the)g(PCIR)i(structure)d(and)h(the)
g(PnP)g(structure.)f(These)479 2430 y(structures)h(are)g(pointed)f(to)h
(by)g(of)n(fsets)g(in)g(tw)o(o)h(16-bit)e(w)o(ords)h(at)g(0x18)f(and)h
(0x1A)f(bytes)h(respecti)n(v)o(ely)f(from)g(the)479 2538
y(be)o(ginning)f(of)i(the)g(R)m(OM.)g(As)h(a)g(double)e(check,)g(the)h
(structures)g(each)f(be)o(gin)g(with)i(4)f(magic)g(bytes,)f(PCIR)j(and)
479 2646 y($PnP)e(respecti)n(v)o(ely)-5 b(.)-2 2664 y
SDict begin H.S end

-2 2664 a -2 2664 a
SDict begin 13 H.A end
 -2 2664 a -2 2664 a
SDict begin [ /View [/XYZ H.V] /Dest (98) cvn H.B /DEST pdfmark end
 -2 2664 a Black
396 2796 a Ff(\225)p Black 479 2796 a
SDict begin H.S end
 479 2796 a 479
2796 a
SDict begin 13 H.A end
 479 2796 a 479 2796 a
SDict begin [ /View [/XYZ H.V] /Dest (99) cvn H.B /DEST pdfmark end
 479 2796 a 21 w Fh(The)20
b(PCIR)h(structure)e(contains)h(the)g(v)o(endor)e(and)i(de)n(vice)f
(IDs)i(of)f(the)g(netw)o(ork)f(adaptor)m(,)f(and)i(these)g(must)g
(match)479 2904 y(the)g(IDs)h(that)f(is)i(stored)d(in)i(the)f(adaptor')
-5 b(s)19 b(PCI)i(con\002guration)c(memory)-5 b(,)18
b(or)i(the)g(R)m(OM)h(will)g(be)f(ignored.)-2 2922 y
SDict begin H.S end

-2 2922 a -2 2922 a
SDict begin 13 H.A end
 -2 2922 a -2 2922 a
SDict begin [ /View [/XYZ H.V] /Dest (100) cvn H.B /DEST pdfmark end
 -2 2922 a Black
396 3053 a Ff(\225)p Black 479 3053 a
SDict begin H.S end
 479 3053 a 479
3053 a
SDict begin 13 H.A end
 479 3053 a 479 3053 a
SDict begin [ /View [/XYZ H.V] /Dest (101) cvn H.B /DEST pdfmark end
 479 3053 a 21 w Fh(The)g(PnP)g(structure)g
(contains)f(v)n(arious)g(v)o(ectors.)g(The)h(one)g(of)g(interest)g(to)g
(us)h(is)g(the)f(Boot)g(Ex)o(ecution)f(V)-9 b(ector)479
3161 y(\(BEV\).)20 b(This)g(points)g(to)h(the)f(starting)g(point)f(of)h
(the)g(boot)g(R)m(OM)g(code.)f(The)h(\002rst)h(time)g(the)f(R)m(OM)g
(is)h(detected,)f(it)479 3269 y(is)h(called)f(at)h(the)f(R)m(OMSEG+3)g
(entry)f(point)h(as)h(for)e(le)o(gac)o(y)g(R)m(OMs.)h(This)h(entry)e
(point)h(must)g(indicate,)f(by)479 3377 y(returning)f(0x20)g(in)i(re)o
(gister)f(AX,)h(that)f(it)i(is)f(a)g(netw)o(ork)f(boot)f(de)n(vice.)h
(When)g(the)h(BIOS)g(is)h(ready)d(to)i(boot,)f(it)h(calls)479
3485 y(the)g(BEV)-11 b(.)21 b(Note)f(that)h(the)f(BIOS)h(only)e(calls)i
(the)f(BEV)h(if)g(the)f(BIOS)h(con\002guration)c(speci\002es)k(the)f
(de)n(vice)f(in)i(the)479 3593 y(boot)f(sequence.)-2
3611 y
SDict begin H.S end
 -2 3611 a -2 3611 a
SDict begin 13 H.A end
 -2 3611 a -2 3611 a
SDict begin [ /View [/XYZ H.V] /Dest (102) cvn H.B /DEST pdfmark end
 -2 3611
a Black 396 3742 a Ff(\225)p Black 479 3742 a
SDict begin H.S end
 479 3742
a 479 3742 a
SDict begin 13 H.A end
 479 3742 a 479 3742 a
SDict begin [ /View [/XYZ H.V] /Dest (103) cvn H.B /DEST pdfmark end
 479 3742 a 21 w Fh(There)f(is)j(a)e
(checksum)f(for)g(the)i(PnP)f(structure)g(in)g(addition)f(to)h(the)g(o)
o(v)o(erall)f(checksum)g(in)h(le)o(gac)o(y)f(R)m(OMs.)-2
3933 y
SDict begin H.S end
 -2 3933 a -2 3933 a
SDict begin 13 H.A end
 -2 3933 a -2 3933 a
SDict begin [ /View [/XYZ H.V] /Dest (104) cvn H.B /DEST pdfmark end
 -2 3933
a 396 4041 a Fh(The)h(netw)o(ork)f(boot)g(process)h(then)g(w)o(orks)g
(lik)o(e)g(this:)-2 4100 y
SDict begin H.S end
 -2 4100 a -2 4100 a
SDict begin 13 H.A end
 -2 4100
a -2 4100 a
SDict begin [ /View [/XYZ H.V] /Dest (105) cvn H.B /DEST pdfmark end
 -2 4100 a -2 4100 a
SDict begin H.S end
 -2 4100 a -2 4100 a
SDict begin 13 H.A end
 -2
4100 a -2 4100 a
SDict begin [ /View [/XYZ H.V] /Dest (106) cvn H.B /DEST pdfmark end
 -2 4100 a -2 4142 a
SDict begin H.S end
 -2 4142 a -2 4142
a
SDict begin 13 H.A end
 -2 4142 a -2 4142 a
SDict begin [ /View [/XYZ H.V] /Dest (107) cvn H.B /DEST pdfmark end
 -2 4142 a Black 463 4315 a Fh(1.)p
Black 546 4315 a
SDict begin H.S end
 546 4315 a 546 4315 a
SDict begin 13 H.A end
 546 4315 a 546
4315 a
SDict begin [ /View [/XYZ H.V] /Dest (108) cvn H.B /DEST pdfmark end
 546 4315 a 20 w Fh(The)g(main)g(BIOS)h(detects)f(the)g
(Etherboot)f(R)m(OM)h(as)h(an)f(e)o(xtension)f(BIOS)i(and)f(passes)g
(control)f(to)i(it)g(with)f(a)h(f)o(ar)546 4423 y(call.)-2
4424 y
SDict begin H.S end
 -2 4424 a -2 4424 a
SDict begin 13 H.A end
 -2 4424 a -2 4424 a
SDict begin [ /View [/XYZ H.V] /Dest (109) cvn H.B /DEST pdfmark end
 -2 4424
a Black 463 4572 a Fh(2.)p Black 546 4572 a
SDict begin H.S end
 546 4572
a 546 4572 a
SDict begin 13 H.A end
 546 4572 a 546 4572 a
SDict begin [ /View [/XYZ H.V] /Dest (110) cvn H.B /DEST pdfmark end
 546 4572 a 20 w Fh(F)o(or)f(le)o
(gac)o(y)f(R)m(OMs,)h(the)h(Etherboot)d(code)h(hooks)g(itself)i(to)g
(interrupt)d(0x19)h(and)h(returns)f(control)g(to)h(the)g(main)546
4680 y(BIOS.)g(F)o(or)g(PnP)h(R)m(OMs)g(the)f(Etherboot)e(code)i
(indicates)f(that)i(it)g(is)g(a)f(bootable)f(de)n(vice.)-2
4681 y
SDict begin H.S end
 -2 4681 a -2 4681 a
SDict begin 13 H.A end
 -2 4681 a -2 4681 a
SDict begin [ /View [/XYZ H.V] /Dest (111) cvn H.B /DEST pdfmark end
 -2 4681
a Black 463 4830 a Fh(3.)p Black 546 4830 a
SDict begin H.S end
 546 4830
a 546 4830 a
SDict begin 13 H.A end
 546 4830 a 546 4830 a
SDict begin [ /View [/XYZ H.V] /Dest (112) cvn H.B /DEST pdfmark end
 546 4830 a 20 w Fh(The)h(main)g
(BIOS)h(\002nishes)f(initialising)g(other)g(de)n(vices)f(and)h(boots)g
(the)g(operating)e(system)j(by)e(calling)546 4938 y(interrupt)f(0x19.)
-2 4956 y
SDict begin H.S end
 -2 4956 a -2 4956 a
SDict begin 13 H.A end
 -2 4956 a -2 4956 a
SDict begin [ /View [/XYZ H.V] /Dest (113) cvn H.B /DEST pdfmark end
 -2
4956 a Black 463 5087 a Fh(4.)p Black 546 5087 a
SDict begin H.S end
 546
5087 a 546 5087 a
SDict begin 13 H.A end
 546 5087 a 546 5087 a
SDict begin [ /View [/XYZ H.V] /Dest (114) cvn H.B /DEST pdfmark end
 546 5087 a 20
w Fh(The)i(Etherboot)f(code)g(gains)h(control.)-2 5105
y
SDict begin H.S end
 -2 5105 a -2 5105 a
SDict begin 13 H.A end
 -2 5105 a -2 5105 a
SDict begin [ /View [/XYZ H.V] /Dest (115) cvn H.B /DEST pdfmark end
 -2 5105 a Black
3842 5569 a Fe(3)p Black eop end
%%Page: 4 4
TeXDict begin 4 3 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black 0
TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.4) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
Black 463 72 a Fh(5.)p Black 546 72 a
SDict begin H.S end
 546 72 a 546 72
a
SDict begin 13 H.A end
 546 72 a 546 72 a
SDict begin [ /View [/XYZ H.V] /Dest (116) cvn H.B /DEST pdfmark end
 546 72 a 20 w Fh(It)h(initialises)g(the)f(netw)o
(ork)f(hardw)o(are)g(so)i(that)f(it)h(is)g(ready)e(to)h(send)g(and)g
(recei)n(v)o(e)f(pack)o(ets.)-2 90 y
SDict begin H.S end
 -2 90 a -2 90 a
SDict begin 13 H.A end

-2 90 a -2 90 a
SDict begin [ /View [/XYZ H.V] /Dest (117) cvn H.B /DEST pdfmark end
 -2 90 a Black 463 222 a Fh(6.)p Black
546 222 a
SDict begin H.S end
 546 222 a 546 222 a
SDict begin 13 H.A end
 546 222 a 546 222 a
SDict begin [ /View [/XYZ H.V] /Dest (118) cvn H.B /DEST pdfmark end
 546
222 a 20 w Fh(It)i(sends)f(a)h(Boot)f(Protocol)f(\()1413
222 y
SDict begin H.S end
 1413 222 a 1413 222 a
SDict begin 13 H.A end
 1413 222 a 1413 222 a
SDict begin [ /View [/XYZ H.V] /Dest (119) cvn H.B /DEST pdfmark end
 1413
222 a Fh(BOO)m(TP)h(\(http://www)-5 b(.ietf.or)o(g/rfc/rfc951)o(.txt\))
o(\))15 b(or)20 b(Dynamic)f(Host)546 330 y(Con\002guration)f(Protocol)h
(\()1358 330 y
SDict begin H.S end
 1358 330 a 1358 330 a
SDict begin 13 H.A end
 1358 330 a 1358
330 a
SDict begin [ /View [/XYZ H.V] /Dest (120) cvn H.B /DEST pdfmark end
 1358 330 a Fh(DHCP)i(\(http://www)-5 b(.ietf.or)o(g/rfc/rfc2)o
(131)o(.tx)o(t\)\))14 b(broadcast)19 b(query)g(pack)o(et.)h(An)546
438 y(alternati)n(v)o(e)f(is)i(Re)n(v)o(erse)f(Address)f(Resolution)h
(Protocol)f(\()2278 438 y
SDict begin H.S end
 2278 438 a 2278 438 a
SDict begin 13 H.A end
 2278
438 a 2278 438 a
SDict begin [ /View [/XYZ H.V] /Dest (121) cvn H.B /DEST pdfmark end
 2278 438 a Fh(RARP)i(\(http://www)-5
b(.ietf.or)o(g/rfc/rfc903)o(.tx)o(t\)\))-2 456 y
SDict begin H.S end
 -2 456
a -2 456 a
SDict begin 13 H.A end
 -2 456 a -2 456 a
SDict begin [ /View [/XYZ H.V] /Dest (122) cvn H.B /DEST pdfmark end
 -2 456 a Black 463 587 a
Fh(7.)p Black 546 587 a
SDict begin H.S end
 546 587 a 546 587 a
SDict begin 13 H.A end
 546 587 a
546 587 a
SDict begin [ /View [/XYZ H.V] /Dest (123) cvn H.B /DEST pdfmark end
 546 587 a 20 w Fh(Assuming)20 b(a)h(reply)e(is)i(recei)n(v)o
(ed,)d(the)j(Etherboot)d(code)h(decodes)h(the)g(\002elds)g(of)g(the)g
(reply)-5 b(,)19 b(sets)j(its)f(IP)f(address)546 695
y(and)f(other)h(parameters,)e(and)i(sends)g(a)h(T)m(ri)n(vial)f(File)h
(T)m(ransfer)e(Protocol)g(\()2708 695 y
SDict begin H.S end
 2708 695 a 2708
695 a
SDict begin 13 H.A end
 2708 695 a 2708 695 a
SDict begin [ /View [/XYZ H.V] /Dest (124) cvn H.B /DEST pdfmark end
 2708 695 a Fh(TFTP)546 803
y(\(http://www)-5 b(.ietf.or)o(g/rfc/rfc13)o(50)o(.tx)o(t\)\))15
b(request)k(to)h(do)n(wnload)f(the)h(\002le.)g(Be)h(a)o(w)o(are)f(that)
g(the)h(16-bit)e(counter)546 911 y(\002eld)h(of)g(TFTP)h(may)e(limit)i
(transfers)e(to)i(16)f(MB)h(\(signed)e(interpretation\),)e(32)j(MB)h
(\(unsigned)d(interpretation\))546 1019 y(or)i(90)f(MB)i(\(unsigned,)d
(lar)o(ge)h(block)h(size)h(option)e(acti)n(v)o(e\).)g(This)h(is)h(a)g
(rollo)o(v)o(er)d(b)n(ug)h(in)i(man)o(y)e(TFTP)h(serv)o(ers,)546
1127 y(b)n(ut)g(quite)g(pre)n(v)n(alent.)e(An)i(alternati)n(v)o(e)f
(loading)g(protocol)f(is)j(Netw)o(ork)f(File)h(System)f(\()3091
1127 y
SDict begin H.S end
 3091 1127 a 3091 1127 a
SDict begin 13 H.A end
 3091 1127 a 3091 1127
a
SDict begin [ /View [/XYZ H.V] /Dest (125) cvn H.B /DEST pdfmark end
 3091 1127 a Fh(NFS)546 1235 y(\(http://www)-5 b(.ietf.or)o
(g/rfc/rfc10)o(94)o(.tx)o(t\)\))15 b(protocol.)j(In)i(this)g(instance)g
(a)h(mount)e(of)h(the)g(remote)f(\002lesystem)i(is)546
1343 y(done)e(\(with)h(the)g(bare)g(minimum)e(of)i(features\))f(and)h
(the)g(boot)g(\002le)h(is)g(read)e(of)n(f)h(the)g(\002lesystem.)-2
1361 y
SDict begin H.S end
 -2 1361 a -2 1361 a
SDict begin 13 H.A end
 -2 1361 a -2 1361 a
SDict begin [ /View [/XYZ H.V] /Dest (126) cvn H.B /DEST pdfmark end
 -2 1361
a Black 463 1492 a Fh(8.)p Black 546 1492 a
SDict begin H.S end
 546 1492
a 546 1492 a
SDict begin 13 H.A end
 546 1492 a 546 1492 a
SDict begin [ /View [/XYZ H.V] /Dest (127) cvn H.B /DEST pdfmark end
 546 1492 a 20 w Fh(The)g(\002le)h
(to)g(be)f(loaded)f(is)i(in)f(a)h(special)f(format,)f(it)i(contains)e
(a)i("directory")d(in)j(the)f(\002rst)h(block)e(that)h(speci\002es)546
1600 y(where)f(in)i(memory)d(the)i(v)n(arious)f(pieces)i(of)f(the)g
(\002le)h(are)f(to)g(be)g(loaded.)f(F)o(ormats)h(that)g(are)g
(supported)e(are)546 1708 y(tagged)p 0 TeXcolorgray 788
1708 a
SDict begin H.S end
 788 1708 a Fh(Appendix)g(A)1196 1708 y
SDict begin 13 H.L end
 1196 1708
a 1196 1708 a
SDict begin [ /Subtype /Link /Dest (tagged) cvn /H /I /Border [0 0
0] /Color [1 0 0] H.B /ANN pdfmark end
 1196 1708 a Black 21 w Fh(or)1307 1708
y
SDict begin H.S end
 1307 1708 a 1307 1708 a
SDict begin 13 H.A end
 1307 1708 a 1307 1708 a
SDict begin [ /View [/XYZ H.V] /Dest (129) cvn H.B /DEST pdfmark end
 1307
1708 a Fh(Ex)o(ecution)g(and)h(Loader)g(F)o(ormat)h(\(ELF\))546
1816 y(\(http://www)-5 b(.acm.uiuc.edu/sigops/rsrc)o(/pfm)o(t11)o(.pd)o
(f\))o(.)15 b(One)20 b(small)h(e)o(xtension)d(to)j(ELF)f(has)h(been)e
(made,)g(the)546 1924 y(top)h(bit)g(in)g(the)h(e_\003ags)e(longw)o(ord)
g(of)h(the)g(ELF)g(header)f(has)i(been)e(used)h(as)546
2032 y(ELF_PR)m(OGRAM_RETURNS_BIT)-6 b(,)18 b(meaning)h(that)h(the)h
(program)d(transferred)g(to)i(intends)g(to)g(return)f(to)546
2140 y(Etherboot,)e(e.g.)j(a)g(menu)f(program,)f(and)h(that)h
(Etherboot)e(should)h(not)g(disable)h(the)g(netw)o(ork)f(interf)o(ace)g
(yet.)g(See)546 2248 y(the)h(\002le)795 2248 y
SDict begin H.S end
 795 2248
a 795 2248 a
SDict begin 13 H.A end
 795 2248 a 795 2248 a
SDict begin [ /View [/XYZ H.V] /Dest (130) cvn H.B /DEST pdfmark end
 795 2248 a Fd(core/osloader.c)p
Fh(.)-2 2295 y
SDict begin H.S end
 -2 2295 a -2 2295 a
SDict begin 13 H.A end
 -2 2295 a -2 2295
a
SDict begin [ /View [/XYZ H.V] /Dest (131) cvn H.B /DEST pdfmark end
 -2 2295 a 546 2397 a Fh(Eric)g(Biederman)f(adds:)h(The)g(ELF)g
(format)f(is)i(documented)d(in)i(the)2556 2397 y
SDict begin H.S end
 2556
2397 a 2556 2397 a
SDict begin 13 H.A end
 2556 2397 a 2556 2397 a
SDict begin [ /View [/XYZ H.V] /Dest (132) cvn H.B /DEST pdfmark end
 2556 2397
a Fh(SysV)h(Generic)f(ABI)g(doc)546 2505 y(\(http://www)-5
b(.sco.com/de)n(v)o(eloper)o(/de)n(v)o(specs/g)o(abi4)o(1.p)o(df)o(\).)
546 2613 y
SDict begin H.S end
 546 2613 a 546 2613 a
SDict begin 13 H.A end
 546 2613 a 546 2613
a
SDict begin [ /View [/XYZ H.V] /Dest (133) cvn H.B /DEST pdfmark end
 546 2613 a Fh(http://www)g(.sco.com/de)n(v)o(eloper/d)o(e)n(vsp)o
(ecs/abi38)o(6-)o(4.)o(pdf)14 b(Also)20 b(check)g(out)g(the)2993
2613 y
SDict begin H.S end
 2993 2613 a 2993 2613 a
SDict begin 13 H.A end
 2993 2613 a 2993 2613
a
SDict begin [ /View [/XYZ H.V] /Dest (134) cvn H.B /DEST pdfmark end
 2993 2613 a Fh(linux)f(standard)g(base)546 2721 y(\(http://www)-5
b(.linuxbase.or)o(g/spec/\))o(,)15 b(it)21 b(has)f(good)f(links)h(to)h
(all)f(of)g(these)h(documents,)d(in)i(its)i(related)546
2829 y(documents)c(section.)438 2978 y
SDict begin H.S end
 438 2978 a 438
2978 a
SDict begin 13 H.A end
 438 2978 a 438 2978 a
SDict begin [ /View [/XYZ H.V] /Dest (135) cvn H.B /DEST pdfmark end
 438 2978 a Black 463 3128
a Fh(9.)p Black 546 3128 a
SDict begin H.S end
 546 3128 a 546 3128 a
SDict begin 13 H.A end
 546
3128 a 546 3128 a
SDict begin [ /View [/XYZ H.V] /Dest (136) cvn H.B /DEST pdfmark end
 546 3128 a 20 w Fh(Etherboot)h(transfers)g(control)g
(to)i(the)f(loaded)f(image.)-2 3319 y
SDict begin H.S end
 -2 3319 a -2 3319
a
SDict begin 13 H.A end
 -2 3319 a -2 3319 a
SDict begin [ /View [/XYZ H.V] /Dest (137) cvn H.B /DEST pdfmark end
 -2 3319 a 396 3427 a Fh(Notice)h(no)g(assumption)
f(w)o(as)i(made)f(that)g(the)g(image)g(is)h(a)g(Linux)e(k)o(ernel.)g
(Ev)o(en)g(though)f(loading)h(Linux)g(k)o(ernels)h(is)396
3534 y(the)g(most)h(common)d(use)i(of)g(Etherboot,)e(there)i(is)h
(nothing)e(in)h(the)g(procedure)e(abo)o(v)o(e)g(that)j(is)g(Linux)e
(speci\002c.)h(By)396 3642 y(creating)f(the)i(loaded)e(\002le)i
(appropriately)-5 b(,)16 b(dif)n(ferent)j(operating)f(systems,)j(e.g.)e
(FreeBSD,)i(DOS,)f(can)g(be)g(loaded.)-2 3702 y
SDict begin H.S end
 -2 3702
a -2 3702 a
SDict begin 13 H.A end
 -2 3702 a -2 3702 a
SDict begin [ /View [/XYZ H.V] /Dest (138) cvn H.B /DEST pdfmark end
 -2 3702 a 396 3792 a
Fh(In)g(the)g(case)h(of)e(a)i(Linux)e(k)o(ernel,)g(there)g(is)i(some)f
(additional)f(w)o(ork)g(to)h(be)g(done)f(before)g(the)h(k)o(ernel)f
(can)h(be)g(called,)f(so)396 3900 y(the)h(se)o(gment)g(of)g(the)g
(\002le)h(that)f(Etherboot)e(transfers)i(to)g(is)h(not)f(the)g(startup)
g(se)o(gment)f(of)h(the)g(k)o(ernel,)g(b)n(ut)g(an)g(initial)396
4008 y(stub,)g(whose)g(code)g(is)h(in)1148 4008 y
SDict begin H.S end
 1148
4008 a 1148 4008 a
SDict begin 13 H.A end
 1148 4008 a 1148 4008 a
SDict begin [ /View [/XYZ H.V] /Dest (139) cvn H.B /DEST pdfmark end
 1148 4008
a Fd(first32.c)e Fh(in)i(the)f(mknbi)f(package.)f(This)j(stub)f(has)g
(se)n(v)o(eral)g(tasks,)g(which)g(either)396 4116 y(cannot)f(be)h(done)
g(by)f(Etherboot,)f(or)i(should)f(not)h(be)g(done)g(by)f(Etherboot)g
(because)g(the)o(y)h(are)g(Linux)f(speci\002c.)h(These)396
4224 y(are:)g(to)h(append)d(k)o(ernel)i(ar)o(guments)e(from)h(option)g
(129)g(of)h(the)g(BOO)m(TP)h(or)f(DHCP)h(reply;)e(to)i(cop)o(y)e(and)h
(e)o(xpand)396 4332 y(special)h(k)o(ernel)e(parameters,)g(in)h
(particular)f(the)h(vga=)f(and)h(the)g(ip=)g(parameters)f(and)h(then)g
(to)g(point)f(the)i(k)o(ernel)e(to)396 4439 y(the)h(location)g(of)g
(the)g(parameter)f(area;)h(to)g(mo)o(v)o(e)f(the)h(RAMdisk,)g(if)g
(there)g(is)h(one,)f(to)g(the)g(top)g(of)g(memory)e(\(this)j(last)396
4547 y(cannot)e(be)h(done)g(at)g(image)g(creation)f(time)i(since)f(the)
g(size)h(of)f(the)g(RAM)h(of)f(the)g(machine)f(is)i(not)f(kno)n(wn)f
(then\).)-2 4607 y
SDict begin H.S end
 -2 4607 a -2 4607 a
SDict begin 13 H.A end
 -2 4607 a -2 4607
a
SDict begin [ /View [/XYZ H.V] /Dest (140) cvn H.B /DEST pdfmark end
 -2 4607 a 396 4697 a Fh(The)g(k)o(ernel)g(parameters)f(are)h(passed)h
(to)f(the)h(k)o(ernel)e(as)i(a)g(pointer)e(to)i(the)f(string)g(written)
h(in)f(a)h(certain)f(location)f(in)i(the)396 4805 y(original)f
(bootblock)f(\()1056 4805 y
SDict begin H.S end
 1056 4805 a 1056 4805 a
SDict begin 13 H.A end
 1056
4805 a 1056 4805 a
SDict begin [ /View [/XYZ H.V] /Dest (141) cvn H.B /DEST pdfmark end
 1056 4805 a Fd(boot.S)i Fh(from)f(the)h(Linux)f(k)o
(ernel)g(sources\).)h(This)g(is)h(a)g(16-bit)e(pointer)g(and)g(is)i
(the)g(of)n(fset)e(of)396 4913 y(the)h(parameter)f(area)h(from)f(the)h
(base)h(of)f(the)g(bootblock.)d(This)k(is)g(one)f(reason)f(why)g(the)i
(parameter)d(area)i(must)g(be)h(in)396 5021 y(the)f(same)h(64kB)e(as)i
(the)g(bootblock.)c(If)j(the)g(components)e(of)i(Etherboot)f(are)h(to)g
(be)g(relocated)f(else)n(where,)h(e.g.)396 5129 y(0x80000)e(upw)o
(ards,)h(then)g(the)o(y)h(should)f(be)h(relocated)f(together)-5
b(.)19 b(In)h(v)o(ersion)f(0x0202)f(and)h(abo)o(v)o(e)g(of)h(the)g
(Linux)p Black 3842 5569 a Fe(4)p Black eop end
%%Page: 5 5
TeXDict begin 5 4 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black 0
TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.5) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
396 72 a Fh(setup)g(se)o(gment,)f(this)i(can)f(be)g(passed)g(instead)g
(as)h(a)g(absolute)e(32-bit)g(pointer)g(in)i(a)f(certain)g(location)f
(in)h(the)h(setup)396 180 y(se)o(gment.)e(This)i(eases)g(the)f
(relocation)e(requirements.)g(The)i(address)g(of)g(the)g(RAM)h(disk,)f
(if)g(it)h(e)o(xists,)g(is)g(passed)f(to)396 288 y(the)g(k)o(ernel)g
(as)h(a)f(32-bit)f(address)h(in)h(a)f(particular)f(location)g(in)i(the)
f(setup)g(se)o(gment)f(\()2880 288 y
SDict begin H.S end
 2880 288 a 2880
288 a
SDict begin 13 H.A end
 2880 288 a 2880 288 a
SDict begin [ /View [/XYZ H.V] /Dest (142) cvn H.B /DEST pdfmark end
 2880 288 a Fd(setup.S)g Fh(from)g(the)i
(Linux)396 396 y(k)o(ernel)e(sources\).)f(This)i(is)g(\002lled)g(in)g
(with)g(the)f(\002nal)h(location)e(of)h(the)h(RAM)g(disk)g(after)f(it)h
(has)g(been)e(mo)o(v)o(ed)g(to)i(the)f(top)396 504 y(of)h(memory)-5
b(.)-2 564 y
SDict begin H.S end
 -2 564 a -2 564 a
SDict begin 13 H.A end
 -2 564 a -2 564 a
SDict begin [ /View [/XYZ H.V] /Dest (143) cvn H.B /DEST pdfmark end
 -2 564
a 396 874 a Fg(3.2.)35 b(T)-10 b(o)34 b(compress)h(or)d(not)i(to)f
(compress,)i(that)e(is)h(the)g(question)3641 874 y
SDict begin H.S end
 3641
874 a 3641 874 a
SDict begin 18.72 H.A end
 3641 874 a 3641 874 a
SDict begin [ /View [/XYZ H.V] /Dest (0.3.6.2) cvn H.B /DEST pdfmark
end
 3641 874 a -2
958 a
SDict begin H.S end
 -2 958 a -2 958 a
SDict begin 13 H.A end
 -2 958 a -2 958 a
SDict begin [ /View [/XYZ H.V] /Dest (145) cvn H.B /DEST pdfmark end
 -2 958 a 396
1042 a Fh(W)-7 b(e)22 b(simpli\002ed)e(things)f(a)i(little)g(when)e(we)
i(talk)o(ed)f(about)f(ho)n(w)h(the)g(main)g(BIOS)h(detects)f(the)g
(Etherboot)e(R)m(OM)j(and)396 1149 y(passes)g(control)e(to)h(it.)h(At)g
(this)g(point)e(the)h(code)g(is)h(e)o(x)o(ecuting)d(from)h(R)m(OM.)h
(There)g(are)g(tw)o(o)g(problems)f(with)396 1257 y(e)o(x)o(ecuting)f
(from)h(R)m(OM)i(where)f(x86)f(PCs)i(are)g(concerned.)-2
1317 y
SDict begin H.S end
 -2 1317 a -2 1317 a
SDict begin 13 H.A end
 -2 1317 a -2 1317 a
SDict begin [ /View [/XYZ H.V] /Dest (146) cvn H.B /DEST pdfmark end
 -2 1317
a -2 1317 a
SDict begin H.S end
 -2 1317 a -2 1317 a
SDict begin 13 H.A end
 -2 1317 a -2 1317 a
SDict begin [ /View [/XYZ H.V] /Dest (147) cvn H.B /DEST pdfmark end
 -2
1317 a -2 1358 a
SDict begin H.S end
 -2 1358 a -2 1358 a
SDict begin 13 H.A end
 -2 1358 a -2 1358
a
SDict begin [ /View [/XYZ H.V] /Dest (148) cvn H.B /DEST pdfmark end
 -2 1358 a Black 463 1531 a Fh(1.)p Black 546 1531 a
SDict begin H.S end

546 1531 a 546 1531 a
SDict begin 13 H.A end
 546 1531 a 546 1531 a
SDict begin [ /View [/XYZ H.V] /Dest (149) cvn H.B /DEST pdfmark end
 546 1531
a 20 w Fh(The)f(x86)g(architecture)e(does)i(not)g(easily)g(support)f
(Position)h(Independent)d(Code)j(\(PIC\).)g(The)g(main)g(dra)o(wback)
546 1639 y(when)f(e)o(x)o(ecuting)f(C)j(code)f(is)h(referencing)d
(global)h(entities)i(\(global)e(and)g(static)i(v)n(ariables\).)e(Since)
h(the)h(R)m(OM)546 1747 y(address)e(is)i(not)f(kno)n(wn)e(when)h(b)n
(uilding)g(the)h(image,)f(addresses)g(cannot)g(be)h(assigned)f(to)h
(global)f(entities.)h(More)546 1855 y(adv)n(anced)e(en)m(vironments)f
(ha)n(v)o(e)j(a)g(dynamic)f(loader)g(for)h(adjusting)f(references)g
(just)i(before)d(use.)j(Etherboot)546 1963 y(has)f(no)g(such)g(help.)f
(If)h(the)h(code)e(were)h(written)g(in)g(assembler)m(,)g(we)g(could)f
(use)i(a)f(con)m(v)o(ention)e(lik)o(e)i(al)o(w)o(ays)546
2071 y(referencing)d(global)j(entities)g(as)h(of)n(fsets)f(from)f(a)i
(particular)e(re)o(gister)-5 b(.)20 b(But)g(we)h(don')o(t)d(w)o(ant)j
(to)f(write)g(in)546 2179 y(assembler)f(and)h(we)h(don')o(t)d(ha)n(v)o
(e)i(control)f(o)o(v)o(er)g(what)h(the)g(C)h(compiler)e(generates.)-2
2197 y
SDict begin H.S end
 -2 2197 a -2 2197 a
SDict begin 13 H.A end
 -2 2197 a -2 2197 a
SDict begin [ /View [/XYZ H.V] /Dest (150) cvn H.B /DEST pdfmark end
 -2 2197
a Black 463 2328 a Fh(2.)p Black 546 2328 a
SDict begin H.S end
 546 2328
a 546 2328 a
SDict begin 13 H.A end
 546 2328 a 546 2328 a
SDict begin [ /View [/XYZ H.V] /Dest (151) cvn H.B /DEST pdfmark end
 546 2328 a 20 w Fh(C)j(code)d
(assumes)i(that)f(data)g(locations)f(are)i(writable.)e(R)m(OM)i
(locations)e(are)h(not)g(writable,)g(by)g(de\002nition.)e(One)546
2436 y(could)h(remedy)g(this)h(by)g(locating)f(the)i(writable)e
(entities)i(in)f(a)h(RAM)g(se)o(gment,)e(b)n(ut)h(this)h(causes)f(more)
546 2544 y(complication.)-2 2735 y
SDict begin H.S end
 -2 2735 a -2 2735
a
SDict begin 13 H.A end
 -2 2735 a -2 2735 a
SDict begin [ /View [/XYZ H.V] /Dest (152) cvn H.B /DEST pdfmark end
 -2 2735 a 396 2843 a Fh(F)o(or)g(the)g(reasons)g
(abo)o(v)o(e,)e(Etherboot)h(copies)g(itself)i(to)g(the)f(top)g(of)f
(memory)g(or)h(4)g(GB,)h(whiche)n(v)o(er)d(is)j(the)g(lesser)m(,)f(and)
396 2951 y(e)o(x)o(ecutes)f(there.)h(Ho)n(we)n(v)o(er)e(that)j(is)g
(the)f(physical)f(address.)h(The)f(logical)h(address)g(for)g(e)o(x)o
(ecution)e(is)j(set)g(in)f(the)396 3059 y(Mak)o(e\002le)g(and)g
(currently)e(is)k(0x20000)17 b(for)i(the)i(x86)e(v)o(ersion.)g(The)g
(translation)h(is)h(done)e(using)h(the)g(address)396
3167 y(translation)g(f)o(acility)g(of)g(the)g(MMU.)g(This)g(allo)n(ws)h
(Etherboot)d(global)h(v)n(ariables)h(and)f(functions)g(to)h(be)g
(assigned)396 3275 y(kno)n(wn)f(addresses)h(at)h(the)f(linking)f(step.)
-2 3334 y
SDict begin H.S end
 -2 3334 a -2 3334 a
SDict begin 13 H.A end
 -2 3334 a -2 3334 a
SDict begin [ /View [/XYZ H.V] /Dest (153) cvn H.B /DEST pdfmark end
 -2
3334 a 396 3424 a Fh(\(Actually)h(top)f(of)h(memory)f(isn')o(t)h
(completely)e(true.)i(On)g(the)g(x86)g(platform)e(it)j(e)o(x)o(ecutes)e
(in)i(an)f(e)n(v)o(en)f(me)o(gabyte)f(just)396 3532 y(belo)n(w)i(the)g
(top)g(of)g(memory)-5 b(.)18 b(This)i(is)h(normally)e(the)h(second)f
(last)i(me)o(gabyte.)d(The)i(reason)f(has)i(to)f(do)g(with)g(the)396
3640 y(setting)g(of)g(the)h(A20)e(gate.)h(If)g(Etherboot)e(e)o(x)o
(ecutes)h(in)h(an)h(odd)e(me)o(gabyte)f(it)j(will)g(get)f(gated)f(out)h
(of)g(e)o(xistence)f(when)396 3748 y(the)h(A20)g(gate)g(is)h(disabled.)
e(By)i(running)d(in)i(an)g(e)n(v)o(en)g(me)o(gabyte)d(this)k(is)g(a)n
(v)n(oided.)e(Note)h(that)h(we)f(still)i(ha)n(v)o(e)d(to)396
3856 y(disable)g(the)h(A20)f(gate)g(because)g(some)g(operating)f
(systems)h(react)h(strangely)e(if)i(the)o(y)f(\002nd)g(it)h(enabled)e
(when)h(the)o(y)g(are)396 3964 y(e)o(xpecting)g(it)h(not)g(to)h(be,)f
(b)n(ut)g(no)n(w)f(we)i(can)f(do)g(it)h(from)e(C)i(instead)f(of)g(from)
f(real)h(mode)f(asm)i(running)d(in)i(the)g(lo)n(wer)396
4072 y(640kB.\))-2 4128 y
SDict begin H.S end
 -2 4128 a -2 4128 a
SDict begin 13 H.A end
 -2 4128
a -2 4128 a
SDict begin [ /View [/XYZ H.V] /Dest (154) cvn H.B /DEST pdfmark end
 -2 4128 a 396 4221 a Fh(This)h(gi)n(v)o(es)e(us)i(about)e
(1)h(MB)h(for)f(code,)f(data,)h(and)g(stack.)g(There)f(is)i(no)f(heap)f
(as)i(is)h(normally)c(understood;)396 4329 y(Etherboot)g(does)i(not)g
(ha)n(v)o(e)g(dynamic)f(storage)g(allocation.)g(This)h(k)o(eeps)g
(things)g(simple,)g(mak)o(es)g(it)h(a)g(bit)f(less)h(prone)396
4437 y(to)g(programming)16 b(errors,)j(and)h(also)h(acts)f(as)h(a)g
(check)e(against)h(unthinking)d(use)k(of)f(memory)e(by)i(programmers.)
396 4545 y(There)g(is)h(ho)n(we)n(v)o(er)d(a)j(small)f(heap)g(which)f
(can)h(be)h(used)e(to)i(pro)o(vide)d(small)j(allocations)e(of)h(memory)
e(belo)n(w)i(640)f(kB.)-2 4605 y
SDict begin H.S end
 -2 4605 a -2 4605 a
SDict begin 13 H.A end

-2 4605 a -2 4605 a
SDict begin [ /View [/XYZ H.V] /Dest (155) cvn H.B /DEST pdfmark end
 -2 4605 a 396 4694 a Fh(The)h(R)m(OM)h(loader)e
(copies)h(the)g(payload)f(to)h(a)h(temporary)d(location)h(starting)h
(at)g(0x80000)e(and)h(continues)g(e)o(x)o(ecution)396
4802 y(from)g(there.)h(The)g(reason)f(for)h(this)g(\002rst)h
(relocation)e(is)i(so)g(that)f(e)o(x)o(ecution)e(goes)i(f)o(aster)-5
b(.)21 b(T)-7 b(ypically)19 b(R)m(OM)i(has)f(longer)396
4910 y(access)h(times)g(than)e(RAM)i(and)f(is)h(often)e(accessed)i(8)f
(bits)h(at)f(a)h(time.)f(The)g(glue)g(chipsets)g(used)g(in)g
(motherboards)396 5018 y(add)g(w)o(ait)h(states)g(so)g(that)f(the)g
(CPU)h(can)f(interf)o(ace)g(with)g(relati)n(v)o(ely)f(slo)n(w)h(R)m
(OM.)h(This)f(is)h(to)g(reduce)e(R)m(OM)h(costs,)h(as)396
5126 y(e)o(x)o(ecution)d(speed)i(is)h(not)f(important)f(at)h(boot)g
(time.)g(By)h(cop)o(ying)d(itself)j(to)f(RAM)h(\002rst,)g(the)f
(decompression)e(goes)p Black 3842 5569 a Fe(5)p Black
eop end
%%Page: 6 6
TeXDict begin 6 5 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black 0
TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.6) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
396 72 a Fh(f)o(aster)-5 b(.)21 b(After)f(relocation)e(and)i
(resumption)e(of)i(e)o(x)o(ecution,)e(for)i(the)g(x86)f(platform,)g
(the)h(loader)f(then)h(jumps)g(to)396 180 y(start16,)g(which)f
(switches)i(into)f(protected)f(mode,)g(then)g(this)i(jumps)f(to)g
(start32.)g(On)g(other)f(platforms,)g(there)h(is)h(no)396
288 y(need)f(to)g(switch)h(modes)e(so)i(it)g(jumps)e(to)i(the)f(be)o
(ginning)e(of)h(the)i(code)e(directly)-5 b(.)19 b(Other)h(loaders)f
(are)h(used)g(when)g(the)396 396 y(code)g(is)h(not)f(run)f(from)g(R)m
(OM)i(b)n(ut)f(the)o(y)g(also)g(ha)n(v)o(e)g(the)g(ultimate)g(action)f
(of)h(jumping)f(to)h(start16.)-2 456 y
SDict begin H.S end
 -2 456 a -2 456
a
SDict begin 13 H.A end
 -2 456 a -2 456 a
SDict begin [ /View [/XYZ H.V] /Dest (156) cvn H.B /DEST pdfmark end
 -2 456 a 396 546 a Fh(W)-7 b(e)22
b(usually)d(w)o(ant)i(to)f(minimise)g(the)g(size)h(of)f(the)g(R)m(OM)g
(used)g(to)h(hold)e(Etherboot.)f(Ev)o(en)h(if)i(the)f(netw)o(ork)f
(adapter)396 654 y(accommodates)f(lar)o(ge)i(R)m(OMs,)g(there)g(are)g
(man)o(y)f(claims)i(on)e(the)i(area)f(between)f(0xC8000)f(to)i
(0xEE000,)e(by)i(other)396 762 y(e)o(xtension)f(BIOSes,)i(by)f
(peripherals)e(that)i(use)h(shared)e(memory)-5 b(,)18
b(and)i(so)g(forth.)f(Compressed)g(images)h(are)h(suf)n(\002x)o(ed)396
869 y(with)g(.z*.)e(The)h(payload)f(is)i(a)f(.zimg)g(\002le.)h(The)e
(\002rst)i(part)f(of)g(a)h(.zimg)e(\002le)i(is)g(the)g(decompressor)c
(which)396 977 y(decompresses)i(its)i(o)n(wn)f(payload)f(to)h(the)g
(intended)f(e)o(x)o(ecution)f(location.)h(The)h(decompressor)e(is)j
(assembled)e(from)396 1085 y
SDict begin H.S end
 396 1085 a 396 1085 a
SDict begin 13 H.A end
 396
1085 a 396 1085 a
SDict begin [ /View [/XYZ H.V] /Dest (157) cvn H.B /DEST pdfmark end
 396 1085 a Fd(arch/i386/prefix/unnrv2b.S)p
Fh(.)d(The)k(second)g(part)f(is)j(the)e(.img)f(result)i(of)f(a)g
(compilation.)e(In)396 1193 y(non-compressed)f(images,)j(the)g(.img)g
(is)h(the)f(one)g(and)f(only)h(part)g(in)g(the)g(payload.)e(Compressed)
i(.zrom)f(images)396 1301 y(should)g(w)o(ork)h(just)h(the)f(same)g(as)h
(.rom)e(images,)h(b)n(ut)g(are)g(smaller)h(\(b)n(ut)e(this)i(sa)n(ving)
f(may)g(or)g(may)f(not)h(bring)f(it)i(belo)n(w)396 1409
y(a)g(particular)e(R)m(OM)h(chip)g(capacity)f(which)h(are)g(po)n(wers)g
(of)g(tw)o(o\).)f(The)h(compressor)f(is)i(a)g(C)g(program)d(called)396
1517 y
SDict begin H.S end
 396 1517 a 396 1517 a
SDict begin 13 H.A end
 396 1517 a 396 1517 a
SDict begin [ /View [/XYZ H.V] /Dest (158) cvn H.B /DEST pdfmark end
 396
1517 a Fd(util/nrv2b.c)p Fh(.)h(This)h(is)h(run)f(on)f(the)i(host)f
(platform)e(when)i(b)n(uilding)f(images.)-2 1577 y
SDict begin H.S end
 -2
1577 a -2 1577 a
SDict begin 13 H.A end
 -2 1577 a -2 1577 a
SDict begin [ /View [/XYZ H.V] /Dest (159) cvn H.B /DEST pdfmark end
 -2 1577 a 396 1667
a Fh(Here)h(is)h(a)g(diagram)e(of)h(a)g(full)g(pre\002x)g(stack)g(for)g
(the)g(x86)f(architecture.)g(Other)h(architectures)e(will)j(not)f(ha)n
(v)o(e)g(the)g(real)396 1774 y(mode)f(to)i(protected)e(mode)g
(transition)g(and)h(will)h(ha)n(v)o(e)e(dif)n(ferent)g(runtime)g
(routines)g(and)h(decompressor:)-2 1875 y
SDict begin H.S end
 -2 1875 a -2
1875 a
SDict begin 11.7 H.A end
 -2 1875 a -2 1875 a
SDict begin [ /View [/XYZ H.V] /Dest (160) cvn H.B /DEST pdfmark end
 -2 1875 a 396 1955 a Fd
(+-----------------------+)396 2052 y(|)1031 b(|)396
2149 y(|)45 b(Payload)671 b(|)45 b(*.img)396 2246 y
(+-----------------------+)396 2343 y(|)1031 b(|)396
2440 y(|)45 b(Decompressor)446 b(|)45 b(unnrv2b.S)396
2537 y(+-----------------------+)396 2635 y(|)1031 b(|)396
2732 y(|)45 b(PM)f(runtime)g(routines)133 b(|)45 b(start32.S)396
2829 y(+-----------------------+)396 2926 y(|)1031 b(|)396
3023 y(|)45 b(RM)f(to)h(PM)f(transition)133 b(|)45 b(start16.S)396
3120 y(+-----------------------+)396 3217 y(|)1031 b(|)396
3314 y(|)45 b(Media)f(specific)f(loader)h(|)h(loader.S,)e(*prefix.S)396
3412 y(+-----------------------+)-2 3644 y
SDict begin H.S end
 -2 3644 a
-2 3644 a
SDict begin 13 H.A end
 -2 3644 a -2 3644 a
SDict begin [ /View [/XYZ H.V] /Dest (161) cvn H.B /DEST pdfmark end
 -2 3644 a 396 3972 a Fg(3.3.)35
b(Real)g(and)e(pr)n(otected)h(mode)2054 3972 y
SDict begin H.S end
 2054 3972
a 2054 3972 a
SDict begin 18.72 H.A end
 2054 3972 a 2054 3972 a
SDict begin [ /View [/XYZ H.V] /Dest (0.3.7.2) cvn H.B /DEST pdfmark
end
 2054 3972 a -2
4057 a
SDict begin H.S end
 -2 4057 a -2 4057 a
SDict begin 13 H.A end
 -2 4057 a -2 4057 a
SDict begin [ /View [/XYZ H.V] /Dest (163) cvn H.B /DEST pdfmark end
 -2 4057
a 396 4140 a Fh(One)20 b(of)g(the)g(complications)f(of)h(the)g(x86)f
(architecture)g(is)i(the)f(e)o(xistence)g(of)g(the)g(real)g(and)g
(protected)e(modes)i(of)396 4248 y(e)o(x)o(ecution.)e(T)-7
b(o)20 b(simplify)g(a)h(long)e(story)-5 b(,)19 b(if)i(we)f(w)o(ant)g
(to)h(e)o(x)o(ecute)e(32-bit)g(code)g(as)i(generated)e(by)g(the)i(C)g
(compiler)m(,)d(we)396 4356 y(need)i(to)g(be)g(in)h(protected)d(mode.)h
(Ho)n(we)n(v)o(er)g(the)h(processor)f(boots)h(up)f(in)i(real)f(mode,)f
(which)h(is)h(16-bit.)e(So)h(the)396 4464 y(loaders)g(must)g(e)o(x)o
(ecute)f(in)h(real)g(mode.)f(In)h(addition,)f(the)h(main)g(BIOS)h
(calls)g(the)f(e)o(xtension)f(BIOS)i(in)f(real)g(mode.)f(So)396
4572 y(at)i(least)g(the)f(prologue)e(of)i(the)g(main)g(code)f(must)i
(be)f(in)g(real)g(mode.)f(BIOS)i(calls)g(must)f(also)h(be)f(in)g(real)h
(mode.)e(In)396 4680 y(Etherboot)f(this)j(is)g(handled)e(by)h(a)g(pair)
g(of)g(functions)f(\(written)g(in)i(assembler)f(of)f(course\))h(called)
3272 4680 y
SDict begin H.S end
 3272 4680 a 3272 4680 a
SDict begin 13 H.A end
 3272 4680 a 3272
4680 a
SDict begin [ /View [/XYZ H.V] /Dest (164) cvn H.B /DEST pdfmark end
 3272 4680 a Fd(prot_to_real)396 4787 y Fh(and)537
4787 y
SDict begin H.S end
 537 4787 a 537 4787 a
SDict begin 13 H.A end
 537 4787 a 537 4787 a
SDict begin [ /View [/XYZ H.V] /Dest (165) cvn H.B /DEST pdfmark end
 537
4787 a Fd(real_to_prot)f Fh(that)h(do)g(the)g(switching.)f(The)h(C)h
(code)f(doesn')o(t)e(call)j(this)g(directly)-5 b(.)19
b(The)o(y)g(are)h(implicitly)396 4895 y(called)g(from)f(routines)h
(that)g(use)g(BIOS)h(services,)f(such)g(as)h(printing)e(characters)g
(to)h(the)g(screen)g(or)g(reading)396 5003 y(characters)g(from)f(the)h
(k)o(e)o(yboard.)d(In)j(Etherboot)e(5.2)i(and)f(abo)o(v)o(e,)g(the)h
(16-bit)f(code)h(is)h(e)o(x)o(ecuted)d(inside)i(special)396
5111 y(se)o(gments)g(of)g(memory)e(created)i(on)f(the)i(\003y)f(for)g
(running)e(real-mode)g(code)h(fragments,)g(as)i(opposed)d(to)j(pre)n
(vious)p Black 3840 5569 a Fe(6)p Black eop end
%%Page: 7 7
TeXDict begin 7 6 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black 0
TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.7) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
396 72 a Fh(v)o(ersions,)f(where)h(the)o(y)f(ran)h(inline)g(with)g(the)
h(32-bit)e(code.)g(This)h(allo)n(ws)h(the)f(32-bit)f(stack)h(to)h(be)f
(separate)g(from)f(the)396 180 y(16-bit)g(one.)-2 223
y
SDict begin H.S end
 -2 223 a -2 223 a
SDict begin 13 H.A end
 -2 223 a -2 223 a
SDict begin [ /View [/XYZ H.V] /Dest (166) cvn H.B /DEST pdfmark end
 -2 223 a 396 330
a Fh(The)g(\002le)671 330 y
SDict begin H.S end
 671 330 a 671 330 a
SDict begin 13 H.A end
 671 330
a 671 330 a
SDict begin [ /View [/XYZ H.V] /Dest (167) cvn H.B /DEST pdfmark end
 671 330 a Fd(first32)g Fh(establishes)h(a)g(32-bit)e(stack)
i(which)e(is)j(separate)e(from)f(the)i(16-bit)e(one)h(and)g(uses)g
(that)h(thereafter)-5 b(.)-2 472 y
SDict begin H.S end
 -2 472 a -2 472 a
SDict begin 13 H.A end

-2 472 a -2 472 a
SDict begin [ /View [/XYZ H.V] /Dest (168) cvn H.B /DEST pdfmark end
 -2 472 a 359 x Fi(4.)39 b(The)g(ar)m(c)o(hitecture)e
(of)i(Etherboot)2164 831 y
SDict begin H.S end
 2164 831 a 2164 831 a
SDict begin 22.464 H.A end
 2164
831 a 2164 831 a
SDict begin [ /View [/XYZ H.V] /Dest (0.4.1) cvn H.B /DEST pdfmark
end
 2164 831 a -2 905 a
SDict begin H.S end
 -2 905 a -2 905
a
SDict begin 13 H.A end
 -2 905 a -2 905 a
SDict begin [ /View [/XYZ H.V] /Dest (170) cvn H.B /DEST pdfmark end
 -2 905 a 396 1011 a Fh(Lea)n(ving)19
b(aside)i(the)f(peripheral)e(code)i(for)f(the)i(loaders,)e(the)h(rest)h
(of)f(Etherboot)e(can)i(be)g(di)n(vided)f(into)h(the)g(core,)f(the)396
1119 y(dri)n(v)o(ers)g(and)h(miscellaneous)f(\(catch-all)g(cate)o
(gory\).)-2 1220 y
SDict begin H.S end
 -2 1220 a -2 1220 a
SDict begin 11.7 H.A end
 -2 1220 a -2 1220
a
SDict begin [ /View [/XYZ H.V] /Dest (171) cvn H.B /DEST pdfmark end
 -2 1220 a 441 1299 a Fd(+------------------+------------------+)441
1396 y(|)90 b(Etherboot)43 b(core)89 b(|)134 b(Miscellaneous)88
b(|)441 1494 y(+------------------+------------------+)441
1591 y(|)493 b(Driver)44 b(support)537 b(|)441 1688 y
(+-------------------------------------+)441 1785 y(|)493
b(Hardware)44 b(drivers)447 b(|)441 1882 y
(+-------------------------------------+)441 1979 y(|)628
b(Hardware)671 b(|)441 2076 y(+-------------------------------------+)
396 2267 y Fh(These)20 b(parts)g(are)h(mapped)d(on)i(the)g(directory)f
(structure)g(in)h(the)2268 2267 y
SDict begin H.S end
 2268 2267 a 2268 2267
a
SDict begin 13 H.A end
 2268 2267 a 2268 2267 a
SDict begin [ /View [/XYZ H.V] /Dest (172) cvn H.B /DEST pdfmark end
 2268 2267 a Fd(src)h Fh(directory)d(as)j
(follo)n(ws:)3146 2267 y
SDict begin H.S end
 3146 2267 a 3146 2267 a
SDict begin 13 H.A end
 3146
2267 a 3146 2267 a
SDict begin [ /View [/XYZ H.V] /Dest (173) cvn H.B /DEST pdfmark end
 3146 2267 a -2 2368 a
SDict begin H.S end
 -2 2368 a -2
2368 a
SDict begin 13 H.A end
 -2 2368 a -2 2368 a
SDict begin [ /View [/XYZ H.V] /Dest (174) cvn H.B /DEST pdfmark end
 -2 2368 a Black 396 2624 a
Ff(\225)p Black 479 2624 a
SDict begin H.S end
 479 2624 a 479 2624 a
SDict begin 13 H.A end
 479
2624 a 479 2624 a
SDict begin [ /View [/XYZ H.V] /Dest (175) cvn H.B /DEST pdfmark end
 479 2624 a 479 2624 a
SDict begin H.S end
 479 2624 a 479
2624 a
SDict begin 13 H.A end
 479 2624 a 479 2624 a
SDict begin [ /View [/XYZ H.V] /Dest (176) cvn H.B /DEST pdfmark end
 479 2624 a Fd(arch)p Fh(:)f(Architecture)f
(speci\002c)i(\002les.)f(Each)g(architecture)f(has)h(an)g(o)n(wn)g
(subdirectory)-5 b(,)17 b(currently)i(we)h(ha)n(v)o(e)3648
2624 y
SDict begin H.S end
 3648 2624 a 3648 2624 a
SDict begin 13 H.A end
 3648 2624 a 3648 2624
a
SDict begin [ /View [/XYZ H.V] /Dest (177) cvn H.B /DEST pdfmark end
 3648 2624 a Fd(i386)479 2732 y Fh(and)620 2732 y
SDict begin H.S end
 620
2732 a 620 2732 a
SDict begin 13 H.A end
 620 2732 a 620 2732 a
SDict begin [ /View [/XYZ H.V] /Dest (178) cvn H.B /DEST pdfmark end
 620 2732 a Fd(ia64)p
Fh(.)-2 2734 y
SDict begin H.S end
 -2 2734 a -2 2734 a
SDict begin 13 H.A end
 -2 2734 a -2 2734
a
SDict begin [ /View [/XYZ H.V] /Dest (179) cvn H.B /DEST pdfmark end
 -2 2734 a Black 396 2882 a Ff(\225)p Black 479 2882
a
SDict begin H.S end
 479 2882 a 479 2882 a
SDict begin 13 H.A end
 479 2882 a 479 2882 a
SDict begin [ /View [/XYZ H.V] /Dest (180) cvn H.B /DEST pdfmark end
 479 2882
a 479 2882 a
SDict begin H.S end
 479 2882 a 479 2882 a
SDict begin 13 H.A end
 479 2882 a 479 2882
a
SDict begin [ /View [/XYZ H.V] /Dest (181) cvn H.B /DEST pdfmark end
 479 2882 a Fd(bin)p Fh(:)h(The)e(directory)g(where)h(all)g(binary)f
(\002les)i(are)f(b)n(uilt.)-2 2900 y
SDict begin H.S end
 -2 2900 a -2 2900
a
SDict begin 13 H.A end
 -2 2900 a -2 2900 a
SDict begin [ /View [/XYZ H.V] /Dest (182) cvn H.B /DEST pdfmark end
 -2 2900 a Black 396 3031 a Ff(\225)p
Black 479 3031 a
SDict begin H.S end
 479 3031 a 479 3031 a
SDict begin 13 H.A end
 479 3031 a 479
3031 a
SDict begin [ /View [/XYZ H.V] /Dest (183) cvn H.B /DEST pdfmark end
 479 3031 a 479 3031 a
SDict begin H.S end
 479 3031 a 479 3031 a
SDict begin 13 H.A end
 479
3031 a 479 3031 a
SDict begin [ /View [/XYZ H.V] /Dest (184) cvn H.B /DEST pdfmark end
 479 3031 a Fd(core)p Fh(:)g(Etherboot)f(core.)-2
3033 y
SDict begin H.S end
 -2 3033 a -2 3033 a
SDict begin 13 H.A end
 -2 3033 a -2 3033 a
SDict begin [ /View [/XYZ H.V] /Dest (185) cvn H.B /DEST pdfmark end
 -2 3033
a Black 396 3181 a Ff(\225)p Black 479 3181 a
SDict begin H.S end
 479 3181
a 479 3181 a
SDict begin 13 H.A end
 479 3181 a 479 3181 a
SDict begin [ /View [/XYZ H.V] /Dest (186) cvn H.B /DEST pdfmark end
 479 3181 a 479 3181
a
SDict begin H.S end
 479 3181 a 479 3181 a
SDict begin 13 H.A end
 479 3181 a 479 3181 a
SDict begin [ /View [/XYZ H.V] /Dest (187) cvn H.B /DEST pdfmark end
 479 3181
a Fd(drivers/disk)p Fh(:)g(Dri)n(v)o(ers)h(for)f(\003oppies)h(and)f
(hard)h(disks.)-2 3198 y
SDict begin H.S end
 -2 3198 a -2 3198 a
SDict begin 13 H.A end
 -2 3198
a -2 3198 a
SDict begin [ /View [/XYZ H.V] /Dest (188) cvn H.B /DEST pdfmark end
 -2 3198 a Black 396 3330 a Ff(\225)p Black
479 3330 a
SDict begin H.S end
 479 3330 a 479 3330 a
SDict begin 13 H.A end
 479 3330 a 479 3330
a
SDict begin [ /View [/XYZ H.V] /Dest (189) cvn H.B /DEST pdfmark end
 479 3330 a 479 3330 a
SDict begin H.S end
 479 3330 a 479 3330 a
SDict begin 13 H.A end
 479 3330
a 479 3330 a
SDict begin [ /View [/XYZ H.V] /Dest (190) cvn H.B /DEST pdfmark end
 479 3330 a Fd(drivers/net)p Fh(:)f(Dri)n(v)o(ers)h(for)f
(NICs.)-2 3336 y
SDict begin H.S end
 -2 3336 a -2 3336 a
SDict begin 13 H.A end
 -2 3336 a -2 3336
a
SDict begin [ /View [/XYZ H.V] /Dest (191) cvn H.B /DEST pdfmark end
 -2 3336 a Black 396 3479 a Ff(\225)p Black 479 3479
a
SDict begin H.S end
 479 3479 a 479 3479 a
SDict begin 13 H.A end
 479 3479 a 479 3479 a
SDict begin [ /View [/XYZ H.V] /Dest (192) cvn H.B /DEST pdfmark end
 479 3479
a 479 3479 a
SDict begin H.S end
 479 3479 a 479 3479 a
SDict begin 13 H.A end
 479 3479 a 479 3479
a
SDict begin [ /View [/XYZ H.V] /Dest (193) cvn H.B /DEST pdfmark end
 479 3479 a Fd(firmware)p Fh(:)h(BIOS-speci\002c)g(\002les.)-2
3497 y
SDict begin H.S end
 -2 3497 a -2 3497 a
SDict begin 13 H.A end
 -2 3497 a -2 3497 a
SDict begin [ /View [/XYZ H.V] /Dest (194) cvn H.B /DEST pdfmark end
 -2 3497
a Black 396 3629 a Ff(\225)p Black 479 3629 a
SDict begin H.S end
 479 3629
a 479 3629 a
SDict begin 13 H.A end
 479 3629 a 479 3629 a
SDict begin [ /View [/XYZ H.V] /Dest (195) cvn H.B /DEST pdfmark end
 479 3629 a 479 3629
a
SDict begin H.S end
 479 3629 a 479 3629 a
SDict begin 13 H.A end
 479 3629 a 479 3629 a
SDict begin [ /View [/XYZ H.V] /Dest (196) cvn H.B /DEST pdfmark end
 479 3629
a Fd(include)p Fh(:)g(Include)f(\002les.)-2 3631 y
SDict begin H.S end
 -2
3631 a -2 3631 a
SDict begin 13 H.A end
 -2 3631 a -2 3631 a
SDict begin [ /View [/XYZ H.V] /Dest (197) cvn H.B /DEST pdfmark end
 -2 3631 a Black
396 3778 a Ff(\225)p Black 479 3778 a
SDict begin H.S end
 479 3778 a 479
3778 a
SDict begin 13 H.A end
 479 3778 a 479 3778 a
SDict begin [ /View [/XYZ H.V] /Dest (198) cvn H.B /DEST pdfmark end
 479 3778 a 479 3778 a
SDict begin H.S end
 479
3778 a 479 3778 a
SDict begin 13 H.A end
 479 3778 a 479 3778 a
SDict begin [ /View [/XYZ H.V] /Dest (199) cvn H.B /DEST pdfmark end
 479 3778 a Fd(util)p
Fh(:)h(Utility)h(programs)d(that)j(are)f(needed)f(for)g(b)n(uilding,)g
(b)n(ut)h(not)g(included)f(in)h(the)g(resulting)f(roms.)396
3928 y(These)h(directories)f(are)i(duplicated)d(under)1685
3928 y
SDict begin H.S end
 1685 3928 a 1685 3928 a
SDict begin 13 H.A end
 1685 3928 a 1685 3928
a
SDict begin [ /View [/XYZ H.V] /Dest (200) cvn H.B /DEST pdfmark end
 1685 3928 a Fd(arch)i Fh(where)g(appropriate.)-2 3946
y
SDict begin H.S end
 -2 3946 a -2 3946 a
SDict begin 13 H.A end
 -2 3946 a -2 3946 a
SDict begin [ /View [/XYZ H.V] /Dest (201) cvn H.B /DEST pdfmark end
 -2 3946 a 396
4256 a Fg(4.1.)35 b(Etherboot)e(core)1479 4256 y
SDict begin H.S end
 1479
4256 a 1479 4256 a
SDict begin 18.72 H.A end
 1479 4256 a 1479 4256 a
SDict begin [ /View [/XYZ H.V] /Dest (0.4.8.2) cvn H.B /DEST pdfmark
end
 1479 4256
a -2 4317 a
SDict begin H.S end
 -2 4317 a -2 4317 a
SDict begin 13 H.A end
 -2 4317 a -2 4317 a
SDict begin [ /View [/XYZ H.V] /Dest (203) cvn H.B /DEST pdfmark end
 -2
4317 a 396 4424 a Fh(The)20 b(core)g(of)g(Etherboot)e(handles)h(the)h
(protocol)f(for)g(obtaining)g(a)h(netw)o(ork)f(identity)h(and)g(for)f
(loading)g(data)h(o)o(v)o(er)f(the)396 4531 y(netw)o(ork.)g(This)h
(comprises)g(the)g(\002les)1516 4531 y
SDict begin H.S end
 1516 4531 a 1516
4531 a
SDict begin 13 H.A end
 1516 4531 a 1516 4531 a
SDict begin [ /View [/XYZ H.V] /Dest (204) cvn H.B /DEST pdfmark end
 1516 4531 a Fd(main.c)g
Fh(\(main)f(program\))2350 4531 y
SDict begin H.S end
 2350 4531 a 2350 4531
a
SDict begin 13 H.A end
 2350 4531 a 2350 4531 a
SDict begin [ /View [/XYZ H.V] /Dest (205) cvn H.B /DEST pdfmark end
 2350 4531 a Fd(config.c)g Fh(\(probe)g
(routines\),)3304 4531 y
SDict begin H.S end
 3304 4531 a 3304 4531 a
SDict begin 13 H.A end
 3304
4531 a 3304 4531 a
SDict begin [ /View [/XYZ H.V] /Dest (206) cvn H.B /DEST pdfmark end
 3304 4531 a Fd(osloader.c)396 4639
y Fh(\(support)g(for)g(v)n(arious)g(load)h(image)g(formats\),)1785
4639 y
SDict begin H.S end
 1785 4639 a 1785 4639 a
SDict begin 13 H.A end
 1785 4639 a 1785 4639
a
SDict begin [ /View [/XYZ H.V] /Dest (207) cvn H.B /DEST pdfmark end
 1785 4639 a Fd(nfs.c,)43 b(proto*.c)20 b Fh(\(support)e(for)i(netw)o
(ork)f(I/O\))h(and)396 4747 y
SDict begin H.S end
 396 4747 a 396 4747 a
SDict begin 13 H.A end
 396
4747 a 396 4747 a
SDict begin [ /View [/XYZ H.V] /Dest (208) cvn H.B /DEST pdfmark end
 396 4747 a Fd(vsprintf.c)f Fh(\(printing)g
(routines\).)f(\(More)i(here.\))-2 4807 y
SDict begin H.S end
 -2 4807 a -2
4807 a
SDict begin 13 H.A end
 -2 4807 a -2 4807 a
SDict begin [ /View [/XYZ H.V] /Dest (209) cvn H.B /DEST pdfmark end
 -2 4807 a Black 3839 5569
a Fe(7)p Black eop end
%%Page: 8 8
TeXDict begin 8 7 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black 0
TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.8) cvn H.B /DEST pdfmark
end
 -2 -102 a Black -2 -201
a
SDict begin H.S end
 -2 -201 a -2 -201 a
SDict begin 13 H.A end
 -2 -201 a -2 -201 a
SDict begin [ /View [/XYZ H.V] /Dest (237) cvn H.B /DEST pdfmark end
 -2 -201 a 2875
-132 a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p
Black 396 77 a Fg(4.2.)35 b(Driver)n(s)1038 77 y
SDict begin H.S end
 1038
77 a 1038 77 a
SDict begin 18.72 H.A end
 1038 77 a 1038 77 a
SDict begin [ /View [/XYZ H.V] /Dest (0.4.9.2) cvn H.B /DEST pdfmark
end
 1038 77 a -2 138 a
SDict begin H.S end

-2 138 a -2 138 a
SDict begin 13 H.A end
 -2 138 a -2 138 a
SDict begin [ /View [/XYZ H.V] /Dest (211) cvn H.B /DEST pdfmark end
 -2 138 a 396 244
a Fh(Generally)19 b(each)h(\002le)h(represents)e(a)i(f)o(amily)f(of)g
(netw)o(ork)f(adapters.)g(F)o(or)h(e)o(xample)2831 244
y
SDict begin H.S end
 2831 244 a 2831 244 a
SDict begin 13 H.A end
 2831 244 a 2831 244 a
SDict begin [ /View [/XYZ H.V] /Dest (212) cvn H.B /DEST pdfmark end
 2831 244
a Fd(tulip.c)g Fh(handles)f(all)i(adapters)396 352 y(that)g(use)f(a)h
(T)l(ulip)f(compatible)e(netw)o(ork)h(controller)m(,)f(e)n(v)o(en)h(if)
i(the)o(y)e(are)h(from)g(dif)n(ferent)e(manuf)o(acturers.)3503
352 y
SDict begin H.S end
 3503 352 a 3503 352 a
SDict begin 13 H.A end
 3503 352 a 3503 352 a
SDict begin [ /View [/XYZ H.V] /Dest (213) cvn H.B /DEST pdfmark end
 3503
352 a Fd(3c90x.c)396 460 y Fh(handles)i(a)g(whole)g(f)o(amily)g(of)g
(related)f(adapters)h(from)f(3Com.)-2 520 y
SDict begin H.S end
 -2 520 a
-2 520 a
SDict begin 13 H.A end
 -2 520 a -2 520 a
SDict begin [ /View [/XYZ H.V] /Dest (214) cvn H.B /DEST pdfmark end
 -2 520 a 396 610 a Fh(The)h(interf)o(ace)f
(between)h(the)g(core)g(and)f(the)i(dri)n(v)o(ers)e(is)i
(well-de\002ned)d(and)i(e)o(xplained)e(in)p 0 TeXcolorgray
3031 610 a
SDict begin H.S end
 3031 610 a Fh(Section)i(7)3343 610 y
SDict begin 13 H.L end
 3343
610 a 3343 610 a
SDict begin [ /Subtype /Link /Dest (driver) cvn /H /I /Border [0 0
0] /Color [1 0 0] H.B /ANN pdfmark end
 3343 610 a Black -1 w Fh(.)-2 669 y
SDict begin H.S end

-2 669 a -2 669 a
SDict begin 13 H.A end
 -2 669 a -2 669 a
SDict begin [ /View [/XYZ H.V] /Dest (216) cvn H.B /DEST pdfmark end
 -2 669 a 396 759
a Fh(The)g(\002les)705 759 y
SDict begin H.S end
 705 759 a 705 759 a
SDict begin 13 H.A end
 705
759 a 705 759 a
SDict begin [ /View [/XYZ H.V] /Dest (217) cvn H.B /DEST pdfmark end
 705 759 a Fd(timer.h)g Fh(and)1180 759
y
SDict begin H.S end
 1180 759 a 1180 759 a
SDict begin 13 H.A end
 1180 759 a 1180 759 a
SDict begin [ /View [/XYZ H.V] /Dest (218) cvn H.B /DEST pdfmark end
 1180 759
a Fd(timer.c)g Fh(pro)o(vide)e(routines)h(for)h(access)h(to)f(the)g
(second)g(hardw)o(are)e(timer)i(of)g(the)h(PC.)396 867
y(This)g(is)g(used)f(for)f(implementing)f(microsecond)g(timeouts.)-2
927 y
SDict begin H.S end
 -2 927 a -2 927 a
SDict begin 13 H.A end
 -2 927 a -2 927 a
SDict begin [ /View [/XYZ H.V] /Dest (219) cvn H.B /DEST pdfmark end
 -2 927 a 396
1016 a Fh(The)i(\002les)705 1016 y
SDict begin H.S end
 705 1016 a 705 1016
a
SDict begin 13 H.A end
 705 1016 a 705 1016 a
SDict begin [ /View [/XYZ H.V] /Dest (220) cvn H.B /DEST pdfmark end
 705 1016 a Fd(pci.h)g Fh(and)1091
1016 y
SDict begin H.S end
 1091 1016 a 1091 1016 a
SDict begin 13 H.A end
 1091 1016 a 1091 1016
a
SDict begin [ /View [/XYZ H.V] /Dest (221) cvn H.B /DEST pdfmark end
 1091 1016 a Fd(pci.c)g Fh(pro)o(vide)e(a)i(PCI)h(initialisation)f
(subsystem)g(that)g(is)h(e)o(x)o(ecuted)e(for)g(PCI)i(adapters.)-2
1076 y
SDict begin H.S end
 -2 1076 a -2 1076 a
SDict begin 13 H.A end
 -2 1076 a -2 1076 a
SDict begin [ /View [/XYZ H.V] /Dest (222) cvn H.B /DEST pdfmark end
 -2 1076
a -2 1076 a
SDict begin H.S end
 -2 1076 a -2 1076 a
SDict begin 13 H.A end
 -2 1076 a -2 1076 a
SDict begin [ /View [/XYZ H.V] /Dest (223) cvn H.B /DEST pdfmark end
 -2
1076 a 396 1166 a Fd(skel.c)f Fh(is)h(a)g(sk)o(eleton)e(dri)n(v)o(er)g
(that)h(an)g(aspiring)g(dri)n(v)o(er)e(writer)i(can)g(use)h(as)g(a)f
(starting)g(point.)-2 1225 y
SDict begin H.S end
 -2 1225 a -2 1225 a
SDict begin 13 H.A end
 -2 1225
a -2 1225 a
SDict begin [ /View [/XYZ H.V] /Dest (224) cvn H.B /DEST pdfmark end
 -2 1225 a 396 1536 a Fg(4.3.)35 b(Miscellaneous)1443
1536 y
SDict begin H.S end
 1443 1536 a 1443 1536 a
SDict begin 18.72 H.A end
 1443 1536 a 1443 1536
a
SDict begin [ /View [/XYZ H.V] /Dest (0.4.10.2) cvn H.B /DEST pdfmark
end
 1443 1536 a -2 1597 a
SDict begin H.S end
 -2 1597 a -2 1597 a
SDict begin 13 H.A end
 -2 1597 a
-2 1597 a
SDict begin [ /View [/XYZ H.V] /Dest (226) cvn H.B /DEST pdfmark end
 -2 1597 a 396 1703 a Fh(In)20 b(this)h(cate)o(gory)d(are)i
(all)h(the)f(\002les)i(that)e(don')o(t)e(\002t)j(into)f(the)g(\002rst)h
(tw)o(o)g(cate)o(gories.)-2 1763 y
SDict begin H.S end
 -2 1763 a -2 1763
a
SDict begin 13 H.A end
 -2 1763 a -2 1763 a
SDict begin [ /View [/XYZ H.V] /Dest (227) cvn H.B /DEST pdfmark end
 -2 1763 a 396 2073 a Fg(4.4.)35
b(External)f(auxiliar)q(y)h(pr)n(ograms)2202 2073 y
SDict begin H.S end
 2202
2073 a 2202 2073 a
SDict begin 18.72 H.A end
 2202 2073 a 2202 2073 a
SDict begin [ /View [/XYZ H.V] /Dest (0.4.11.2) cvn H.B /DEST pdfmark
end
 2202 2073
a -2 2159 a
SDict begin H.S end
 -2 2159 a -2 2159 a
SDict begin 13 H.A end
 -2 2159 a -2 2159 a
SDict begin [ /View [/XYZ H.V] /Dest (229) cvn H.B /DEST pdfmark end
 -2
2159 a 396 2241 a Fh(In)20 b(Etherboot)e(5.0)i(and)g(later)g(there)g
(is)h(the)f(f)o(acility)g(to)g(load)g(and)g(run)f(e)o(xternal)g
(auxiliary)g(programs.)f(As)j(Etherboot)396 2348 y(runs)e(in)h(high)f
(memory)-5 b(.)17 b(All)j(the)f(memory)f(belo)n(w)h(that)g(and)g(abo)o
(v)o(e)f(0x10000)f(is)j(f)o(air)g(game)e(for)h(loading.)f(What)i(if)f
(we)396 2456 y(did)h(not)g(load)g(the)g(tar)o(get)f(operating)g(system)
h(b)n(ut)g(instead)g(loaded)f(an)h(e)o(xternal)f(program,)f(one)i(that)
g(returned)e(to)396 2564 y(Etherboot)g(after)i(doing)f(something.)g
(This)h(something)f(could)g(be)h(a)h(f)o(anc)o(y)e(menu)g(system.)h
(The)g(adv)n(antage)e(of)i(this)396 2672 y(approach)e(is)j(that)g(the)f
(menu)f(system)i(does)e(not)h(ha)n(v)o(e)g(to)g(be)g(compiled)f(into)h
(Etherboot,)e(which)i(means)g(it)g(can)g(be)396 2780
y(changed)f(without)g(changing)f(R)m(OMs,)j(and)e(can)h(be)h(much)e
(lar)o(ger)-5 b(.)-2 2840 y
SDict begin H.S end
 -2 2840 a -2 2840 a
SDict begin 13 H.A end
 -2 2840
a -2 2840 a
SDict begin [ /View [/XYZ H.V] /Dest (230) cvn H.B /DEST pdfmark end
 -2 2840 a 396 2930 a Fh(Ho)n(w)20 b(does)g(such)g(a)h(menu)
e(program)f(indicate)i(to)g(Etherboot)e(which)i(image)g(is)h(to)f(be)g
(loaded)f(ne)o(xt?)h(Se)n(v)o(eral)f(ne)n(w)396 3038
y(features)h(of)g(Etherboot)e(mak)o(e)i(this)g(possible.)g(Firstly)-5
b(,)20 b(a)h(bit)f(in)g(the)h(header)e(of)g(the)i(loaded)e(image)g(is)j
(used)e(to)396 3145 y(indicate)g(that)g(the)g(loaded)f(program)f
(intends)i(to)g(return)f(to)i(Etherboot,)d(as)j(opposed)d(to)i(ne)n(v)o
(er)f(returning,)f(in)i(the)h(case)396 3253 y(of)f(an)g(operating)f
(system.)h(Ne)o(xt,)f(the)i(e)o(xternal)e(program)f(is)j(passed)f(a)g
(pointer)f(to)i(the)f(BOO)m(TP/DHCP)h(structure)396 3361
y(obtained)e(by)h(Etherboot,)e(which)h(includes)h(the)g(\002lename)g
(\002eld.)g(Finally)-5 b(,)19 b(the)h(e)o(xternal)f(program)f(can)i
(return)f(one)396 3469 y(longw)o(ord)f(of)i(status)h(to)g(Etherboot)d
(to)i(indicate)g(v)n(arious)f(conditions.)-2 3529 y
SDict begin H.S end
 -2
3529 a -2 3529 a
SDict begin 13 H.A end
 -2 3529 a -2 3529 a
SDict begin [ /View [/XYZ H.V] /Dest (231) cvn H.B /DEST pdfmark end
 -2 3529 a 396 3619
a Fh(So)i(here')-5 b(s)20 b(ho)n(w)f(the)i(e)o(xternal)d(menu)i
(program)e(w)o(ould)h(w)o(ork.)h(Etherboot)e(is)j(told)f(to)g(load)g
(an)g(image)g(which)f(is)i(a)396 3727 y(menu)e(program.)f(The)i
(program)e(w)o(ould)i(present)f(the)h(user)g(with)h(a)f(list)i(of)e
(images)g(to)g(choose)f(from.)g(The)396 3835 y(presentation)g(can)h(be)
g(as)h(simple)f(as)h(a)g(numbered)c(menu)j(or)f(as)i(f)o(anc)o(y)e(as)i
(a)g(point)e(and)h(click)g(interf)o(ace)g(\(if)g(you)f(can)396
3943 y(arrange)g(to)h(interf)o(ace)g(to)g(the)g(pointer\).)f(When)h(a)g
(particular)f(image)h(has)g(been)g(chosen,)f(the)h(menu)f(program)f
(alters)396 4050 y(the)i(\002lename)g(\002eld)h(in)f(the)g(BOO)m
(TP/DHCP)h(structure)e(and)h(returns)f(a)i(longw)o(ord)d(of)i(status)h
(indicating)e(that)396 4158 y(Etherboot)f(should)i(retry)f(the)h
(loading.)f(Since)h(the)g(\002lename)g(has)g(been)g(altered,)f
(Etherboot)g(will)h(end)g(up)g(loading)396 4266 y(the)g(desired)g
(image)g(instead)g(of)g(the)g(menu)f(this)i(time)f(around.)e(Think)h
(of)h(it)h(as)g(a)g(program)d(chaining)g(f)o(acility)-5
b(.)-2 4409 y
SDict begin H.S end
 -2 4409 a -2 4409 a
SDict begin 13 H.A end
 -2 4409 a -2 4409 a
SDict begin [ /View [/XYZ H.V] /Dest (232) cvn H.B /DEST pdfmark end

-2 4409 a 359 x Fi(5.)39 b(The)g(de)n(velopment)e(en)-6
b(vir)m(onment)37 b(of)i(Etherboot)3122 4768 y
SDict begin H.S end
 3122 4768
a 3122 4768 a
SDict begin 22.464 H.A end
 3122 4768 a 3122 4768 a
SDict begin [ /View [/XYZ H.V] /Dest (0.5.1) cvn H.B /DEST pdfmark
end
 3122 4768 a -2
4869 a
SDict begin H.S end
 -2 4869 a -2 4869 a
SDict begin 13 H.A end
 -2 4869 a -2 4869 a
SDict begin [ /View [/XYZ H.V] /Dest (234) cvn H.B /DEST pdfmark end
 -2 4869
a 396 4948 a Fh(Etherboot)18 b(is)k(written)e(in)g(C,)h(with)f(certain)
g(routines)f(written)h(in)g(x86)g(assembler)f(for)h(access)h(to)f
(machine)f(resources)396 5056 y(or)h(to)h(do)e(things)h(not)g(possible)
g(in)g(C.)h(The)f(tools)g(used)g(are)g(the)g(GNU)h(C)g(compiler)e(and)h
(GNU)g(x86)f(assembler)-5 b(.)3698 5056 y
SDict begin H.S end
 3698 5056 a
3698 5056 a
SDict begin 13 H.A end
 3698 5056 a 3698 5056 a
SDict begin [ /View [/XYZ H.V] /Dest (235) cvn H.B /DEST pdfmark end
 3698 5056 a Fc(ld)21
b Fh(is)p Black 3842 5569 a Fe(8)p Black eop end
%%Page: 9 9
TeXDict begin 9 8 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black 0
TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.9) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
396 72 a Fh(used)g(to)h(link)e(the)i(object)e(\002les.)i(An)f
(auxiliary)f(program)f(called)2289 72 y
SDict begin H.S end
 2289 72 a 2289
72 a
SDict begin 13 H.A end
 2289 72 a 2289 72 a
SDict begin [ /View [/XYZ H.V] /Dest (236) cvn H.B /DEST pdfmark end
 2289 72 a Fc(mak)o(er)o(om.pl)i
Fh(con)m(v)o(erts)f(this)h(binary)f(into)h(a)h(form)396
180 y(suitable)f(for)g(writing)f(into)h(a)h(R)m(OM.)396
330 y(A)g(Mak)o(e\002le)f(coordinates)f(all)h(the)g(b)n(uilding)f
(procedures.)f(Ho)n(we)n(v)o(er)h(there)g(are)i(man)o(y)e(netw)o(ork)g
(adapters)g(that)h(dif)n(fer)396 438 y(only)g(in)g(the)g(PCI)h(v)o
(endor)d(and)i(de)n(vice)f(IDs.)i(This)f(information)e(must)i(be)g
(programmed)d(into)j(the)g(R)m(OM)h(header)396 546 y(using)f
Fc(mak)o(er)o(om)p Fh(.)f(An)i(auxiliary)d(script)j(called)1840
546 y
SDict begin H.S end
 1840 546 a 1840 546 a
SDict begin 13 H.A end
 1840 546 a 1840 546 a
SDict begin [ /View [/XYZ H.V] /Dest (239) cvn H.B /DEST pdfmark end
 1840
546 a Fc(genrules.pl)f Fh(scans)h(all)g(dri)n(v)o(er)d(source)i
(\002les)h(for)e(the)i(de)n(vice)e(names)396 654 y(and)h(IDs)h(and)e
(outputs)g(mak)o(e)h(rules)g(to)h(a)f(\002le)h(called)1954
654 y
SDict begin H.S end
 1954 654 a 1954 654 a
SDict begin 13 H.A end
 1954 654 a 1954 654 a
SDict begin [ /View [/XYZ H.V] /Dest (240) cvn H.B /DEST pdfmark end
 1954
654 a Fd(Roms)f Fh(that)h(is)g(included)d(by)i(the)g(main)g(Mak)o
(e\002le)g(to)h(generate)d(all)396 762 y(the)i(R)m(OM)h(images.)f
(Another)f(\002le)h(included)f(by)h(Mak)o(e\002le)g(is)2223
762 y
SDict begin H.S end
 2223 762 a 2223 762 a
SDict begin 13 H.A end
 2223 762 a 2223 762 a
SDict begin [ /View [/XYZ H.V] /Dest (241) cvn H.B /DEST pdfmark end
 2223
762 a Fd(Config)p Fh(,)g(which)f(contains)h(user)g(con\002gurable)e(b)n
(uild)396 869 y(parameters.)-2 929 y
SDict begin H.S end
 -2 929 a -2 929
a
SDict begin 13 H.A end
 -2 929 a -2 929 a
SDict begin [ /View [/XYZ H.V] /Dest (242) cvn H.B /DEST pdfmark end
 -2 929 a 396 1019 a Fh(Let)j(us)f(tak)o(e)g(an)h(e)
o(xample)d(of)i(a)h(R)m(OM)f(image)g(that)g(we)h(could)e(b)n(uild,)2437
1019 y
SDict begin H.S end
 2437 1019 a 2437 1019 a
SDict begin 13 H.A end
 2437 1019 a 2437 1019
a
SDict begin [ /View [/XYZ H.V] /Dest (243) cvn H.B /DEST pdfmark end
 2437 1019 a Fd(bin/mx98715.zrom)p Fh(.)f(According)g(to)i(this)396
1127 y(line)h(in)f(the)g(\002le)876 1127 y
SDict begin H.S end
 876 1127 a
876 1127 a
SDict begin 13 H.A end
 876 1127 a 876 1127 a
SDict begin [ /View [/XYZ H.V] /Dest (244) cvn H.B /DEST pdfmark end
 876 1127 a Fd(tulip.c)p
Fh(:)-2 1222 y
SDict begin H.S end
 -2 1222 a -2 1222 a
SDict begin 11.7 H.A end
 -2 1222 a -2 1222
a
SDict begin [ /View [/XYZ H.V] /Dest (245) cvn H.B /DEST pdfmark end
 -2 1222 a 396 1307 a Fd(PCI_ROM\(0x10d9,)43 b(0x0531,)g("mx98715",)g
("Macronix)h(MX987x5"\),)396 1498 y Fh(the)20 b(dri)n(v)o(er)f(code)h
(is)h(in)1073 1498 y
SDict begin H.S end
 1073 1498 a 1073 1498 a
SDict begin 13 H.A end
 1073 1498
a 1073 1498 a
SDict begin [ /View [/XYZ H.V] /Dest (246) cvn H.B /DEST pdfmark end
 1073 1498 a Fd(tulip.c)f Fh(and)f(the)i(v)o(endor)d(ID)i
(is)h(0x10d9)d(and)i(the)g(de)n(vice)f(ID)h(is)i(0x0531.)17
b(If)j(one)g(were)g(to)396 1606 y(say)528 1606 y
SDict begin H.S end
 528
1606 a 528 1606 a
SDict begin 13 H.A end
 528 1606 a 528 1606 a
SDict begin [ /View [/XYZ H.V] /Dest (247) cvn H.B /DEST pdfmark end
 528 1606 a Fc(mak)o(e)g
(bin/mx98715.zr)o(om)p Fh(,)d(the)j(follo)n(wing)f(actions)h(happen:)-2
1665 y
SDict begin H.S end
 -2 1665 a -2 1665 a
SDict begin 13 H.A end
 -2 1665 a -2 1665 a
SDict begin [ /View [/XYZ H.V] /Dest (248) cvn H.B /DEST pdfmark end
 -2 1665
a -2 1665 a
SDict begin H.S end
 -2 1665 a -2 1665 a
SDict begin 13 H.A end
 -2 1665 a -2 1665 a
SDict begin [ /View [/XYZ H.V] /Dest (249) cvn H.B /DEST pdfmark end
 -2
1665 a -2 1707 a
SDict begin H.S end
 -2 1707 a -2 1707 a
SDict begin 13 H.A end
 -2 1707 a -2 1707
a
SDict begin [ /View [/XYZ H.V] /Dest (250) cvn H.B /DEST pdfmark end
 -2 1707 a Black 396 1880 a Ff(\225)p Black 479 1880
a
SDict begin H.S end
 479 1880 a 479 1880 a
SDict begin 13 H.A end
 479 1880 a 479 1880 a
SDict begin [ /View [/XYZ H.V] /Dest (251) cvn H.B /DEST pdfmark end
 479 1880
a 21 w Fh(An)o(y)g(needed)e(utilities)j(such)f(as)1451
1880 y
SDict begin H.S end
 1451 1880 a 1451 1880 a
SDict begin 13 H.A end
 1451 1880 a 1451 1880
a
SDict begin [ /View [/XYZ H.V] /Dest (252) cvn H.B /DEST pdfmark end
 1451 1880 a Fd(bin/nrv2b)f Fh(are)h(b)n(uilt.)-2 1898
y
SDict begin H.S end
 -2 1898 a -2 1898 a
SDict begin 13 H.A end
 -2 1898 a -2 1898 a
SDict begin [ /View [/XYZ H.V] /Dest (253) cvn H.B /DEST pdfmark end
 -2 1898 a Black
396 2029 a Ff(\225)p Black 479 2029 a
SDict begin H.S end
 479 2029 a 479
2029 a
SDict begin 13 H.A end
 479 2029 a 479 2029 a
SDict begin [ /View [/XYZ H.V] /Dest (254) cvn H.B /DEST pdfmark end
 479 2029 a 500 2029 a
SDict begin H.S end
 500
2029 a 500 2029 a
SDict begin 13 H.A end
 500 2029 a 500 2029 a
SDict begin [ /View [/XYZ H.V] /Dest (255) cvn H.B /DEST pdfmark end
 500 2029 a Fd
(drivers/net/tulip.c)e Fh(is)j(compiled)d(to)1864 2029
y
SDict begin H.S end
 1864 2029 a 1864 2029 a
SDict begin 13 H.A end
 1864 2029 a 1864 2029 a
SDict begin [ /View [/XYZ H.V] /Dest (256) cvn H.B /DEST pdfmark end
 1864
2029 a Fd(bin/tulip.o)p Fh(.)-2 2047 y
SDict begin H.S end
 -2 2047 a -2 2047
a
SDict begin 13 H.A end
 -2 2047 a -2 2047 a
SDict begin [ /View [/XYZ H.V] /Dest (257) cvn H.B /DEST pdfmark end
 -2 2047 a Black 396 2179 a Ff(\225)p
Black 479 2179 a
SDict begin H.S end
 479 2179 a 479 2179 a
SDict begin 13 H.A end
 479 2179 a 479
2179 a
SDict begin [ /View [/XYZ H.V] /Dest (258) cvn H.B /DEST pdfmark end
 479 2179 a 21 w Fh(The)i(startup)g(routine,)1173
2179 y
SDict begin H.S end
 1173 2179 a 1173 2179 a
SDict begin 13 H.A end
 1173 2179 a 1173 2179
a
SDict begin [ /View [/XYZ H.V] /Dest (259) cvn H.B /DEST pdfmark end
 1173 2179 a Fd(arch/i386/core/start32.S)d Fh(is)k(assembled)f(to)2798
2179 y
SDict begin H.S end
 2798 2179 a 2798 2179 a
SDict begin 13 H.A end
 2798 2179 a 2798 2179
a
SDict begin [ /View [/XYZ H.V] /Dest (260) cvn H.B /DEST pdfmark end
 2798 2179 a Fd(bin/start32.o)p Fh(.)-2 2197 y
SDict begin H.S end
 -2 2197
a -2 2197 a
SDict begin 13 H.A end
 -2 2197 a -2 2197 a
SDict begin [ /View [/XYZ H.V] /Dest (261) cvn H.B /DEST pdfmark end
 -2 2197 a Black 396 2328
a Ff(\225)p Black 479 2328 a
SDict begin H.S end
 479 2328 a 479 2328 a
SDict begin 13 H.A end
 479
2328 a 479 2328 a
SDict begin [ /View [/XYZ H.V] /Dest (262) cvn H.B /DEST pdfmark end
 479 2328 a 21 w Fh(All)h(the)f(core)g(Etherboot)e
(\002les,)j(e.g.)1581 2328 y
SDict begin H.S end
 1581 2328 a 1581 2328 a
SDict begin 13 H.A end

1581 2328 a 1581 2328 a
SDict begin [ /View [/XYZ H.V] /Dest (263) cvn H.B /DEST pdfmark end
 1581 2328 a Fd(core/main.c)p
Fh(,)2116 2328 y
SDict begin H.S end
 2116 2328 a 2116 2328 a
SDict begin 13 H.A end
 2116 2328 a
2116 2328 a
SDict begin [ /View [/XYZ H.V] /Dest (264) cvn H.B /DEST pdfmark end
 2116 2328 a Fd(osloader.c)p Fh(,)e(etc,)h(are)g(compiled)f
(to)i(corresponding)479 2436 y(object)f(\002les)h(in)947
2436 y
SDict begin H.S end
 947 2436 a 947 2436 a
SDict begin 13 H.A end
 947 2436 a 947 2436 a
SDict begin [ /View [/XYZ H.V] /Dest (265) cvn H.B /DEST pdfmark end
 947
2436 a Fd(bin/*.o)f Fh(and)g(combined)e(into)i(an)g(ar)g(archi)n(v)o
(e,)2388 2436 y
SDict begin H.S end
 2388 2436 a 2388 2436 a
SDict begin 13 H.A end
 2388 2436 a 2388
2436 a
SDict begin [ /View [/XYZ H.V] /Dest (266) cvn H.B /DEST pdfmark end
 2388 2436 a Fd(bin/bootlib.a)p Fh(,)e(for)i(con)m(v)o(enience.)
-2 2454 y
SDict begin H.S end
 -2 2454 a -2 2454 a
SDict begin 13 H.A end
 -2 2454 a -2 2454 a
SDict begin [ /View [/XYZ H.V] /Dest (267) cvn H.B /DEST pdfmark end
 -2
2454 a Black 396 2586 a Ff(\225)p Black 479 2586 a
SDict begin H.S end
 479
2586 a 479 2586 a
SDict begin 13 H.A end
 479 2586 a 479 2586 a
SDict begin [ /View [/XYZ H.V] /Dest (268) cvn H.B /DEST pdfmark end
 479 2586 a 21
w Fh(The)g(startup)g(routine)f(\(which)g(must)h(be)g(\002rst)h(in)g
(the)f(list)h(of)f(objects\),)f(the)i(dri)n(v)o(er)d(object,)3142
2586 y
SDict begin H.S end
 3142 2586 a 3142 2586 a
SDict begin 13 H.A end
 3142 2586 a 3142 2586
a
SDict begin [ /View [/XYZ H.V] /Dest (269) cvn H.B /DEST pdfmark end
 3142 2586 a Fd(bootlib.a)p Fh(,)h(the)479 2693 y(platform)f
(speci\002c)i(objects)f(are)h(link)o(ed)f(to)g(produce)f(an)h(ELF)h
(binary)-5 b(,)18 b(link)o(ed)h(to)g(run)g(at)h(the)g(relocation)e
(address)h(of)479 2801 y(Etherboot,)f(currently)h(0x20000.)e(The)j(ELF)
g(binary)f(is)i(con)m(v)o(erted)d(to)i(an)g(Etherboot)e(binary)h(using)
h(GNU)479 2909 y(utilities.)h(This)f(binary)f(is)i(can)f(be)g(on)g
(non-x86)e(platforms)h(by)g(con)m(v)o(ersions.)f(\(T)-7
b(o)20 b(\002ll)h(in)f(later)-5 b(.\))20 b(F)o(or)g(the)h(x86)479
3017 y(platform,)e(we)h(need)g(to)g(prepend)e(loaders)i(for)f(the)i
(chosen)e(load)h(method.)-2 3035 y
SDict begin H.S end
 -2 3035 a -2 3035
a
SDict begin 13 H.A end
 -2 3035 a -2 3035 a
SDict begin [ /View [/XYZ H.V] /Dest (270) cvn H.B /DEST pdfmark end
 -2 3035 a Black 396 3167 a Ff(\225)p
Black 479 3167 a
SDict begin H.S end
 479 3167 a 479 3167 a
SDict begin 13 H.A end
 479 3167 a 479
3167 a
SDict begin [ /View [/XYZ H.V] /Dest (271) cvn H.B /DEST pdfmark end
 479 3167 a 21 w Fh(The)g(prepended)d(R)m(OM)k(loaders,)e
(rloader)m(,)g(and)g(prloader)m(,)f(are)i(produced)e(by)i(assembling)
479 3275 y
SDict begin H.S end
 479 3275 a 479 3275 a
SDict begin 13 H.A end
 479 3275 a 479 3275
a
SDict begin [ /View [/XYZ H.V] /Dest (272) cvn H.B /DEST pdfmark end
 479 3275 a Fd(arch/i386/prefix/loader.S)d Fh(with)j(dif)n(ferent)f
(de\002nes.)g(The)h(meaning)f(of)h(the)g(pre\002x)o(es)f(are:)i
(rloader)e(=)479 3383 y(basic)i(R)m(OM)f(loader)m(,)f(and)h(prloader)e
(=)i(PCI)h(header)e(basic)i(R)m(OM)f(loader)-5 b(.)20
b(The)g(loaders)f(contain)g(the)h(needed)479 3490 y(headers)g(for)f
(the)h(BIOS)h(to)g(recognise)d(the)j(code)e(as)i(an)f(e)o(xtension)f(R)
m(OM.)h(See)p 0 TeXcolorgray 2822 3490 a
SDict begin H.S end
 2822 3490 a
Fh(Section)g(3)3134 3490 y
SDict begin 13 H.L end
 3134 3490 a 3134 3490 a
SDict begin [ /Subtype /Link /Dest (extension) cvn /H /I /Border [0
0 0] /Color [1 0 0] H.B /ANN pdfmark end
 3134
3490 a Black 20 w Fh(on)g(the)g(e)o(xtension)479 3598
y(BIOS)h(mechanism.)-2 3599 y
SDict begin H.S end
 -2 3599 a -2 3599 a
SDict begin 13 H.A end
 -2
3599 a -2 3599 a
SDict begin [ /View [/XYZ H.V] /Dest (274) cvn H.B /DEST pdfmark end
 -2 3599 a Black 396 3748 a Ff(\225)p
Black 479 3748 a
SDict begin H.S end
 479 3748 a 479 3748 a
SDict begin 13 H.A end
 479 3748 a 479
3748 a
SDict begin [ /View [/XYZ H.V] /Dest (275) cvn H.B /DEST pdfmark end
 479 3748 a 21 w Fh(F)o(or)f(e)o(xample,)e(in)j(the)f(case)h(of)
1418 3748 y
SDict begin H.S end
 1418 3748 a 1418 3748 a
SDict begin 13 H.A end
 1418 3748 a 1418
3748 a
SDict begin [ /View [/XYZ H.V] /Dest (276) cvn H.B /DEST pdfmark end
 1418 3748 a Fd(bin/mx987x5.zrom)p Fh(,)c(this)k(is)g(for)f(a)g
(PCI)h(adaptor)e(and)h(we)g(w)o(ant)h(a)f(compressed)479
3856 y(R)m(OM,)h(so)f(the)g(loader)g(is)h(prloader)-5
b(.)18 b(This)j(is)g(prepended)c(to)k(the)f(Etherboot)e(image)i(to)g
(generate)f(a)i(R)m(OM)f(image.)-2 3874 y
SDict begin H.S end
 -2 3874 a -2
3874 a
SDict begin 13 H.A end
 -2 3874 a -2 3874 a
SDict begin [ /View [/XYZ H.V] /Dest (277) cvn H.B /DEST pdfmark end
 -2 3874 a Black 396 4005 a
Ff(\225)p Black 479 4005 a
SDict begin H.S end
 479 4005 a 479 4005 a
SDict begin 13 H.A end
 479
4005 a 479 4005 a
SDict begin [ /View [/XYZ H.V] /Dest (278) cvn H.B /DEST pdfmark end
 479 4005 a 500 4005 a
SDict begin H.S end
 500 4005 a 500
4005 a
SDict begin 13 H.A end
 500 4005 a 500 4005 a
SDict begin [ /View [/XYZ H.V] /Dest (279) cvn H.B /DEST pdfmark end
 500 4005 a Fc(mak)o(er)o(om.pl)g
Fh(is)h(run)e(o)o(v)o(er)g(this)i(R)m(OM)f(image)g(to)g(pad)g(it)h(to)f
(the)g(size)h(of)f(a)h(standard)e(EPR)m(OM.)h(\(8)g(kB,)g(16)g(kB,)h
(32)479 4113 y(kB,)g(etc.\))f(The)f(PCI)i(IDs)g(are)f(written)g(into)g
(the)g(image)g(into)g(the)g(PnP)h(structure)e(at)i(the)f(right)f
(spots.)i(A)f(string)479 4221 y(identifying)e(the)j(de)n(vice)e(and)h
(Etherboot)e(v)o(ersion)h(is)i(written)f(into)g(the)g(unprogrammed)c
(bytes)k(at)h(the)f(end)g(of)f(the)479 4329 y(R)m(OM)i(image,)e(if)i
(space)f(is)h(a)n(v)n(ailable,)e(and)h(a)h(pointer)e(to)h(that)g
(written)g(into)g(the)g(PnP)h(structure.)e(The)h(v)o(endor)479
4437 y(string)g(and)g(the)g(de)n(vice)f(string)h(are)g(normally)f
(printed)g(by)h(the)g(PCI)h(PnP)f(BIOS)h(at)g(boot)e(time.)h(Mak)o
(erom)f(also)479 4545 y(calculates)h(the)h(checksum)d(\(both)h(for)h
(the)g(PnP)h(structure,)e(if)h(present)g(and)f(for)h(the)g(whole)g
(image\))f(and)h(alters)479 4653 y(designated)f(spare)h(bytes)g(in)g
(the)h(image)e(so)i(that)f(the)g(checksums)f(come)h(out)g(right.)f(The)
h(image)g(is)h(then)f(ready)f(to)479 4761 y(be)h(written)g(into)g(an)g
(EPR)m(OM.)-2 4762 y
SDict begin H.S end
 -2 4762 a -2 4762 a
SDict begin 13 H.A end
 -2 4762 a -2
4762 a
SDict begin [ /View [/XYZ H.V] /Dest (280) cvn H.B /DEST pdfmark end
 -2 4762 a Black 396 4910 a Ff(\225)p Black 479
4910 a
SDict begin H.S end
 479 4910 a 479 4910 a
SDict begin 13 H.A end
 479 4910 a 479 4910 a
SDict begin [ /View [/XYZ H.V] /Dest (281) cvn H.B /DEST pdfmark end
 479
4910 a 21 w Fh(By)h(prepending)c(alternate)j(loaders)f(to)h(the)h
(Etherboot)d(image,)h(we)i(can)f(load)f(the)i(image)e(from)h(\003opp)o
(y)-5 b(,)479 5018 y(LILO/SYSLINUX,)19 b(PXE)i(or)f(DOS.)g(In)g(the)h
(case)f(of)g(\003opp)o(y)f(loading,)g(the)h(preloader)e(is)j(called)479
5126 y
SDict begin H.S end
 479 5126 a 479 5126 a
SDict begin 13 H.A end
 479 5126 a 479 5126 a
SDict begin [ /View [/XYZ H.V] /Dest (282) cvn H.B /DEST pdfmark end
 479
5126 a Fd(floppyload.bin)p Fh(.)d(It)j(is)g(one)f(sector)g(\(512)f
(bytes\))g(long)h(and)f(loaded)g(from)h(the)g(\003opp)o(y)-5
b(,)18 b(starting)i(at)h(the)p Black 3842 5569 a Fe(9)p
Black eop end
%%Page: 10 10
TeXDict begin 10 9 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.10) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
479 72 a Fh(be)o(ginning)e(of)i(the)g(\003opp)o(y)-5
b(.)18 b(It)j(then)f(loads)g(the)g(blocks)f(follo)n(wing)g(itself,)i
(which)e(it)i(assumes)g(to)f(be)g(an)g(Etherboot)479
180 y(image,)g(into)g(memory)-5 b(,)17 b(then)j(jumps)g(to)g(the)g
(start)h(of)f(it.)-2 240 y
SDict begin H.S end
 -2 240 a -2 240 a
SDict begin 13 H.A end
 -2 240 a
-2 240 a
SDict begin [ /View [/XYZ H.V] /Dest (283) cvn H.B /DEST pdfmark end
 -2 240 a 479 330 a Fh(In)g(the)g(case)h(of)f(LILO/SYSLINUX)f
(booting,)g(the)h(preloader)e(is)2416 330 y
SDict begin H.S end
 2416 330
a 2416 330 a
SDict begin 13 H.A end
 2416 330 a 2416 330 a
SDict begin [ /View [/XYZ H.V] /Dest (284) cvn H.B /DEST pdfmark end
 2416 330 a Fd(bin/liloprefix.bin)p
Fh(.)g(It)i(contains)g(what)479 438 y(looks)g(lik)o(e)g(a)h(\003opp)o
(y)e(sector)h(and)g(a)g(startup)g(se)o(gment)f(to)i(LILO/SYSLINUX)e
(and)h(mak)o(es)g(LILO/SYSLINUX)479 546 y("think")f(that)i(this)f(is)i
(a)e(Linux)f(k)o(ernel.)438 695 y
SDict begin H.S end
 438 695 a 438 695 a
SDict begin 13 H.A end

438 695 a 438 695 a
SDict begin [ /View [/XYZ H.V] /Dest (285) cvn H.B /DEST pdfmark end
 438 695 a Black 396 845 a Ff(\225)p
Black 479 845 a
SDict begin H.S end
 479 845 a 479 845 a
SDict begin 13 H.A end
 479 845 a 479 845
a
SDict begin [ /View [/XYZ H.V] /Dest (286) cvn H.B /DEST pdfmark end
 479 845 a 21 w Fh(The)h(loader)f(for)h(chaining)e(from)i(PXE)g(is)h
(in)1824 845 y
SDict begin H.S end
 1824 845 a 1824 845 a
SDict begin 13 H.A end
 1824 845 a 1824
845 a
SDict begin [ /View [/XYZ H.V] /Dest (287) cvn H.B /DEST pdfmark end
 1824 845 a Fd(bin/pxeprefix.bin)p Fh(,)c(and)j(when)f(prepended)f
(to)i(an)g(image,)479 953 y(produces)f(a)h(\002le)h(that)g(can)e(be)i
(do)n(wnloaded)c(and)j(e)o(x)o(ecuted)e(by)i(a)g(PXE)h(conforming)c
(boot)j(rom)f(as)i(a)g(\002rst)g(stage)479 1060 y(loader)-5
b(.)20 b(Etherboot)e(then)i(tak)o(es)g(o)o(v)o(er)f(the)h(remainder)e
(of)i(the)h(load)e(process.)-2 1078 y
SDict begin H.S end
 -2 1078 a -2 1078
a
SDict begin 13 H.A end
 -2 1078 a -2 1078 a
SDict begin [ /View [/XYZ H.V] /Dest (288) cvn H.B /DEST pdfmark end
 -2 1078 a Black 396 1210 a Ff(\225)p
Black 479 1210 a
SDict begin H.S end
 479 1210 a 479 1210 a
SDict begin 13 H.A end
 479 1210 a 479
1210 a
SDict begin [ /View [/XYZ H.V] /Dest (289) cvn H.B /DEST pdfmark end
 479 1210 a 21 w Fh(Y)-8 b(et)20 b(another)f(preloader)f(is)j
(not)f(for)g(a)h(de)n(vice)e(b)n(ut)h(for)g(an)g(OS)h(en)m(vironment.)
16 b(This)21 b(is)3021 1210 y
SDict begin H.S end
 3021 1210 a 3021 1210 a
SDict begin 13 H.A end

3021 1210 a 3021 1210 a
SDict begin [ /View [/XYZ H.V] /Dest (290) cvn H.B /DEST pdfmark end
 3021 1210 a Fd(bin/comprefix.bin)p
Fh(,)479 1318 y(and)f(when)g(prepended)d(to)j(an)h(image,)e(mak)o(es)h
(it)h(look)e(lik)o(e)i(a)f(DOS)h(.com)f(e)o(x)o(ecutable,)e(including)g
(the)i(peculiarity)479 1426 y(of)g(starting)g(at)h(COM_SEGMENT)l
(:0x100.)16 b(All)21 b(it)g(does)f(ho)n(we)n(v)o(er)e(is)j(jump)f(to)g
(the)g(Etherboot)f(image.)-2 1444 y
SDict begin H.S end
 -2 1444 a -2 1444
a
SDict begin 13 H.A end
 -2 1444 a -2 1444 a
SDict begin [ /View [/XYZ H.V] /Dest (291) cvn H.B /DEST pdfmark end
 -2 1444 a Black 396 1575 a Ff(\225)p
Black 479 1575 a
SDict begin H.S end
 479 1575 a 479 1575 a
SDict begin 13 H.A end
 479 1575 a 479
1575 a
SDict begin [ /View [/XYZ H.V] /Dest (292) cvn H.B /DEST pdfmark end
 479 1575 a 21 w Fh(All)i(the)f(preceeding)e(special)i
(preloaders)f(ha)n(v)o(e)h(associated)f(Mak)o(e\002le)i(rules)f(and)f
(are)h(created)g(by)g(asking)f(for)479 1683 y(images)h(with)h(the)f
(appropriate)e(suf)n(\002x.)h(F)o(or)h(e)o(xample,)f(if)h(one)g(w)o
(anted)f(an)i(image)e(for)h(writing)f(onto)h(a)g(\003opp)o(y)f(one)479
1791 y(w)o(ould)h(say:)-2 1851 y
SDict begin H.S end
 -2 1851 a -2 1851 a
SDict begin 11.7 H.A end

-2 1851 a -2 1851 a
SDict begin [ /View [/XYZ H.V] /Dest (293) cvn H.B /DEST pdfmark end
 -2 1851 a 479 1930 a Fd(make)44 b(bin/mx98715.zdsk)
-2 2162 y
SDict begin H.S end
 -2 2162 a -2 2162 a
SDict begin 13 H.A end
 -2 2162 a -2 2162 a
SDict begin [ /View [/XYZ H.V] /Dest (294) cvn H.B /DEST pdfmark end
 -2
2162 a 377 x Fi(6.)39 b(Frequentl)n(y)e(asked)i(questions)2055
2539 y
SDict begin H.S end
 2055 2539 a 2055 2539 a
SDict begin 22.464 H.A end
 2055 2539 a 2055 2539
a
SDict begin [ /View [/XYZ H.V] /Dest (0.6.1) cvn H.B /DEST pdfmark
end
 2055 2539 a -2 2569 a
SDict begin H.S end
 -2 2569 a -2 2569 a
SDict begin 13 H.A end
 -2 2569 a
-2 2569 a
SDict begin [ /View [/XYZ H.V] /Dest (296) cvn H.B /DEST pdfmark end
 -2 2569 a 396 2867 a Fg(6.1.)c(Ho)n(w)f(por)r(tab)o(le)g(is)g
(Etherboot?)2190 2867 y
SDict begin H.S end
 2190 2867 a 2190 2867 a
SDict begin 18.72 H.A end
 2190
2867 a 2190 2867 a
SDict begin [ /View [/XYZ H.V] /Dest (0.6.12.2) cvn H.B /DEST pdfmark
end
 2190 2867 a -2 2952 a
SDict begin H.S end
 -2 2952 a -2
2952 a
SDict begin 13 H.A end
 -2 2952 a -2 2952 a
SDict begin [ /View [/XYZ H.V] /Dest (298) cvn H.B /DEST pdfmark end
 -2 2952 a 396 3035 a Fh(W)-7
b(ork)20 b(leading)g(up)f(to)i(5.2)e(made)h(Etherboot)e(much)h(more)h
(portable.)e(The)i(platforms)f(on)h(which)f(Etherboot)g(runs,)396
3143 y(other)h(than)f(the)i(x86,)e(are)h(the)g(Itanium)f(and)h(the)g
(Hammer)-5 b(.)19 b(The)h(portability)f(issues)i(can)f(be)g(look)o(ed)f
(at)i(in)f(tw)o(o)396 3251 y(cate)o(gories:)-2 3310 y
SDict begin H.S end

-2 3310 a -2 3310 a
SDict begin 13 H.A end
 -2 3310 a -2 3310 a
SDict begin [ /View [/XYZ H.V] /Dest (299) cvn H.B /DEST pdfmark end
 -2 3310 a 396
3400 a Fh(Support)e(routines)h(needed)f(for)h(platforms)g(need)g(to)g
(be)h(written.)f(Platform)g(independent)e(and)i(dependent)e(code)i(ha)n
(v)o(e)396 3508 y(been)h(separated)f(and)h(it)h(should)e(be)h
(straightforw)o(ard)e(to)i(identify)f(the)h(support)f(that)h(is)h
(needed)e(for)h(running)396 3616 y(Etherboot)e(on)i(a)h(ne)n(w)f
(platform.)-2 3676 y
SDict begin H.S end
 -2 3676 a -2 3676 a
SDict begin 13 H.A end
 -2 3676 a -2
3676 a
SDict begin [ /View [/XYZ H.V] /Dest (300) cvn H.B /DEST pdfmark end
 -2 3676 a 396 3766 a Fh(Byte)g(order)m(,)e(operand)f(size)j(and)
f(alignment)f(issues)i(in)g(the)g(core)e(routines)h(and)g(PCI)h(dri)n
(v)o(ers)e(ha)n(v)o(e)h(been)g(mostly)g(dealt)396 3874
y(with,)h(although)f(there)g(are)i(some)f(kno)n(wn)e(places)i(where)g
(the)g(code)g(has)g(not)g(been)g(made)f(portable,)g(e.g.)g(longw)o(ord)
396 3982 y(access)i(of)f(re)o(gisters)g(in)g(the)g(eepro100)e(dri)n(v)o
(er)-5 b(.)19 b(W)-7 b(e)21 b(hope)e(to)i(\002nd)f(these)g(b)n(ugs)g
(as)h(time)f(goes)g(by)-5 b(.)19 b(In)h(some)g(cases,)h(e.g.)396
4089 y(ISA)g(b)n(us)f(NICs,)h(there)f(is)h(no)f(need)f(to)h(\002x)h
(the)f(problem)f(as)h(the)h(ISA)f(b)n(us)h(only)e(e)o(xists)i(on)e(the)
i(PC)g(platform)d(\(unless)396 4197 y(somebody)g(attaches)i(a)h(NE2000)
e(to)h(a)h(big-endian)c(microcontroller)h(and)h(plans)h(to)h(run)e
(Etherboot)f(on)i(it\).)-2 4257 y
SDict begin H.S end
 -2 4257 a -2 4257 a
SDict begin 13 H.A end

-2 4257 a -2 4257 a
SDict begin [ /View [/XYZ H.V] /Dest (301) cvn H.B /DEST pdfmark end
 -2 4257 a 396 4347 a Fh(Here)g(are)g(the)h(lo)n
(w-le)n(v)o(el)e(services)h(that)g(need)g(to)g(pro)o(vided:)e(writing)h
(and)h(reading)f(from)g(the)h(console,)f(determining)396
4455 y(the)h(size)g(of)f(memory)-5 b(,)17 b(obtaining)h(the)h(an)h
(elapsed)f(time,)g(inserting)f(a)i(boot)f(v)o(ector)f(to)i(be)f
(called,)g(and)g(a)h(microsecond)396 4563 y(timer)g(for)g(short)g
(delays.)f(Depending)f(on)i(the)g(tar)o(get)g(en)m(vironment,)c(these)
21 b(services)f(may)g(be)g(pro)o(vided)d(in)k(dif)n(ferent)396
4671 y(w)o(ays.)-2 4730 y
SDict begin H.S end
 -2 4730 a -2 4730 a
SDict begin 13 H.A end
 -2 4730
a -2 4730 a
SDict begin [ /View [/XYZ H.V] /Dest (302) cvn H.B /DEST pdfmark end
 -2 4730 a Black 3800 5569 a Fe(10)p Black
eop end
%%Page: 11 11
TeXDict begin 11 10 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.11) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
396 77 a Fg(6.2.)35 b(Ho)n(w)e(can)i(I)e(g)q(et)g(Etherboot)g(to)g
(boot)g(a)h(Car)n(db)n(us)f(\(PCMCIA\))g(or)g(a)396 232
y(USB)h(NIC?)960 232 y
SDict begin H.S end
 960 232 a 960 232 a
SDict begin 18.72 H.A end
 960 232 a
960 232 a
SDict begin [ /View [/XYZ H.V] /Dest (0.6.13.2) cvn H.B /DEST pdfmark
end
 960 232 a -2 293 a
SDict begin H.S end
 -2 293 a -2 293 a
SDict begin 13 H.A end
 -2 293
a -2 293 a
SDict begin [ /View [/XYZ H.V] /Dest (304) cvn H.B /DEST pdfmark end
 -2 293 a 396 400 a Fh(Cardb)n(us)20 b(\(PCMCIA\))g(and)g
(USB)h(NICs)g(are)f(interf)o(aced)f(to)i(the)f(CPU)h(through)d(their)i
(respecti)n(v)o(e)f(b)n(us)h(controllers.)396 508 y(Before)g(Etherboot)
e(can)i(address)g(the)g(re)o(gisters)g(and)f(memory)g(on)h(these)g
(NICs,)h(it)g(must)f(initialise)h(the)f(b)n(us)396 616
y(controller)f(appropriately)-5 b(.)17 b(In)j(Linux)f(this)h(is)h(done)
f(by)f(the)i(PCMCIA)g(and)e(USB)j(subsystems.)d(In)h(Etherboot,)e(all)
396 724 y(this)j(must)f(be)g(done)f(by)h(the)g(code)g(in)g(the)h(R)m
(OM.)f(What)g(needs)g(to)h(be)f(written)g(is)h(a)f(subsystem)g(lik)o(e)
h(the)f(PCI)396 832 y(subsystem)g(in)g(Etherboot.)e(V)-11
b(olunteers)20 b(are)g(most)g(welcome.)-2 974 y
SDict begin H.S end
 -2 974
a -2 974 a
SDict begin 13 H.A end
 -2 974 a -2 974 a
SDict begin [ /View [/XYZ H.V] /Dest (driver) cvn H.B /DEST pdfmark
end
 -2 974 a 359 x Fi(7.)39
b(Writing)g(an)h(Etherboot)d(Driver)2032 1333 y
SDict begin H.S end
 2032
1333 a 2032 1333 a
SDict begin 22.464 H.A end
 2032 1333 a 2032 1333 a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.1) cvn H.B /DEST pdfmark
end
 2032 1333
a -2 1365 a
SDict begin H.S end
 -2 1365 a -2 1365 a
SDict begin 13 H.A end
 -2 1365 a -2 1365 a
SDict begin [ /View [/XYZ H.V] /Dest (307) cvn H.B /DEST pdfmark end
 -2
1365 a 396 1661 a Fg(7.1.)e(Preliminaries)1378 1661 y
SDict begin H.S end

1378 1661 a 1378 1661 a
SDict begin 18.72 H.A end
 1378 1661 a 1378 1661 a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.14.2) cvn H.B /DEST pdfmark
end
 1378
1661 a -2 1723 a
SDict begin H.S end
 -2 1723 a -2 1723 a
SDict begin 13 H.A end
 -2 1723 a -2 1723
a
SDict begin [ /View [/XYZ H.V] /Dest (309) cvn H.B /DEST pdfmark end
 -2 1723 a 396 1829 a Fh(So)21 b(Etherboot)d(does)i(not)g(ha)n(v)o(e)f
(a)i(dri)n(v)o(er)e(for)g(your)g(netw)o(ork)g(adapter)g(and)h(you)f(w)o
(ant)h(to)h(write)f(one.)f(Y)-9 b(ou)20 b(should)396
1937 y(ha)n(v)o(e)g(a)g(good)f(grasp)h(of)g(C,)h(especially)e(with)i
(respect)f(to)g(bit)g(operations.)f(Y)-9 b(ou)19 b(should)h(also)g
(understand)e(hardw)o(are)396 2045 y(interf)o(acing)h(concepts,)g(such)
h(as)h(the)f(f)o(act)g(that)h(the)f(x86)f(architecture)g(has)h(a)h
(separate)e(I/O)i(space)f(and)g(that)396 2153 y(peripherals)f(are)h
(commanded)e(with)i(`out')f(instructions)g(and)h(their)g(status)h(read)
e(with)i(`in')e(instructions.)g(A)396 2261 y(microprocessor)f(course)h
(such)h(as)h(those)f(taught)f(in)i(engineering)c(or)j(computer)f
(science)h(curricula)f(w)o(ould)g(ha)n(v)o(e)396 2369
y(gi)n(v)o(en)g(you)g(the)i(fundamentals.)c(\(Note)j(to)h(educators)e
(and)g(students)h(in)g(computer)f(engineering:)f(An)i(Etherboot)396
2477 y(dri)n(v)o(er)f(should)g(be)h(feasible)g(as)h(a)g(term)f(project)
f(for)h(a)g(\002nal)h(year)e(under)o(graduate)d(student.)k(I)g
(estimate)h(about)e(40)396 2584 y(hours)g(of)h(w)o(ork)g(is)h
(required.)d(I)j(am)f(willing)g(to)g(be)g(a)h(source)e(of)h(technical)g
(advice.\))-2 2644 y
SDict begin H.S end
 -2 2644 a -2 2644 a
SDict begin 13 H.A end
 -2 2644 a -2
2644 a
SDict begin [ /View [/XYZ H.V] /Dest (310) cvn H.B /DEST pdfmark end
 -2 2644 a 396 2734 a Fh(Ne)o(xt)g(you)f(need)h(a)h(de)n(v)o
(elopment)c(machine.)i(This)h(can)g(be)g(your)f(normal)g(Linux)g
(machine.)g(Y)-9 b(ou)20 b(need)f(another)g(test)396
2842 y(machine,)g(netw)o(ork)o(ed)g(to)h(the)g(de)n(v)o(elopment)d
(machine.)i(This)i(should)e(be)h(a)h(machine)e(you)g(will)i(not)f(feel)
g(upset)396 2950 y(rebooting)e(v)o(ery)h(often.)g(So)i(the)f(reset)h(b)
n(utton)e(should)g(be)h(in)g(w)o(orking)f(condition.)f(:-\))i(It)h
(should)e(ha)n(v)o(e)h(a)g(\003opp)o(y)f(dri)n(v)o(e)396
3058 y(on)h(it)h(b)n(ut)f(does)g(not)g(need)f(a)i(hard)e(disk,)h(and)g
(in)g(f)o(act)h(a)f(hard)g(disk)g(will)h(slo)n(w)f(do)n(wn)f
(rebooting.)f(Alternati)n(v)o(ely)-5 b(,)18 b(it)396
3166 y(should)h(ha)n(v)o(e)h(another)f(netw)o(ork)g(adapter)g(which)h
(can)f(netboot;)g(see)i(discussion)f(further)f(do)n(wn.)f(Needless)j
(to)f(say)-5 b(,)396 3274 y(you)20 b(need)f(a)i(unit)f(of)g(the)g
(adapter)f(you)g(are)h(trying)f(to)i(write)f(a)h(dri)n(v)o(er)d(for)-5
b(.)20 b(Y)-9 b(ou)20 b(should)f(gather)g(all)h(the)396
3381 y(documentation)d(you)j(can)g(\002nd)g(for)f(the)h(hardw)o(are,)f
(from)g(the)h(manuf)o(acturer)e(and)i(other)f(sources.)-2
3441 y
SDict begin H.S end
 -2 3441 a -2 3441 a
SDict begin 13 H.A end
 -2 3441 a -2 3441 a
SDict begin [ /View [/XYZ H.V] /Dest (311) cvn H.B /DEST pdfmark end
 -2 3441
a 396 3751 a Fg(7.2.)35 b(Bac)n(kgr)n(ound)f(inf)n(ormation)2010
3751 y
SDict begin H.S end
 2010 3751 a 2010 3751 a
SDict begin 18.72 H.A end
 2010 3751 a 2010 3751
a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.15.2) cvn H.B /DEST pdfmark
end
 2010 3751 a -2 3837 a
SDict begin H.S end
 -2 3837 a -2 3837 a
SDict begin 13 H.A end
 -2 3837 a
-2 3837 a
SDict begin [ /View [/XYZ H.V] /Dest (313) cvn H.B /DEST pdfmark end
 -2 3837 a 396 3919 a Fh(There)20 b(are)g(se)n(v)o(eral)f
(types)h(of)g(netw)o(ork)f(adapter)g(architecture.)g(The)h(simplest)g
(to)g(understand)e(is)k(probably)396 4027 y(programmed)17
b(I/O.)j(This)h(where)e(the)i(controller)d(reads)i(incoming)e(pack)o
(ets)i(into)g(memory)f(that)h(resides)g(on)g(the)396
4135 y(adapter)f(and)h(the)g(dri)n(v)o(er)f(uses)i(`in')e(instructions)
g(to)i(e)o(xtract)e(the)h(pack)o(et)g(data,)g(w)o(ord)f(by)h(w)o(ord,)f
(or)h(sometimes)g(byte)396 4243 y(by)g(byte.)g(Similarly)-5
b(,)19 b(pack)o(ets)h(are)g(readied)f(for)g(transmission)h(by)g
(writing)f(the)h(data)h(into)e(the)i(adapter')-5 b(s)19
b(memory)396 4351 y(using)h(`out')f(instructions.)g(This)h
(architecture)f(is)i(used)f(on)g(the)g(NE2000)f(and)g(3C509.)g(The)h
(disadv)n(antage)e(of)i(this)396 4458 y(architecture)f(is)i(the)f(load)
g(on)g(the)g(CPU)h(imposed)e(by)h(the)g(I/O.)g(Ho)n(we)n(v)o(er)f(this)
i(is)g(of)f(no)g(import)f(to)h(Etherboot)e(\(who)396
4566 y(cares)j(ho)n(w)e(loaded)g(the)h(CPU)i(is)f(during)d(booting\),)g
(b)n(ut)i(will)h(be)g(to)f(Linux.)f(Ne)o(xt)h(in)g(the)g
(sophistication)f(scale)i(are)396 4674 y(shared)f(memory)e(adapters)i
(such)f(as)i(the)g(W)-7 b(estern)20 b(Digital)h(or)f(SMC)h(series,)f
(of)g(which)g(the)g(WD8013)f(is)i(a)g(good)396 4782 y(e)o(xample.)e
(Here)h(the)g(adapter')-5 b(s)20 b(memory)e(is)j(also)g(accessible)f
(in)g(the)h(memory)d(space)i(of)g(the)g(main)g(CPU.)396
4890 y(T)m(ransferring)e(data)i(between)g(the)g(dri)n(v)o(er)e(and)i
(the)g(adapter)f(is)i(done)f(with)g(memory)e(cop)o(y)i(instructions.)f
(Load)g(on)h(the)396 4998 y(CPU)h(is)h(light.)d(Adapters)h(in)g(this)h
(cate)o(gory)d(are)i(some)g(of)g(the)h(best)f(performers)e(for)i(the)g
(ISA)g(b)n(us.)g(Finally)g(there)g(are)396 5106 y(b)n(us)h(mastering)e
(cards)h(such)g(as)h(the)f(Lance)f(series)i(for)f(the)g(ISA)g(b)n(us)h
(and)f(practically)f(all)h(good)f(PCI)i(adapters)f(\(b)n(ut)p
Black 3800 5569 a Fe(11)p Black eop end
%%Page: 12 12
TeXDict begin 12 11 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.12) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
396 72 a Fh(not)g(the)g(NE2000)f(PCI\).)h(Here)g(the)g(data)g(is)i
(transferred)c(between)h(the)i(main)e(memory)g(and)g(the)i(adapter)e
(controller)396 180 y(using)h(Direct)g(Memory)f(Access.)h(Setting)g(up)
g(the)g(transfers)g(usually)g(in)m(v)n(olv)o(es)f(a)h(sequence)f(of)h
(operations)f(with)h(the)396 288 y(re)o(gisters)g(of)g(the)g
(controller)-5 b(.)-2 348 y
SDict begin H.S end
 -2 348 a -2 348 a
SDict begin 13 H.A end
 -2 348
a -2 348 a
SDict begin [ /View [/XYZ H.V] /Dest (314) cvn H.B /DEST pdfmark end
 -2 348 a 396 658 a Fg(7.3.)35 b(Structure)e(of)g(the)g(code)
1830 658 y
SDict begin H.S end
 1830 658 a 1830 658 a
SDict begin 18.72 H.A end
 1830 658 a 1830 658
a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.16.2) cvn H.B /DEST pdfmark
end
 1830 658 a -2 719 a
SDict begin H.S end
 -2 719 a -2 719 a
SDict begin 13 H.A end
 -2 719 a -2 719
a
SDict begin [ /View [/XYZ H.V] /Dest (316) cvn H.B /DEST pdfmark end
 -2 719 a 396 826 a Fh(Examine)19 b(the)h(\002le)961
826 y
SDict begin H.S end
 961 826 a 961 826 a
SDict begin 13 H.A end
 961 826 a 961 826 a
SDict begin [ /View [/XYZ H.V] /Dest (317) cvn H.B /DEST pdfmark end
 961 826
a Fd(skel.c)p Fh(,)g(in)g(the)g(src)h(directory)-5 b(,)18
b(which)h(is)i(a)g(template)f(for)f(a)i(dri)n(v)o(er)-5
b(.)19 b(Y)-9 b(ou)19 b(may)h(also)h(w)o(ant)f(to)396
934 y(e)o(xamine)f(a)i(w)o(orking)d(dri)n(v)o(er)-5 b(.)19
b(Y)-9 b(ou)20 b(will)h(see)f(that)h(an)f(Etherboot)e(dri)n(v)o(er)h
(requires)g(4)h(functions)f(to)h(be)g(pro)o(vided:)-2
993 y
SDict begin H.S end
 -2 993 a -2 993 a
SDict begin 13 H.A end
 -2 993 a -2 993 a
SDict begin [ /View [/XYZ H.V] /Dest (318) cvn H.B /DEST pdfmark end
 -2 993 a -2
993 a
SDict begin H.S end
 -2 993 a -2 993 a
SDict begin 13 H.A end
 -2 993 a -2 993 a
SDict begin [ /View [/XYZ H.V] /Dest (319) cvn H.B /DEST pdfmark end
 -2 993 a -2
1035 a
SDict begin H.S end
 -2 1035 a -2 1035 a
SDict begin 13 H.A end
 -2 1035 a -2 1035 a
SDict begin [ /View [/XYZ H.V] /Dest (320) cvn H.B /DEST pdfmark end
 -2 1035
a Black 396 1208 a Ff(\225)p Black 479 1208 a
SDict begin H.S end
 479 1208
a 479 1208 a
SDict begin 13 H.A end
 479 1208 a 479 1208 a
SDict begin [ /View [/XYZ H.V] /Dest (321) cvn H.B /DEST pdfmark end
 479 1208 a 21 w Fh(A)h(probe)e
(routine,)f(that)j(determines)e(if)h(the)g(netw)o(ork)f(adapter)g(is)i
(present)f(on)g(the)g(machine.)f(This)h(is)h(passed)f(a)479
1315 y(pointer)f(to)g(a)h(`nic')f(struct,)h(possibly)f(a)h(list)h(of)e
(candidate)f(addresses)h(to)h(probe,)e(and)h(possibly)g(a)h(pointer)f
(to)g(a)h(`pci')479 1423 y(struct.)g(This)h(routine)e(should)g
(initialise)i(the)f(netw)o(ork)f(adapter)g(if)h(present.)g(If)g(a)g
(netw)o(ork)f(adapter)g(of)h(the)g(type)g(the)479 1531
y(dri)n(v)o(er)f(can)h(handle)f(is)i(found,)d(it)j(should)e(sa)n(v)o(e)
i(the)f(I/O)g(address)g(at)h(which)f(it)g(w)o(as)i(found)c(for)i(use)g
(by)g(the)g(other)479 1639 y(routines.)f(In)h(the)g(case)h(of)f(ISA)g
(adapters,)g(it)h(may)e(be)h(passed)g(a)h(list)g(of)f(addresses)g(to)g
(try)-5 b(,)20 b(or)g(if)g(no)g(list)h(is)g(passed)479
1747 y(in,)f(it)h(may)f(use)g(an)h(internal)e(list)i(of)f(candidate)f
(addresses.)h(In)g(the)g(case)g(of)g(PCI)h(adapters,)e(the)i(address)e
(has)479 1855 y(already)g(been)h(found)e(by)i(the)g(PCI)h(support)e
(routines.)g(Then)g(it)i(should)f(determine)e(the)i(Ethernet)g(\(MA)m
(C\))f(address)479 1963 y(of)h(the)g(adapter)f(and)h(sa)n(v)o(e)h(it)f
(in)h(nic->node_addr)-5 b(.)16 b(It)21 b(should)e(then)g(initialise)i
(the)f(adapter)-5 b(.)20 b(Finally)g(it)h(should)e(\002ll)479
2071 y(in)i(the)f(function)e(pointers)i(for)f(the)h(other)g(routines,)f
(and)g(return)g(the)i(`nic')e(pointer)-5 b(.)19 b(If)h(it)h(f)o(ails)g
(to)f(\002nd)g(an)g(adapter)m(,)479 2179 y(it)h(should)e(return)g(0.)-2
2221 y
SDict begin H.S end
 -2 2221 a -2 2221 a
SDict begin 13 H.A end
 -2 2221 a -2 2221 a
SDict begin [ /View [/XYZ H.V] /Dest (322) cvn H.B /DEST pdfmark end
 -2 2221
a 479 2328 a Fh(The)h(\002eld)h(rom_info)c(in)k(the)f(`nic')f(struct)i
(contains,)e(on)h(entry)f(to)h(the)g(probe)f(routine,)g(a)i(pointer)e
(to)h(the)g(structure)479 2436 y(rom_info,)e(de\002ned)h(in)1180
2436 y
SDict begin H.S end
 1180 2436 a 1180 2436 a
SDict begin 13 H.A end
 1180 2436 a 1180 2436
a
SDict begin [ /View [/XYZ H.V] /Dest (323) cvn H.B /DEST pdfmark end
 1180 2436 a Fd(etherboot.h)p Fh(.)g(This)h(contains)g(the)g(se)o
(gment)f(address)h(and)g(length)f(in)h(shorts)g(of)g(the)479
2544 y(R)m(OM)h(as)g(detected)e(by)h(the)g(BIOS.)h(These)f(can)g(be)g
(used)g(by)g(the)g(dri)n(v)o(er)e(to)j(discriminate)e(between)g
(multiple)479 2652 y(instances)h(of)g(the)h(same)f(netw)o(ork)f
(adaptor)g(on)g(the)i(b)n(us,)f(and)f(choose)h(to)g(acti)n(v)n(ate)g
(only)f(the)h(one)g(the)g(R)m(OM)h(is)479 2760 y(installed)f(on.)g(F)o
(or)g(e)o(xample,)e(the)j(3c509)d(hardw)o(are)h(has)h(a)h(re)o(gister)e
(indicating)g(what)h(address)g(the)g(R)m(OM)h(is)479
2868 y(mapped)e(at.)h(Note)g(that)h(the)f(dri)n(v)o(er)f(should)g(not)h
(reject)g("R)m(OM)g(se)o(gment)f(addresses")h(outside)g(0xC000)f(to)479
2976 y(0xEE00)g(as)h(this)h(indicates)f(booting)f(from)g(\003opp)o(y)g
(disk)h(or)g(other)f(non-R)m(OM)g(media.)-2 3035 y
SDict begin H.S end
 -2
3035 a -2 3035 a
SDict begin 13 H.A end
 -2 3035 a -2 3035 a
SDict begin [ /View [/XYZ H.V] /Dest (324) cvn H.B /DEST pdfmark end
 -2 3035 a 479 3125
a Fh(Initialising)h(the)g(adapter)f(means)h(programming)d(the)j(re)o
(gisters)g(so)g(that)h(the)f(chip)g(is)h(ready)e(to)h(send)g(and)g
(recei)n(v)o(e)479 3233 y(pack)o(ets.)g(This)g(includes)g(enabling)e
(the)j(appropriate)c(hardw)o(are)i(interf)o(ace)h(\(10B2,)f(10BT\))g
(in)i(the)f(case)g(of)479 3341 y(adapters)f(with)h(more)e(than)h(one)g
(interf)o(ace,)g(and)f(setting)i(the)f(right)g(speed)g(\(10Mb,)f
(100Mb\))g(if)h(the)h(hardw)o(are)e(does)479 3449 y(not)i(autosense)g
(and)f(set)i(it.)g(It)f(also)h(includes)e(setting)i(up)e(an)o(y)h
(memory)e(b)n(uf)n(fers)h(needed)g(by)h(the)g(hardw)o(are,)f(along)479
3557 y(with)i(an)o(y)e(necessary)h(pointers.)-2 3617
y
SDict begin H.S end
 -2 3617 a -2 3617 a
SDict begin 13 H.A end
 -2 3617 a -2 3617 a
SDict begin [ /View [/XYZ H.V] /Dest (325) cvn H.B /DEST pdfmark end
 -2 3617 a 479
3707 a Fh(Note)g(that)g(you)g(should)f(program)e(the)k(recei)n(v)o(er)d
(re)o(gisters)i(to)g(allo)n(w)g(broadcast)f(Ethernet)g(pack)o(ets)g(to)
i(be)f(recei)n(v)o(ed.)479 3814 y(This)h(is)g(needed)e(because)g(other)
h(IP)g(hosts)h(will)f(do)g(an)g(ARP)i(request)d(on)h(the)g(diskless)h
(computer)d(when)i(it)h(boots.)438 3964 y
SDict begin H.S end
 438 3964 a
438 3964 a
SDict begin 13 H.A end
 438 3964 a 438 3964 a
SDict begin [ /View [/XYZ H.V] /Dest (326) cvn H.B /DEST pdfmark end
 438 3964 a Black 396
4113 a Ff(\225)p Black 479 4113 a
SDict begin H.S end
 479 4113 a 479 4113
a
SDict begin 13 H.A end
 479 4113 a 479 4113 a
SDict begin [ /View [/XYZ H.V] /Dest (327) cvn H.B /DEST pdfmark end
 479 4113 a 21 w Fh(A)g(disable)f(routine,)e
(which)i(puts)g(the)g(adapter)g(into)f(a)i(disabled)f(state.)g(This)h
(is)g(passed)f(a)g(pointer)f(to)i(a)f(`nic')479 4221
y(struct.)g(This)h(is)g(needed)e(to)h(lea)n(v)o(e)g(the)g(adapter)f(in)
i(a)f(suitable)g(state)h(for)f(use)g(by)g(the)g(operating)f(system)h
(which)g(will)479 4329 y(be)g(run)g(after)g(Etherboot.)e(Some)i
(adapters,)f(if)h(left)h(in)f(an)g(acti)n(v)o(e)g(state,)g(may)g(crash)
g(the)g(operating)f(system)h(at)h(boot)479 4437 y(time,)f(or)g(cannot)f
(be)i(found)d(by)i(the)g(operating)e(system.)i(This)h(can)f(be)g
(called)g(from)f(the)h(probe)f(routine.)-2 4455 y
SDict begin H.S end
 -2
4455 a -2 4455 a
SDict begin 13 H.A end
 -2 4455 a -2 4455 a
SDict begin [ /View [/XYZ H.V] /Dest (328) cvn H.B /DEST pdfmark end
 -2 4455 a Black
396 4587 a Ff(\225)p Black 479 4587 a
SDict begin H.S end
 479 4587 a 479
4587 a
SDict begin 13 H.A end
 479 4587 a 479 4587 a
SDict begin [ /View [/XYZ H.V] /Dest (329) cvn H.B /DEST pdfmark end
 479 4587 a 21 w Fh(A)i(transmit)f
(routine,)e(to)j(send)f(an)g(Ethernet)f(pack)o(et.)g(This)i(is)g
(passed)f(a)g(pointer)f(to)i(a)f(`nic')g(struct,)g(the)g(6)g(byte)479
4694 y(Ethernet)f(address)h(of)g(the)g(destination,)f(a)i(pack)o(et)e
(type)h(\(IP)-9 b(,)20 b(ARP)-9 b(,)21 b(etc\),)e(the)i(size)g(of)e
(the)i(data)f(payload)e(in)j(bytes,)479 4802 y(and)f(a)h(pointer)d(to)j
(the)f(data)g(payload.)e(Remember)i(the)g(pack)o(et)f(type)h(and)g
(length)f(\002elds)i(are)f(in)g(x86)f(byte)h(order)479
4910 y(\(little-endian\))f(and)g(the)h(adapter')-5 b(s)20
b(byte)g(order)f(may)g(be)h(the)h(re)n(v)o(erse)e(\(big-endian\).)e
(Note)j(that)g(the)g(routine)479 5018 y(kno)n(ws)g(nothing)e(about)h
(IP)i(\(or)f(an)o(y)f(other)g(type\))h(pack)o(ets,)f(the)i(data)f
(payload)e(is)j(assumed)f(to)g(be)g(a)h(\002lled)g(in)479
5126 y(pack)o(et,)f(ready)f(to)h(transmit.)-2 5144 y
SDict begin H.S end

-2 5144 a -2 5144 a
SDict begin 13 H.A end
 -2 5144 a -2 5144 a
SDict begin [ /View [/XYZ H.V] /Dest (330) cvn H.B /DEST pdfmark end
 -2 5144 a Black
3800 5569 a Fe(12)p Black eop end
%%Page: 13 13
TeXDict begin 13 12 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.13) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
Black 396 72 a Ff(\225)p Black 479 72 a
SDict begin H.S end
 479 72 a 479
72 a
SDict begin 13 H.A end
 479 72 a 479 72 a
SDict begin [ /View [/XYZ H.V] /Dest (331) cvn H.B /DEST pdfmark end
 479 72 a 21 w Fh(A)h(poll)f(routine,)e(to)j
(check)e(if)i(a)f(pack)o(et)g(has)g(been)g(recei)n(v)o(ed)e(and)i
(ready)f(for)h(processing.)e(This)j(is)g(passed)f(a)479
180 y(pointer)f(to)g(a)h(`nic')f(struct.)h(If)f(a)h(pack)o(et)f(is)i(a)
n(v)n(ailable,)e(it)h(should)f(cop)o(y)f(the)i(pack)o(et)f(from)g(the)g
(adapter)g(into)g(the)h(data)479 288 y(area)g(pointed)e(to)i(by)f
(nic->pack)o(et,)f(and)h(set)i(nic->pack)o(etlen)c(to)j(the)g(length)f
(of)g(the)h(data,)f(and)g(return)g(1,)g(otherwise)479
396 y(0.)-2 439 y
SDict begin H.S end
 -2 439 a -2 439 a
SDict begin 13 H.A end
 -2 439 a -2 439 a
SDict begin [ /View [/XYZ H.V] /Dest (332) cvn H.B /DEST pdfmark end

-2 439 a 479 546 a Fh(A)i(fe)n(w)e(Ethernet)g(controller)f(chips)h
(will)i(recei)n(v)o(e)e(pack)o(ets)g(from)g(itself,)h(as)g(detected)f
(by)g(ha)n(ving)g(a)h(source)f(address)479 654 y(of)h(itself.)h(Y)-9
b(ou)19 b(can)h(thro)n(w)g(these)g(out)g(immediately)f(on)h(reception)e
(and)i(not)g(bother)f(the)h(upper)f(layer)g(with)i(them.)-2
994 y
SDict begin H.S end
 -2 994 a -2 994 a
SDict begin 13 H.A end
 -2 994 a -2 994 a
SDict begin [ /View [/XYZ H.V] /Dest (333) cvn H.B /DEST pdfmark end
 -2 994 a 396
1102 a Fh(No)f(routine)f(needs)h(to)h(be)f(public,)f(all)i(routines)e
(should)g(be)h(static)h(and)f(pri)n(v)n(ate)f(to)h(the)g(dri)n(v)o(er)f
(module.)g(Similarly)h(all)396 1210 y(global)g(data)g(in)g(the)g(dri)n
(v)o(er)f(should)g(be)h(static)h(and)f(pri)n(v)n(ate.)-2
1269 y
SDict begin H.S end
 -2 1269 a -2 1269 a
SDict begin 13 H.A end
 -2 1269 a -2 1269 a
SDict begin [ /View [/XYZ H.V] /Dest (334) cvn H.B /DEST pdfmark end
 -2 1269
a 396 1359 a Fh(If)g(the)h(NIC)f(is)h(a)g(PCI)g(adapter)m(,)d(create)i
(a)h(struct)f(pci_dri)n(v)o(er)e(\(as)i(in)2368 1359
y
SDict begin H.S end
 2368 1359 a 2368 1359 a
SDict begin 13 H.A end
 2368 1359 a 2368 1359 a
SDict begin [ /View [/XYZ H.V] /Dest (335) cvn H.B /DEST pdfmark end
 2368
1359 a Fd(skel.c)p Fh(\))f(and)h(an)g(array)f(of)h(struct)g(pci_id:)-2
1460 y
SDict begin H.S end
 -2 1460 a -2 1460 a
SDict begin 11.7 H.A end
 -2 1460 a -2 1460 a
SDict begin [ /View [/XYZ H.V] /Dest (336) cvn H.B /DEST pdfmark end
 -2 1460
a 396 1539 a Fd(static)44 b(struct)g(pci_id)g(skel_nics[])f(=)h({)396
1637 y(PCI_ROM\(0x0000,)f(0x0000,)g("skel-pci",)g("Skeleton)h(PCI)g
(Adaptor"\),)396 1734 y(};)396 1925 y Fh(Fill)21 b(the)g(pci_id)e
(array)g(with)i(one)e(entry)h(for)f(each)h(combination)e(of)i(pci)g(v)o
(endor)e(id)i(and)g(pci)g(de)n(vice)g(id)g(that)g(your)396
2033 y(dri)n(v)o(er)f(can)h(handle.)f(PCI_R)m(OM)h(is)h(a)g(a)f(macro)g
(de\002ned)f(in)2158 2033 y
SDict begin H.S end
 2158 2033 a 2158 2033 a
SDict begin 13 H.A end
 2158
2033 a 2158 2033 a
SDict begin [ /View [/XYZ H.V] /Dest (337) cvn H.B /DEST pdfmark end
 2158 2033 a Fd(include/pci.h)p Fh(.)f(The)i(ar)o
(guments)e(ha)n(v)o(e)i(the)396 2141 y(follo)n(wing)f(meaning:)g(v)o
(endor)f(id,)i(de)n(vice)f(id,)h(rom)g(name)f(and)h(short)g
(description.)e(Since)i(this)h(information)d(is)j(also)396
2248 y(used)f(to)h(b)n(uild)e(the)i(Mak)o(e\002le)f(rules,)g(you)f
(must)h(use)g(the)h(PCI_R)m(OM)f(macro)f(and)h(can')o(t)f(\002ll)i(in)f
(the)h(v)n(alues)e(directly)-5 b(.)396 2356 y(Both)20
b(the)h(pci)f(v)o(endor)e(and)i(de)n(vice)f(id)h(must)h(be)f(gi)n(v)o
(en)f(in)h(he)o(x)f(form,)g(no)h(de\002ne)g(is)h(allo)n(wed.)e
(Additionally)396 2464 y(PCI_R)m(OM)i(must)f(occur)f(only)g(once)h(in)g
(a)h(line)f(and)g(one)f(macro)h(call)g(must)g(not)g(span)g(more)g(than)
f(one)h(line.)g(Y)-9 b(ou)20 b(can)396 2572 y(obtain)g(the)g(v)o(endor)
e(and)h(de)n(vice)h(ids)g(from)g(the)g(\002le)1922 2572
y
SDict begin H.S end
 1922 2572 a 1922 2572 a
SDict begin 13 H.A end
 1922 2572 a 1922 2572 a
SDict begin [ /View [/XYZ H.V] /Dest (338) cvn H.B /DEST pdfmark end
 1922
2572 a Fd(/usr/include/linux/pci.h)p Fh(.)c(It)21 b(is)g(also)f
(displayed)f(by)396 2680 y(PCI)i(BIOSes)g(on)f(bootup,)e(or)i(you)f
(can)h(use)h(the)1826 2680 y
SDict begin H.S end
 1826 2680 a 1826 2680 a
SDict begin 13 H.A end

1826 2680 a 1826 2680 a
SDict begin [ /View [/XYZ H.V] /Dest (339) cvn H.B /DEST pdfmark end
 1826 2680 a Fc(lspci)g Fh(program)d(from)h(the)
i(pciutils)f(package)f(to)h(disco)o(v)o(er)e(the)j(ids.)-2
2740 y
SDict begin H.S end
 -2 2740 a -2 2740 a
SDict begin 13 H.A end
 -2 2740 a -2 2740 a
SDict begin [ /View [/XYZ H.V] /Dest (340) cvn H.B /DEST pdfmark end
 -2 2740
a 396 2830 a Fh(If)f(the)h(NIC)f(is)h(an)f(ISA)h(adapter)m(,)e(create)g
(a)i(struct)f(isa_dri)n(v)o(er)f(\(as)h(in)2405 2830
y
SDict begin H.S end
 2405 2830 a 2405 2830 a
SDict begin 13 H.A end
 2405 2830 a 2405 2830 a
SDict begin [ /View [/XYZ H.V] /Dest (341) cvn H.B /DEST pdfmark end
 2405
2830 a Fd(skel.c)p Fh(\))f(and)h(one)f(line)i(lik)o(e)f(the)g(follo)n
(wing:)-2 2931 y
SDict begin H.S end
 -2 2931 a -2 2931 a
SDict begin 11.7 H.A end
 -2 2931 a -2 2931
a
SDict begin [ /View [/XYZ H.V] /Dest (342) cvn H.B /DEST pdfmark end
 -2 2931 a 396 3010 a Fd(ISA_ROM\("skel-isa",)42 b("Skeleton)h(ISA)i
(driver"\))396 3201 y Fh(in)21 b(your)e(dri)n(v)o(er)f(source.)h(The)h
(ISA_R)m(OM)g(macro)f(is)i(lik)o(e)g(the)f(PCI_R)m(OM)g(without)g(the)g
(v)o(endor/de)n(vice)d(ids.)j(The)396 3309 y(same)h(rules)f(about)f
(formatting)f(as)j(in)g(the)f(PCI)h(case)f(apply)-5 b(.)-2
3368 y
SDict begin H.S end
 -2 3368 a -2 3368 a
SDict begin 13 H.A end
 -2 3368 a -2 3368 a
SDict begin [ /View [/XYZ H.V] /Dest (343) cvn H.B /DEST pdfmark end
 -2 3368
a 396 3458 a Fh(Only)20 b(for)g(special)g(cases)h(where)e(the)i
(automatic)e(generation)f(of)i(b)n(uild)g(rules)g(via)g(the)g(PCI_R)m
(OM)h(and)e(ISA_R)m(OM)396 3566 y(entries)h(does)g(not)g(w)o(ork,)f
(add)h(an)g(entry)g(to)g(the)g(here)g(document)e(in)2385
3566 y
SDict begin H.S end
 2385 3566 a 2385 3566 a
SDict begin 13 H.A end
 2385 3566 a 2385 3566
a
SDict begin [ /View [/XYZ H.V] /Dest (344) cvn H.B /DEST pdfmark end
 2385 3566 a Fd(genrules.pl)h Fh(so)i(that)f(the)g(b)n(uild)g(process)
g(will)396 3674 y(create)g(Mak)o(e\002le)g(rules)g(for)g(it)h(in)f(the)
g(\002le)1631 3674 y
SDict begin H.S end
 1631 3674 a 1631 3674 a
SDict begin 13 H.A end
 1631 3674
a 1631 3674 a
SDict begin [ /View [/XYZ H.V] /Dest (345) cvn H.B /DEST pdfmark end
 1631 3674 a Fd(bin/Roms)p Fh(.)-2 3721
y
SDict begin H.S end
 -2 3721 a -2 3721 a
SDict begin 13 H.A end
 -2 3721 a -2 3721 a
SDict begin [ /View [/XYZ H.V] /Dest (346) cvn H.B /DEST pdfmark end
 -2 3721 a 396
3823 a Fh(The)g(abo)o(v)o(e)f(mentioned)f(structs)i(and)g(macros)g
(hold)f(all)i(information)d(that)i(etherboot)e(needs)i(about)f(your)g
(dri)n(v)o(er)-5 b(.)19 b(In)396 3931 y(case)i(you)e(w)o(onder)g(ho)n
(w)h(this)g(w)o(orks)g(at)h(all)g(although)d(e)n(v)o(erything)g(is)j
(declared)e(static:)i(The)f(special)g(b)n(uild)g(process)396
4039 y(that)h(is)g(used)f(by)f(Etherboot)g(\(including)f(link)o(er)h
(scripts)i(and)e(some)h(Perl)h(magic\))e(packs)h(the)g(necessary)g
(information)396 4147 y(into)g(public)g(se)o(gments.)-2
4207 y
SDict begin H.S end
 -2 4207 a -2 4207 a
SDict begin 13 H.A end
 -2 4207 a -2 4207 a
SDict begin [ /View [/XYZ H.V] /Dest (347) cvn H.B /DEST pdfmark end
 -2 4207
a 396 4297 a Fh(The)g(Etherboot)e(b)n(uild)i(process)g(places)g(a)h(fe)
n(w)f(restrictions)g(on)f(your)g(dri)n(v)o(er:)g(If)h(you)f(need)h
(more)f(than)h(one)g(.c)g(\002le,)396 4405 y(the)g(main)g(\002le)h
(\(that)f(will)h(contain)e(the)h(PCI_R)m(OM)h(or)f(ISA_R)m(OM)f(macro)h
(call\))g(must)g(contain)f(#include)g(directi)n(v)o(es)396
4512 y(for)h(the)g(other)f(\002les.)i(The)o(y)e(must)i(not)f(contain)f
(a)h(PCI_R)m(OM)h(or)e(ISA_R)m(OM)h(call.)h(See)2980
4512 y
SDict begin H.S end
 2980 4512 a 2980 4512 a
SDict begin 13 H.A end
 2980 4512 a 2980 4512
a
SDict begin [ /View [/XYZ H.V] /Dest (348) cvn H.B /DEST pdfmark end
 2980 4512 a Fd(drivers/net/prism*)396 4620 y Fh(for)f(an)g(e)o
(xample.)-2 4638 y
SDict begin H.S end
 -2 4638 a -2 4638 a
SDict begin 13 H.A end
 -2 4638 a -2 4638
a
SDict begin [ /View [/XYZ H.V] /Dest (349) cvn H.B /DEST pdfmark end
 -2 4638 a Black 3800 5569 a Fe(13)p Black eop end
%%Page: 14 14
TeXDict begin 14 13 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.14) cvn H.B /DEST pdfmark
end
 -2 -102 a Black -2 -201
a
SDict begin H.S end
 -2 -201 a -2 -201 a
SDict begin 13 H.A end
 -2 -201 a -2 -201 a
SDict begin [ /View [/XYZ H.V] /Dest (366) cvn H.B /DEST pdfmark end
 -2 -201 a 2875
-132 a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p
Black 396 72 a Fb(7.3.1.)28 b(Rom)f(naming)g(rules)1542
72 y
SDict begin H.S end
 1542 72 a 1542 72 a
SDict begin 15.6 H.A end
 1542 72 a 1542 72 a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.16.1.3) cvn H.B /DEST pdfmark
end
 1542 72
a -2 144 a
SDict begin H.S end
 -2 144 a -2 144 a
SDict begin 13 H.A end
 -2 144 a -2 144 a
SDict begin [ /View [/XYZ H.V] /Dest (351) cvn H.B /DEST pdfmark end
 -2 144
a 396 230 a Fh(Currently)19 b(there)h(is)h(no)f(of)n(\002cial)g(rom)f
(naming)g(con)m(v)o(ention)e(in)k(etherboot.)d(Use)i(some)g(descripti)n
(v)o(e)f(name,)h(b)n(ut)g(note)396 338 y(that)h(tw)o(o)f(ore)g(more)f
(consecuti)n(v)o(e)g(hyphens)f(\(lik)o(e)i(in)g("my--rom"\))d(are)j
(not)g(allo)n(wed,)g(since)g("--")g(is)h(the)f(delimiter)396
446 y(sign)g(for)g(multiple-dri)n(v)o(er)n(-roms.)c(Sometimes)k(it)h
(is)g(dif)n(\002cult)e(to)i(\002nd)f(a)g(sensible)g(name,)g(for)f(e)o
(xample)g(for)h("NICs")396 554 y(that)h(are)f(b)n(uilt)g(in)g
(motherboard)d(chipsets)k(or)f(if)g(you)f(don')o(t)g(kno)n(w)g(the)h
(model)f(name.)h(In)g(this)g(case)h(we)g(choose)e(to)396
662 y(name)h(the)g(corresponding)d(roms)j("dri)n(v)o(er)n(-de)n
(viceid",)c(lik)o(e)k("eepro100-1035".)15 b(Of)21 b(course)e(you)g(ha)n
(v)o(e)h(to)g(mak)o(e)g(sure)396 770 y(that)h(your)d(rom)i(name)g(is)h
(unique)d(in)j(etherboot.)-2 912 y
SDict begin H.S end
 -2 912 a -2 912 a
SDict begin 13 H.A end

-2 912 a -2 912 a
SDict begin [ /View [/XYZ H.V] /Dest (352) cvn H.B /DEST pdfmark end
 -2 912 a 396 1222 a Fg(7.4.)35 b(Booting)f(the)f
(code)i(fr)n(om)d(a)i(\003opp)n(y)2391 1222 y
SDict begin H.S end
 2391 1222
a 2391 1222 a
SDict begin 18.72 H.A end
 2391 1222 a 2391 1222 a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.17.2) cvn H.B /DEST pdfmark
end
 2391 1222 a -2
1309 a
SDict begin H.S end
 -2 1309 a -2 1309 a
SDict begin 13 H.A end
 -2 1309 a -2 1309 a
SDict begin [ /View [/XYZ H.V] /Dest (354) cvn H.B /DEST pdfmark end
 -2 1309
a 396 1390 a Fh(Use)21 b(the)f(rule)g(for)g(bin/dri)n(v)o(er)-5
b(.fd0)16 b(to)21 b(write)f(another)f(instance)h(of)g(the)g(dri)n(v)o
(er)f(to)h(the)g(\003opp)o(y)f(for)h(testing.)g(Use)h(lots)f(of)396
1498 y(printf)f(statements)i(to)f(track)g(where)f(e)o(x)o(ecution)f
(has)j(reached)e(and)g(to)i(display)e(the)i(status)f(of)g(v)n(arious)f
(v)n(ariables)h(and)396 1606 y(re)o(gisters)g(in)g(the)h(code.)e(Y)-9
b(ou)19 b(should)h(e)o(xpect)f(to)h(do)g(this)h(dance)e(with)h(the)h
(de)n(v)o(elopment)c(machine,)i(\003opp)o(y)g(disk)h(and)396
1714 y(tar)o(get)g(machine)f(man)o(y)g(man)o(y)g(times.)-2
1773 y
SDict begin H.S end
 -2 1773 a -2 1773 a
SDict begin 13 H.A end
 -2 1773 a -2 1773 a
SDict begin [ /View [/XYZ H.V] /Dest (355) cvn H.B /DEST pdfmark end
 -2 1773
a 396 2084 a Fg(7.5.)35 b(Booting)f(the)f(test)h(code)g(with)g(another)
f(Etherboot)g(R)n(OM)3503 2084 y
SDict begin H.S end
 3503 2084 a 3503 2084
a
SDict begin 18.72 H.A end
 3503 2084 a 3503 2084 a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.18.2) cvn H.B /DEST pdfmark
end
 3503 2084 a -2 2170 a
SDict begin H.S end
 -2 2170
a -2 2170 a
SDict begin 13 H.A end
 -2 2170 a -2 2170 a
SDict begin [ /View [/XYZ H.V] /Dest (357) cvn H.B /DEST pdfmark end
 -2 2170 a 396 2251 a
Fh(There)20 b(is)h(another)d(method)h(of)h(testing)g(R)m(OM)h(images)f
(that)g(does)g(not)g(in)m(v)n(olv)o(e)f(w)o(alking)g(a)i(\003opp)o(y)e
(disk)h(between)f(the)396 2359 y(machines)h(and)f(is)i(much)f(nicer)-5
b(.)19 b(Set)i(up)f(a)h(supported)d(NIC)j(with)f(a)h(boot)e(R)m(OM.)h
(Put)h(the)f(tar)o(get)f(NIC)i(on)f(the)g(same)396 2467
y(machine)f(b)n(ut)h(at)h(a)g(non-con\003icting)c(I/O)j(location.)f
(That)h(is)h(to)g(say)-5 b(,)20 b(your)e(test)k(machine)d(has)h(tw)o(o)
g(NICs)h(and)f(tw)o(o)396 2575 y(connections)f(to)h(the)g(LAN.)g(Then)g
(when)f(you)h(are)g(ready)f(to)h(test)h(a)g(boot)e(image,)h(use)g(the)g
(utility)3262 2575 y
SDict begin H.S end
 3262 2575 a 3262 2575 a
SDict begin 13 H.A end
 3262 2575
a 3262 2575 a
SDict begin [ /View [/XYZ H.V] /Dest (358) cvn H.B /DEST pdfmark end
 3262 2575 a Fh(mknbi-rom)396 2683 y(\(../mknbi.html\))c
(to)k(create)f(a)h(netw)o(ork)e(bootable)g(image)h(from)f(the)i(R)m(OM)
g(image,)e(and)h(set)h(up)f(bootpd/DHCPD)f(and)396 2791
y(tftpd)h(to)h(send)f(this)h(o)o(v)o(er)e(the)i(when)f(the)g(machine)g
(netboots.)f(Using)h(Etherboot)f(to)h(boot)g(another)f(v)o(ersion)g(of)
i(itself)g(is)396 2899 y(rather)g(mind-boggling)c(I)k(kno)n(w)-5
b(.)-2 2958 y
SDict begin H.S end
 -2 2958 a -2 2958 a
SDict begin 13 H.A end
 -2 2958 a -2 2958 a
SDict begin [ /View [/XYZ H.V] /Dest (359) cvn H.B /DEST pdfmark end

-2 2958 a 396 3268 a Fg(7.6.)35 b(Writing)e(the)g(code)1564
3268 y
SDict begin H.S end
 1564 3268 a 1564 3268 a
SDict begin 18.72 H.A end
 1564 3268 a 1564 3268
a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.19.2) cvn H.B /DEST pdfmark
end
 1564 3268 a -2 3355 a
SDict begin H.S end
 -2 3355 a -2 3355 a
SDict begin 13 H.A end
 -2 3355 a
-2 3355 a
SDict begin [ /View [/XYZ H.V] /Dest (361) cvn H.B /DEST pdfmark end
 -2 3355 a 396 3436 a Fh(First)21 b(set)g(up)f(the)g(v)n
(arious)f(required)g(services,)h(i.e.)g(BOO)m(TP/DHCP)-9
b(,)20 b(tftp,)g(etc.)h(on)e(the)i(de)n(v)o(elopment)c(machine.)i(Y)-9
b(ou)396 3544 y(should)19 b(go)h(through)e(the)i(setup)g(process)g
(with)h(a)f(supported)e(adapter)h(card)h(on)g(a)g(test)i(machine)d(so)h
(that)g(you)g(kno)n(w)396 3652 y(that)h(the)f(netw)o(ork)f(services)h
(are)g(w)o(orking)f(and)g(what)h(to)h(e)o(xpect)e(to)h(see)h(on)f(the)g
(test)h(machine.)-2 3712 y
SDict begin H.S end
 -2 3712 a -2 3712 a
SDict begin 13 H.A end
 -2 3712
a -2 3712 a
SDict begin [ /View [/XYZ H.V] /Dest (362) cvn H.B /DEST pdfmark end
 -2 3712 a 396 3801 a Fh(If)f(you)g(are)g(starting)g(from)f
(a)h(Linux)f(dri)n(v)o(er)m(,)g(usually)g(the)h(hardest)g(part)g(is)h
(\002ltering)f(out)f(all)i(the)f(things)g(you)f(do)h(not)396
3909 y(need)g(from)f(the)h(Linux)f(dri)n(v)o(er)-5 b(.)19
b(Here)h(is)h(a)g(non-e)o(xhausti)n(v)o(e)16 b(list:)22
b(Y)-9 b(ou)19 b(do)h(not)g(use)g(interrupts.)f(Y)-9
b(ou)20 b(do)f(not)h(need)396 4017 y(more)g(than)f(one)h(transmit)g(b)n
(uf)n(fer)-5 b(.)19 b(Y)-9 b(ou)19 b(do)h(not)g(need)g(to)g(use)g(the)h
(most)f(ef)n(\002cient)g(method)e(of)i(data)g(transfer)-5
b(.)20 b(Y)-9 b(ou)19 b(do)396 4125 y(not)h(need)g(to)g(implement)f
(statistics)j(counting.)c(In)i(general)f(it)i(is)g(a)f(good)f(idea)h
(to)h(use)f(the)g(latest)h(Linux)e(dri)n(v)o(er)g(as)396
4233 y(base,)h(because)g(it)h(usually)e(supports)g(ne)n(wer)h(cards)g
(and)g(has)g(more)f(b)n(ugs)h(\002x)o(ed)g(than)g(older)f(v)o(ersions.)
g(If)h(the)g(dri)n(v)o(er)f(is)396 4341 y(written)h(by)g(Donald)f(Beck)
o(er)m(,)h(it)h(is)g(probably)d(best)i(to)g(start)h(from)e(the)i(v)o
(ersion)d(a)n(v)n(ailable)i(on)3145 4341 y
SDict begin H.S end
 3145 4341
a 3145 4341 a
SDict begin 13 H.A end
 3145 4341 a 3145 4341 a
SDict begin [ /View [/XYZ H.V] /Dest (363) cvn H.B /DEST pdfmark end
 3145 4341 a Fh(this)h(page)396
4449 y(\(http://www)-5 b(.sc)o(yld.com/page/suppo)o(rt/netw)o(o)o
(rk/\))o(,)15 b(since)20 b(the)g(dri)n(v)o(er)f(in)h(the)h(of)n
(\002cial)e(k)o(ernel)h(may)g(be)g(behind.)e(See)396
4557 y(also)p 0 TeXcolorgray 551 4557 a
SDict begin H.S end
 551 4557 a Fh(Section)i(7.9)926
4557 y
SDict begin 13 H.L end
 926 4557 a 926 4557 a
SDict begin [ /Subtype /Link /Dest (sync-linux) cvn /H /I /Border [0
0 0] /Color [1 0 0] H.B /ANN pdfmark end
 926 4557 a Black -2 w Fh(.)-2
4600 y
SDict begin H.S end
 -2 4600 a -2 4600 a
SDict begin 13 H.A end
 -2 4600 a -2 4600 a
SDict begin [ /View [/XYZ H.V] /Dest (365) cvn H.B /DEST pdfmark end
 -2 4600
a 396 4706 a Fh(Generally)f(speaking,)g(the)h(probe)f(routine)g(is)i
(relati)n(v)o(ely)e(easy)h(to)h(translate)f(from)f(the)h(Linux)f(dri)n
(v)o(er)-5 b(.)19 b(The)h(e)o(xception)396 4814 y(is)h(when)f(you)f
(need)h(to)g(handle)f(media)h(and)f(speed)h(switching.)g(The)g
(transmit)f(is)j(usually)d(straightforw)o(ard,)f(and)h(the)396
4922 y(recei)n(v)o(e)g(a)i(bit)f(more)g(dif)n(\002cult.)f(The)h(main)g
(problem)e(is)j(that)g(in)f(the)g(Linux)f(dri)n(v)o(er)m(,)f(the)j(w)o
(ork)e(is)i(split)g(between)396 5030 y(routines)f(called)g(from)f(the)h
(k)o(ernel)f(and)h(routines)f(triggered)g(by)g(hardw)o(are)g
(interrupts.)g(As)i(mentioned)d(before,)p Black 3800
5569 a Fe(14)p Black eop end
%%Page: 15 15
TeXDict begin 15 14 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.15) cvn H.B /DEST pdfmark
end
 -2 -102 a Black -2 -201
a
SDict begin H.S end
 -2 -201 a -2 -201 a
SDict begin 13 H.A end
 -2 -201 a -2 -201 a
SDict begin [ /View [/XYZ H.V] /Dest (380) cvn H.B /DEST pdfmark end
 -2 -201 a 2875
-132 a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p
Black 396 72 a Fh(Etherboot)e(does)i(not)g(use)h(interrupts)e(so)h(you)
f(ha)n(v)o(e)h(to)g(bring)f(the)i(w)o(ork)e(of)h(transmitting)f(and)h
(recei)n(ving)e(back)i(into)396 180 y(the)g(main)g(routines.)f(The)h
(disable)g(routine)f(is)i(straightforw)o(ard)d(if)i(you)g(ha)n(v)o(e)f
(the)h(hardw)o(are)f(commands.)396 330 y(When)h(coding,)e(\002rst)i
(get)g(the)g(probe)e(routine)h(w)o(orking.)f(Y)-9 b(ou)19
b(will)h(need)f(to)h(refer)f(to)h(the)g(programmer')-5
b(s)17 b(guide)i(to)h(the)396 438 y(adapter)f(when)h(you)f(do)h(this.)g
(Y)-9 b(ou)20 b(can)g(also)g(get)g(some)g(information)e(by)i(reading)e
(a)j(Linux)e(or)h(FreeBSD)h(dri)n(v)o(er)-5 b(.)18 b(Y)-9
b(ou)396 546 y(may)20 b(also)g(need)g(to)g(get)h(the)f(disable)g
(routine)f(w)o(orking)f(at)j(this)g(time.)-2 605 y
SDict begin H.S end
 -2
605 a -2 605 a
SDict begin 13 H.A end
 -2 605 a -2 605 a
SDict begin [ /View [/XYZ H.V] /Dest (367) cvn H.B /DEST pdfmark end
 -2 605 a 396 695 a Fh(Ne)o(xt,)f(get)g
(the)g(transmit)g(routine)f(w)o(orking.)g(T)-7 b(o)20
b(check)f(that)i(pack)o(ets)e(are)i(going)d(out)i(on)g(the)g(wire,)g
(you)g(can)g(use)396 803 y(tcpdump)e(or)i(ethereal)f(on)g(the)h(de)n(v)
o(elopment)d(machine)i(to)h(snoop)e(on)i(the)g(Ethernet.)e(The)h
(\002rst)i(pack)o(et)e(to)h(be)g(sent)g(out)396 911 y(by)g(Etherboot)e
(will)j(be)f(a)h(broadcast)e(query)g(pack)o(et,)g(on)h(UDP)h(port)e
(67.)h(Note)g(that)g(you)f(do)h(not)g(need)f(interrupts)g(at)396
1019 y(all.)i(Y)-9 b(ou)19 b(should)h(ensure)f(the)h(pack)o(et)g(is)h
(fully)f(transmitted)f(before)g(returning)f(from)h(this)i(routine.)d(Y)
-9 b(ou)20 b(may)g(also)396 1127 y(wish)h(to)f(implement)f(a)i(timeout)
e(to)i(mak)o(e)e(sure)h(the)h(dri)n(v)o(er)d(doesn')o(t)h(get)h(stuck)g
(inside)g(transmit)g(if)h(it)g(f)o(ails)f(to)396 1235
y(complete.)f(A)i(couple)e(of)h(timer)g(routines)f(are)h(a)n(v)n
(ailable)g(for)f(implementing)g(the)h(timeout,)f(see)3222
1235 y
SDict begin H.S end
 3222 1235 a 3222 1235 a
SDict begin 13 H.A end
 3222 1235 a 3222 1235
a
SDict begin [ /View [/XYZ H.V] /Dest (368) cvn H.B /DEST pdfmark end
 3222 1235 a Fd(timer.h)p Fh(.)g(Y)-9 b(ou)20 b(use)396
1343 y(them)g(lik)o(e)h(this)f(\(in)g(pseudo-code\):)-2
1444 y
SDict begin H.S end
 -2 1444 a -2 1444 a
SDict begin 11.7 H.A end
 -2 1444 a -2 1444 a
SDict begin [ /View [/XYZ H.V] /Dest (369) cvn H.B /DEST pdfmark end
 -2 1444
a 441 1523 a Fd(for)44 b(\(load_timer2\(TIMEOUT_VALUE\);)486
1620 y(transmitter_busy)e(&&)j(\(status)e(=)i(timer2_running\(\)\);)d
(\))486 1717 y(;)441 1814 y(if)j(\(status)e(==)i(0\))486
1911 y(transmitter_timed_out;)396 2102 y Fh(The)20 b(timeout)g(v)n
(alue)f(should)g(be)h(1193)f(per)h(millisecond)f(of)h(w)o(ait.)h(The)f
(maximum)e(v)n(alue)i(is)h(65535,)d(which)h(is)j(about)396
2210 y(54)e(milliseconds)g(of)f(timeout.)h(If)g(you)f(just)i(need)e(to)
i(delay)e(a)i(short)f(time)g(without)f(needing)g(to)h(do)g(other)g
(checks)396 2318 y(during)f(the)h(timeout,)f(you)h(can)f(call)i(w)o
(aiton_timer2\(TIMEOUT_V)-11 b(ALUE\))15 b(which)k(will)i(load,)f(then)
f(poll)h(the)396 2426 y(timer)m(,)g(and)f(return)g(control)g(on)h
(timeout.)-2 2480 y
SDict begin H.S end
 -2 2480 a -2 2480 a
SDict begin 13 H.A end
 -2 2480 a -2
2480 a
SDict begin [ /View [/XYZ H.V] /Dest (370) cvn H.B /DEST pdfmark end
 -2 2480 a 396 2576 a Fh(Please)h(do)f(not)g(use)g(counting)f
(loops)g(to)i(implement)d(time-sensiti)n(v)o(e)i(delays.)f(Such)h
(loops)g(are)g(CPU)h(speed)396 2684 y(dependent)d(and)i(can)g(f)o(ail)g
(to)h(gi)n(v)o(e)e(the)h(right)g(delay)g(period)e(when)i(run)f(on)h(a)h
(f)o(aster)f(machine.)-2 2743 y
SDict begin H.S end
 -2 2743 a -2 2743 a
SDict begin 13 H.A end
 -2
2743 a -2 2743 a
SDict begin [ /View [/XYZ H.V] /Dest (371) cvn H.B /DEST pdfmark end
 -2 2743 a 396 2833 a Fh(Ne)o(xt,)g(get)g(the)g(recei)n
(v)o(e)f(routine)g(w)o(orking.)g(If)h(you)f(already)g(ha)n(v)o(e)h(the)
g(transmit)g(routine)f(w)o(orking)g(correctly)f(you)396
2941 y(should)h(be)i(getting)e(a)i(reply)e(from)g(the)h(BOO)m(TP/DHCP)h
(serv)o(er)-5 b(.)20 b(Again,)f(you)g(do)h(not)g(need)f(interrupts,)g
(unlik)o(e)396 3049 y(dri)n(v)o(ers)g(from)g(Linux)g(and)h(other)f
(operating)g(systems.)h(This)h(means)e(you)h(just)h(ha)n(v)o(e)e(to)h
(read)g(the)g(right)g(re)o(gister)f(on)396 3157 y(the)h(adapter)g(to)g
(see)h(if)f(a)h(pack)o(et)e(has)i(arri)n(v)o(ed.)d(Note)i(that)h(you)e
(should)g(NO)m(T)h(loop)f(in)i(the)f(recei)n(v)o(e)f(routine)g(until)h
(a)396 3265 y(pack)o(et)g(is)h(recei)n(v)o(ed.)d(Etherboot)h(needs)g
(to)i(do)e(other)h(things)g(so)g(if)h(you)e(loop)g(in)i(the)f(poll)g
(routine,)e(it)j(will)g(not)f(get)g(a)396 3373 y(chance)f(to)i(do)f
(those)g(tasks.)g(Just)h(return)e(0)h(if)h(there)f(is)h(no)e(pack)o(et)
h(a)o(w)o(aiting)g(and)f(the)i(main)e(line)i(will)g(call)f(the)g(poll)
396 3481 y(routine)f(again)g(later)-5 b(.)-2 3540 y
SDict begin H.S end
 -2
3540 a -2 3540 a
SDict begin 13 H.A end
 -2 3540 a -2 3540 a
SDict begin [ /View [/XYZ H.V] /Dest (372) cvn H.B /DEST pdfmark end
 -2 3540 a 396 3630
a Fh(Finally)g(,)20 b(get)g(the)g(disable)g(routine)f(w)o(orking.)f
(This)j(may)e(simply)h(be)g(a)h(matter)f(of)g(turning)e(of)n(f)i
(something)f(in)h(the)396 3738 y(adapter)-5 b(.)-2 3797
y
SDict begin H.S end
 -2 3797 a -2 3797 a
SDict begin 13 H.A end
 -2 3797 a -2 3797 a
SDict begin [ /View [/XYZ H.V] /Dest (373) cvn H.B /DEST pdfmark end
 -2 3797 a 396
4108 a Fg(7.7.)35 b(Things)f(to)f(watc)o(h)h(out)f(f)n(or)1948
4108 y
SDict begin H.S end
 1948 4108 a 1948 4108 a
SDict begin 18.72 H.A end
 1948 4108 a 1948 4108
a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.20.2) cvn H.B /DEST pdfmark
end
 1948 4108 a -2 4194 a
SDict begin H.S end
 -2 4194 a -2 4194 a
SDict begin 13 H.A end
 -2 4194 a
-2 4194 a
SDict begin [ /View [/XYZ H.V] /Dest (375) cvn H.B /DEST pdfmark end
 -2 4194 a 396 4275 a Fh(Things)20 b(that)g(may)f(complicate)g
(your)g(coding)g(are)h(constraints)g(imposed)f(by)g(the)h(hardw)o(are.)
f(Some)h(adapters)f(require)396 4383 y(b)n(uf)n(fers)g(to)i(be)f(on)g
(w)o(ord)f(or)h(double)n(w)o(ord)e(boundaries.)f(See)2178
4383 y
SDict begin H.S end
 2178 4383 a 2178 4383 a
SDict begin 13 H.A end
 2178 4383 a 2178 4383
a
SDict begin [ /View [/XYZ H.V] /Dest (376) cvn H.B /DEST pdfmark end
 2178 4383 a Fd(rtl8139.c)i Fh(for)h(an)g(e)o(xample)f(of)h(this.)g
(Some)g(adapters)396 4491 y(need)g(a)g(w)o(ait)h(after)f(certain)g
(operations.)-2 4551 y
SDict begin H.S end
 -2 4551 a -2 4551 a
SDict begin 13 H.A end
 -2 4551 a
-2 4551 a
SDict begin [ /View [/XYZ H.V] /Dest (377) cvn H.B /DEST pdfmark end
 -2 4551 a 396 4861 a Fg(7.8.)35 b(Tid)n(ying)f(up)1231
4861 y
SDict begin H.S end
 1231 4861 a 1231 4861 a
SDict begin 18.72 H.A end
 1231 4861 a 1231 4861
a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.21.2) cvn H.B /DEST pdfmark
end
 1231 4861 a -2 4947 a
SDict begin H.S end
 -2 4947 a -2 4947 a
SDict begin 13 H.A end
 -2 4947 a
-2 4947 a
SDict begin [ /View [/XYZ H.V] /Dest (379) cvn H.B /DEST pdfmark end
 -2 4947 a 396 5028 a Fh(When)20 b(you)g(get)g(something)e
(more)i(or)g(less)h(w)o(orking,)d(release)j(early)-5
b(.)19 b(People)g(on)h(the)g(mailing)g(lists)h(can)f(help)g(you)396
5136 y(\002nd)g(problems)f(or)h(impro)o(v)o(e)e(the)i(code.)f(Besides)i
(you)f(don')o(t)e(w)o(ant)i(to)h(get)f(run)f(o)o(v)o(er)g(by)h(a)h(b)n
(us)f(and)g(then)f(the)i(w)o(orld)p Black 3800 5569 a
Fe(15)p Black eop end
%%Page: 16 16
TeXDict begin 16 15 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.16) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
396 72 a Fh(ne)n(v)o(er)f(gets)i(to)f(see)h(your)e(masterpiece,)g(do)g
(you?)h(:-\))396 222 y(Y)-9 b(our)19 b(opus)h(should)f(be)h(released)g
(under)f(GPL,)h(BSD)h(or)f(a)h(similar)f(Open)g(Source)f(license,)h
(otherwise)g(people)f(will)396 330 y(ha)n(v)o(e)h(problems)f(using)g
(your)g(code,)g(as)i(most)g(of)f(the)g(rest)g(of)g(Etherboot)e(is)k
(GPLed.)-2 389 y
SDict begin H.S end
 -2 389 a -2 389 a
SDict begin 13 H.A end
 -2 389 a -2 389 a
SDict begin [ /View [/XYZ H.V] /Dest (sync-linux) cvn H.B /DEST pdfmark
end

-2 389 a 396 699 a Fg(7.9.)35 b(K)n(eeping)g(y)m(our)e(driver)h(in)f
(sync)i(with)e(the)h(Lin)o(ux)g(ver)n(sion)3490 699 y
SDict begin H.S end

3490 699 a 3490 699 a
SDict begin 18.72 H.A end
 3490 699 a 3490 699 a
SDict begin [ /View [/XYZ H.V] /Dest (0.7.22.2) cvn H.B /DEST pdfmark
end
 3490 699
a -2 786 a
SDict begin H.S end
 -2 786 a -2 786 a
SDict begin 13 H.A end
 -2 786 a -2 786 a
SDict begin [ /View [/XYZ H.V] /Dest (383) cvn H.B /DEST pdfmark end
 -2 786
a 396 867 a Fh(Most)21 b(Etherboot)d(dri)n(v)o(ers)h(are)h(deri)n(v)o
(ed)e(from)i(their)g(Linux)f(counterparts.)e(Sooner)i(or)h(later)h(the)
f(Linux)f(dri)n(v)o(er)g(where)396 975 y(you)h(started)g(from)f(will)i
(get)f(updated.)e(This)j(may)e(include)h(b)n(ug\002x)o(es)f(and)g
(support)g(for)h(ne)n(w)g(NICs.)h(Unfortunately)396 1083
y(there)f(is)h(no)f(w)o(ay)g(to)g(k)o(eep)g(the)g(Etherboot)f(dri)n(v)o
(er)f(automatically)h(up)h(to)g(date,)g(b)n(ut)g(if)h(you)e(k)o(eep)h
(the)g(follo)n(wing)e(rules)396 1191 y(in)j(mind)e(while)h(porting)f
(it)i(can)f(be)g(made)f(easier:)1900 1191 y
SDict begin H.S end
 1900 1191
a 1900 1191 a
SDict begin 13 H.A end
 1900 1191 a 1900 1191 a
SDict begin [ /View [/XYZ H.V] /Dest (384) cvn H.B /DEST pdfmark end
 1900 1191 a -2
1269 a
SDict begin H.S end
 -2 1269 a -2 1269 a
SDict begin 13 H.A end
 -2 1269 a -2 1269 a
SDict begin [ /View [/XYZ H.V] /Dest (385) cvn H.B /DEST pdfmark end
 -2 1269
a Black 396 1478 a Ff(\225)p Black 479 1478 a
SDict begin H.S end
 479 1478
a 479 1478 a
SDict begin 13 H.A end
 479 1478 a 479 1478 a
SDict begin [ /View [/XYZ H.V] /Dest (386) cvn H.B /DEST pdfmark end
 479 1478 a 21 w Fh(State)i(the)f(v)o
(ersion)f(of)h(the)g(Linux)f(dri)n(v)o(er)g(in)h(a)h(comment)e(in)h
(your)f(Etherboot)f(dri)n(v)o(er)-5 b(.)19 b(This)h(mak)o(es)g(it)h
(easy)g(to)479 1586 y(check)f(to)g(which)g(Linux)f(dri)n(v)o(er)f(the)j
(Etherboot)d(dri)n(v)o(er)h(corresponds)-2 1604 y
SDict begin H.S end
 -2
1604 a -2 1604 a
SDict begin 13 H.A end
 -2 1604 a -2 1604 a
SDict begin [ /View [/XYZ H.V] /Dest (387) cvn H.B /DEST pdfmark end
 -2 1604 a Black
396 1736 a Ff(\225)p Black 479 1736 a
SDict begin H.S end
 479 1736 a 479
1736 a
SDict begin 13 H.A end
 479 1736 a 479 1736 a
SDict begin [ /View [/XYZ H.V] /Dest (388) cvn H.B /DEST pdfmark end
 479 1736 a 21 w Fh(Etherboot)f(dri)n(v)o
(ers)h(should)g(be)i(small.)f(Often)g(a)g(Linux)f(dri)n(v)o(er)g
(contains)h(w)o(ay)g(too)g(much)f(code,)g(b)n(ut)h(in)h(man)o(y)479
1844 y(cases)g(you)f(can)f(reuse)h(some)g(utility)h(functions)d(from)i
(the)g(Linux)f(dri)n(v)o(er)g(without)g(blo)n(wing)g(up)h(the)g(code)f
(size)i(too)479 1951 y(much.)e(In)h(this)h(case,)f(k)o(eep)g(the)g
(order)f(in)h(which)g(the)o(y)g(are)g(de\002ned)f(where)g(possible,)h
(and)g(a)n(v)n(oid)g(code)479 2059 y(reformatting)e(in)i(general.)f
(\(re-indenting)e(is)22 b(ok,)d(because)2225 2059 y
SDict begin H.S end
 2225
2059 a 2225 2059 a
SDict begin 13 H.A end
 2225 2059 a 2225 2059 a
SDict begin [ /View [/XYZ H.V] /Dest (389) cvn H.B /DEST pdfmark end
 2225 2059
a Fc(diff)h Fh(can)g(ignore)f(it)i(with)f(the)g(-b)g(switch\).)g(This)g
(mak)o(es)479 2167 y(it)h(easy)f(to)h(compare)d(later)j(v)o(ersions)e
(with)h(utilities)h(lik)o(e)2154 2167 y
SDict begin H.S end
 2154 2167 a 2154
2167 a
SDict begin 13 H.A end
 2154 2167 a 2154 2167 a
SDict begin [ /View [/XYZ H.V] /Dest (390) cvn H.B /DEST pdfmark end
 2154 2167 a Fc(mgdiff)p
Fh(.)-2 2185 y
SDict begin H.S end
 -2 2185 a -2 2185 a
SDict begin 13 H.A end
 -2 2185 a -2 2185
a
SDict begin [ /View [/XYZ H.V] /Dest (391) cvn H.B /DEST pdfmark end
 -2 2185 a Black 396 2317 a Ff(\225)p Black 479 2317
a
SDict begin H.S end
 479 2317 a 479 2317 a
SDict begin 13 H.A end
 479 2317 a 479 2317 a
SDict begin [ /View [/XYZ H.V] /Dest (392) cvn H.B /DEST pdfmark end
 479 2317
a 21 w Fh(Y)-9 b(ou)20 b(can)g(get)g(the)g(pci)g(ids)h(of)f(all)h(NIC)f
(dri)n(v)o(ers)f(of)h(a)h(particular)e(Linux)g(k)o(ernel)g(with)i(the)f
(utility)3323 2317 y
SDict begin H.S end
 3323 2317 a 3323 2317 a
SDict begin 13 H.A end
 3323 2317
a 3323 2317 a
SDict begin [ /View [/XYZ H.V] /Dest (393) cvn H.B /DEST pdfmark end
 3323 2317 a Fc(get-pci-ids)g Fh(in)479
2425 y
SDict begin H.S end
 479 2425 a 479 2425 a
SDict begin 13 H.A end
 479 2425 a 479 2425 a
SDict begin [ /View [/XYZ H.V] /Dest (394) cvn H.B /DEST pdfmark end
 479
2425 a Fd(util)g Fh(and)g(compare)f(them)g(to)i(the)f(entries)g(in)1848
2425 y
SDict begin H.S end
 1848 2425 a 1848 2425 a
SDict begin 13 H.A end
 1848 2425 a 1848 2425
a
SDict begin [ /View [/XYZ H.V] /Dest (395) cvn H.B /DEST pdfmark end
 1848 2425 a Fd(bin/NIC)g Fh(in)g(order)f(to)i(\002nd)f(out)f(wether)h
(the)g(Linux)f(k)o(ernel)479 2533 y(supports)g(some)h(ne)n(w)g(NICs.)-2
2807 y
SDict begin H.S end
 -2 2807 a -2 2807 a
SDict begin 13 H.A end
 -2 2807 a -2 2807 a
SDict begin [ /View [/XYZ H.V] /Dest (396) cvn H.B /DEST pdfmark end
 -2 2807
a 377 x Fi(8.)39 b(A)h(potted)e(histor)q(y)h(of)g(Etherboot)2154
3184 y
SDict begin H.S end
 2154 3184 a 2154 3184 a
SDict begin 22.464 H.A end
 2154 3184 a 2154 3184
a
SDict begin [ /View [/XYZ H.V] /Dest (0.8.1) cvn H.B /DEST pdfmark
end
 2154 3184 a -2 3285 a
SDict begin H.S end
 -2 3285 a -2 3285 a
SDict begin 13 H.A end
 -2 3285 a
-2 3285 a
SDict begin [ /View [/XYZ H.V] /Dest (398) cvn H.B /DEST pdfmark end
 -2 3285 a 396 3363 a Fh(In)20 b(Linux)f(circles)i(Netboot)e
(appeared)f(\002rst.)j(According)d(to)j(the)f(docs)g(Jamie)g(Honan)f(w)
o(as)i(the)f(person)g(who)f(coded)396 3471 y(up)h(the)g(\002rst)h(v)o
(ersion)e(and)h(speci\002ed)g(the)g(format)f(of)h(the)g(tagged)f(image)
h(\002les.)h(This)f(v)o(ersion)f(used)h(assembler)g(code)396
3579 y(tak)o(en)g(from)778 3579 y
SDict begin H.S end
 778 3579 a 778 3579
a
SDict begin 13 H.A end
 778 3579 a 778 3579 a
SDict begin [ /View [/XYZ H.V] /Dest (399) cvn H.B /DEST pdfmark end
 778 3579 a Fh(pack)o(et)g(dri)n(v)o(ers)f
(\(http://www)-5 b(.crynwr)g(.com\))16 b(to)k(interf)o(ace)f(to)i(the)f
(hardw)o(are,)e(only)i(W)-7 b(estern)21 b(Digital)396
3687 y(\(no)n(w)f(SMC\))g(NICs)h(in)g(the)f(\002rst)h(instance.)e(It)i
(also)f(required)f(a)h(DOS)h(en)m(vironment)c(to)k(compile.)e(Later)h
(on)f(Gero)396 3795 y(K)o(uhlmann)e(took)h(o)o(v)o(er)f(the)i(de)n(v)o
(elopment)d(of)i(Netboot)g(and)g(made)g(tremendous)f(impro)o(v)o
(ements)f(to)j(it.)g(Among)f(other)396 3903 y(things)i(he)g(created)g
(a)g(harness)g(that)g(w)o(ould)g(simulate)g(just)h(enough)d(of)i(a)g
(DOS)h(en)m(vironment)c(so)k(that)f(unmodi\002ed)396
4011 y(pack)o(et)g(dri)n(v)o(er)f(binaries)g(could)g(be)i(used)e(in)i
(a)f(boot)g(R)m(OM.)g(This)g(allo)n(ws)h(an)o(y)e(NIC)i(on)f(the)g
(mark)o(et)f(that)i(has)f(a)h(pack)o(et)396 4119 y(dri)n(v)o(er)e(to)h
(be)g(used)g(immediately)-5 b(.)19 b(He)h(also)h(migrated)e(the)h(de)n
(v)o(elopment)d(to)j(a)h(Linux)e(\(Unix\))g(platform.)-2
4178 y
SDict begin H.S end
 -2 4178 a -2 4178 a
SDict begin 13 H.A end
 -2 4178 a -2 4178 a
SDict begin [ /View [/XYZ H.V] /Dest (400) cvn H.B /DEST pdfmark end
 -2 4178
a 396 4268 a Fh(Etherboot)f(w)o(as)j(ported)e(from)h(FreeBSD)g(by)g
(Markus)f(Gutschk)o(e.)h(He)g(made)g(it)h(compile)e(under)g(Linux)g
(and)h(added)396 4376 y(code)g(to)g(support)f(tagged)g(images)h(in)g
(addition)f(to)i(NFS)g(boot.)e(Since)h(tagged)f(images)h(are)g(a)h
(more)e(general)396 4484 y(mechanism)g(and)h(requires)f(less)i(boot)f
(rom)f(code,)g(this)i(has)g(become)d(the)j(preferred)d(loading)g
(method.)h(Markus)g(has)396 4592 y(also)i(coded)e(most)h(of)g(the)g
(additional)f(features)g(between)h(2.0)f(and)h(3.0,)f(such)h(as)h
(additional)e(bootp)g(tags,)h(ANSI)396 4700 y(screen)g(escapes,)g(etc.)
g(Man)o(y)g(of)g(the)g(features)f(common)g(to)h(Etherboot)e(and)i
(Netboot,)f(such)h(as)h(the)f(tagged)f(image)396 4808
y(format,)g(the)h(support)f(programs)f(such)i(as)h(mknbi,)e(and)h
(support)e(in)j(the)f(Linux)f(k)o(ernel)h(for)f(diskless)i(booting,)d
(are)i(by)396 4916 y(Gero)g(or)g(Markus.)p Black 3798
5569 a Fe(16)p Black eop end
%%Page: 17 17
TeXDict begin 17 16 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.17) cvn H.B /DEST pdfmark
end
 -2 -102 a Black -2 -201
a
SDict begin H.S end
 -2 -201 a -2 -201 a
SDict begin 13 H.A end
 -2 -201 a -2 -201 a
SDict begin [ /View [/XYZ H.V] /Dest (432) cvn H.B /DEST pdfmark end
 -2 -201 a 2875
-132 a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p
Black -2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (401) cvn H.B /DEST pdfmark end
 -2
-11 a -2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (402) cvn H.B /DEST pdfmark end
 -2
-11 a 396 72 a Fh(K)n(en)g(Y)-8 b(ap)20 b(\(http://www)-5
b(.geocities.com/k)o(en_yap_)o(aus/\))14 b(came)20 b(to)h(Etherboot)d
(a)i(bit)h(later)-5 b(.)20 b(His)h(original)e(objecti)n(v)o(e)396
180 y(w)o(as)i(to)g(produce)d(a)i(16)g(bit)h(v)o(ersion)e(that)h(could)
f(be)h(used)g(to)g(netboot)f(ELKS)i(and)e(other)h(OSes)h(on)e(older)h
(CPUs.)h(As)396 288 y(these)g(things)e(happen,)g(he)h(got)g(enticed)f
(into)h(impro)o(ving)e(the)i(code,)f(doing)g(structural)g
(rearrangement,)e(and)396 396 y(mer)o(ging)h(contrib)n(utions)h(from)g
(others,)g(and)h(is)h(no)n(w)e(the)i(primary)d(maintainer)h(of)h
(Etherboot.)-2 456 y
SDict begin H.S end
 -2 456 a -2 456 a
SDict begin 13 H.A end
 -2 456 a -2 456
a
SDict begin [ /View [/XYZ H.V] /Dest (403) cvn H.B /DEST pdfmark end
 -2 456 a 396 546 a Fh(In)g(the)g(early)g(days,)g(the)g(Etherboot)e
(web)i(page)g(w)o(as)h(hosted)e(by)h(the)2408 546 y
SDict begin H.S end
 2408
546 a 2408 546 a
SDict begin 13 H.A end
 2408 546 a 2408 546 a
SDict begin [ /View [/XYZ H.V] /Dest (404) cvn H.B /DEST pdfmark end
 2408 546 a Fh(Sydne)o(y)f(Linux)
g(Users)i(Group)396 654 y(\(http://www)-5 b(.slug.or)o(g.au/\))15
b(web)21 b(site.)f(Quite)h(coincidentally)d(and)h(unrelatedly)-5
b(,)18 b(Jamie)i(Honan)g(is)h(one)e(of)h(the)396 762
y(founding)e(members)h(of)h(SLUG,)g(so)h(the)f(story)g(has)g(come)g(a)g
(full)g(circle)h(here.)e(Since)h(April)g(2000,)f(Etherboot)f(has)396
869 y(been)i(hosted)f(at)892 869 y
SDict begin H.S end
 892 869 a 892 869
a
SDict begin 13 H.A end
 892 869 a 892 869 a
SDict begin [ /View [/XYZ H.V] /Dest (405) cvn H.B /DEST pdfmark end
 892 869 a Fh(Sourcefor)o(ge)e(\(http://sourcefor)
o(ge.net/\).)e(Sourcefor)o(ge)i(has)j(pro)o(vided)e(superb)h(f)o
(acilities)i(for)396 977 y(hosting)f(community)e(Open)h(Source)g(de)n
(v)o(elopment.)-2 1037 y
SDict begin H.S end
 -2 1037 a -2 1037 a
SDict begin 13 H.A end
 -2 1037
a -2 1037 a
SDict begin [ /View [/XYZ H.V] /Dest (tagged) cvn H.B /DEST pdfmark
end
 -2 1037 a 418 x Fa(A.)48 b(Draft)g(Net)g(Boot)h(Ima)n(g)r
(e)f(Pr)m(oposal)f(0.3,)g(J)m(une)g(15,)-2 1679 y(1997)382
1679 y
SDict begin H.S end
 382 1679 a 382 1679 a
SDict begin 26.957 H.A end
 382 1679 a 382 1679 a
SDict begin [ /View [/XYZ H.V] /Dest (1.0) cvn H.B /DEST pdfmark end
 382
1679 a -2 1767 a
SDict begin H.S end
 -2 1767 a -2 1767 a
SDict begin 13 H.A end
 -2 1767 a -2 1767
a
SDict begin [ /View [/XYZ H.V] /Dest (408) cvn H.B /DEST pdfmark end
 -2 1767 a -2 1767 a
SDict begin H.S end
 -2 1767 a -2 1767 a
SDict begin 13 H.A end
 -2 1767 a -2
1767 a
SDict begin [ /View [/XYZ H.V] /Dest (409) cvn H.B /DEST pdfmark end
 -2 1767 a 396 1873 a Fh(Jamie)21 b(Honan)e(and)g(Gero)h(K)o
(uhlmann,)e(gero)h(A)-9 b(T)20 b(minix)g(PERIOD)g(han)g(PERIOD)h(de)-2
1932 y
SDict begin H.S end
 -2 1932 a -2 1932 a
SDict begin 13 H.A end
 -2 1932 a -2 1932 a
SDict begin [ /View [/XYZ H.V] /Dest (411) cvn H.B /DEST pdfmark end
 -2 1932
a 396 2022 a Fh(In)f(order)f(to)h(pro)o(vide)f(more)g(functionality)f
(to)i(the)h(boot)e(rom)g(code)h(Jamie')-5 b(s)21 b(draft)e(has)i(been)e
(changed)g(a)h(little)h(bit.)396 2130 y(All)g(of)f(Gero)g(K)o(uhmnann')
-5 b(s)18 b(changes)h(are)h(preceded)e(and)i(follo)n(wed)f(by)2532
2130 y
SDict begin H.S end
 2532 2130 a 2532 2130 a
SDict begin 13 H.A end
 2532 2130 a 2532 2130
a
SDict begin [ /View [/XYZ H.V] /Dest (412) cvn H.B /DEST pdfmark end
 2532 2130 a Fe(\(gk\))p Fh(.)h(All)h(of)e(K)n(en)h(Y)-8
b(ap')j(s)21 b(changes)e(are)396 2238 y(preceded)g(and)g(follo)n(wed)g
(by)1275 2238 y
SDict begin H.S end
 1275 2238 a 1275 2238 a
SDict begin 13 H.A end
 1275 2238 a 1275
2238 a
SDict begin [ /View [/XYZ H.V] /Dest (413) cvn H.B /DEST pdfmark end
 1275 2238 a Fe(\(k)o(y\))p Fh(.)-2 2256 y
SDict begin H.S end
 -2 2256
a -2 2256 a
SDict begin 13 H.A end
 -2 2256 a -2 2256 a
SDict begin [ /View [/XYZ H.V] /Dest (414) cvn H.B /DEST pdfmark end
 -2 2256 a 359 x Fi(A.1.)39
b(Preamb)o(le)e(-)j(the)f(wh)m(y)1605 2615 y
SDict begin H.S end
 1605 2615
a 1605 2615 a
SDict begin 22.464 H.A end
 1605 2615 a 1605 2615 a
SDict begin [ /View [/XYZ H.V] /Dest (1.9.1) cvn H.B /DEST pdfmark
end
 1605 2615 a -2
2717 a
SDict begin H.S end
 -2 2717 a -2 2717 a
SDict begin 13 H.A end
 -2 2717 a -2 2717 a
SDict begin [ /View [/XYZ H.V] /Dest (416) cvn H.B /DEST pdfmark end
 -2 2717
a 396 2795 a Fh(Whilst)21 b(researching)e(what)h(other)f(boot)h(proms)f
(do)h(\(at)g(least)h(those)f(implementing)e(TCP/IP)j(protocols\))d(it)j
(is)g(clear)396 2903 y(that)g(each)e(')l(does)h(their)g(o)n(wn)f
(thing')g(in)i(terms)f(of)g(what)g(the)o(y)g(e)o(xpect)f(in)h(a)h(boot)
e(image.)-2 2962 y
SDict begin H.S end
 -2 2962 a -2 2962 a
SDict begin 13 H.A end
 -2 2962 a -2 2962
a
SDict begin [ /View [/XYZ H.V] /Dest (417) cvn H.B /DEST pdfmark end
 -2 2962 a 396 3052 a Fh(If)h(we)h(could)e(all)i(agree)e(on)h(w)o
(orking)f(to)n(w)o(ard)g(an)h(open)f(standard,)g(O/S)i(suppliers)f(and)
f(boot)h(rom)f(suppliers)h(can)396 3160 y(b)n(uild)g(their)g(products)f
(to)h(this)h(norm,)d(and)i(be)g(con\002dent)f(that)h(the)o(y)g(will)h
(w)o(ork)e(with)i(each)e(other)-5 b(.)-2 3220 y
SDict begin H.S end
 -2 3220
a -2 3220 a
SDict begin 13 H.A end
 -2 3220 a -2 3220 a
SDict begin [ /View [/XYZ H.V] /Dest (418) cvn H.B /DEST pdfmark end
 -2 3220 a 396 3309 a
Fh(This)21 b(is)g(a)f(description)f(of)h(ho)n(w)g(I)g(will)h(implement)
e(the)h(boot)f(rom)h(for)g(Linux.)e(I)j(belie)n(v)o(e)e(it)i(to)f(be)g
(\003e)o(xible)g(enough)396 3417 y(for)g(an)o(y)f(OS)i(that)f(will)h
(be)f(loaded)g(when)f(a)i(PC)g(boots)f(from)f(a)h(netw)o(ork)f(in)i
(the)f(TCP/IP)h(en)m(vironment.)-2 3477 y
SDict begin H.S end
 -2 3477 a -2
3477 a
SDict begin 13 H.A end
 -2 3477 a -2 3477 a
SDict begin [ /View [/XYZ H.V] /Dest (419) cvn H.B /DEST pdfmark end
 -2 3477 a 396 3567 a Fh(It)g(w)o(ould)e(be)h
(good)f(if)i(this)f(could)g(be)g(turned)f(into)h(some)g(form)f(of)h
(standard.)-2 3626 y
SDict begin H.S end
 -2 3626 a -2 3626 a
SDict begin 13 H.A end
 -2 3626 a -2
3626 a
SDict begin [ /View [/XYZ H.V] /Dest (420) cvn H.B /DEST pdfmark end
 -2 3626 a 396 3716 a Fh(This)h(is)g(v)o(ery)e(much)g(a)i
(\002rst)g(draft.)e(I)h(am)g(in)m(viting)f(comment.)-2
3776 y
SDict begin H.S end
 -2 3776 a -2 3776 a
SDict begin 13 H.A end
 -2 3776 a -2 3776 a
SDict begin [ /View [/XYZ H.V] /Dest (421) cvn H.B /DEST pdfmark end
 -2 3776
a 396 3866 a Fh(The)h(ideas)g(presented)f(here)h(should)f(be)h
(independant)e(of)i(an)o(y)f(implementation.)f(In)i(the)g(end,)f(where)
h(there)g(is)h(a)396 3974 y(con\003ict)f(between)f(the)i(\002nal)f(of)g
(this)h(draft,)e(and)h(an)g(implementation,)d(this)k(description)e
(should)g(pre)n(v)n(ail.)-2 4033 y
SDict begin H.S end
 -2 4033 a -2 4033
a
SDict begin 13 H.A end
 -2 4033 a -2 4033 a
SDict begin [ /View [/XYZ H.V] /Dest (422) cvn H.B /DEST pdfmark end
 -2 4033 a 396 4123 a Fh(The)h(terms)g(I)h(use)f
(are)g(de\002ned)f(at)i(the)f(end.)-2 4165 y
SDict begin H.S end
 -2 4165
a -2 4165 a
SDict begin 13 H.A end
 -2 4165 a -2 4165 a
SDict begin [ /View [/XYZ H.V] /Dest (423) cvn H.B /DEST pdfmark end
 -2 4165 a -2 4165 a
SDict begin H.S end
 -2
4165 a -2 4165 a
SDict begin 13 H.A end
 -2 4165 a -2 4165 a
SDict begin [ /View [/XYZ H.V] /Dest (424) cvn H.B /DEST pdfmark end
 -2 4165 a 396 4273
a Fe(\(gk\))p Fh(IMPOR)-5 b(T)d(ANT)19 b(NO)m(TE:)g(The)g(scope)g(of)g
(this)h(document)e(starts)i(at)g(the)g(point)f(where)f(the)i(net)g
(boot)e(process)h(gains)396 4380 y(control)g(from)g(the)h(BIOS,)g(to)g
(where)f(the)h(booted)f(image)g(reaches)g(a)i(state)f(from)f(which)g
(there)h(is)h(no)e(return)g(to)h(the)g(net)396 4488 y(boot)g(program)e
(possible.)1161 4488 y
SDict begin H.S end
 1161 4488 a 1161 4488 a
SDict begin 13 H.A end
 1161 4488
a 1161 4488 a
SDict begin [ /View [/XYZ H.V] /Dest (425) cvn H.B /DEST pdfmark end
 1161 4488 a Fe(\(gk\))-2 4548 y
SDict begin H.S end
 -2 4548
a -2 4548 a
SDict begin 13 H.A end
 -2 4548 a -2 4548 a
SDict begin [ /View [/XYZ H.V] /Dest (426) cvn H.B /DEST pdfmark end
 -2 4548 a 359 x Fi(A.2.)39
b(The)g(tar)n(g)q(et)995 4907 y
SDict begin H.S end
 995 4907 a 995 4907 a
SDict begin 22.464 H.A end

995 4907 a 995 4907 a
SDict begin [ /View [/XYZ H.V] /Dest (1.10.1) cvn H.B /DEST pdfmark
end
 995 4907 a -2 5011 a
SDict begin H.S end
 -2 5011 a
-2 5011 a
SDict begin 13 H.A end
 -2 5011 a -2 5011 a
SDict begin [ /View [/XYZ H.V] /Dest (428) cvn H.B /DEST pdfmark end
 -2 5011 a 396 5087 a Fh(The)20
b(tar)o(get)f(is)j(to)e(ha)n(v)o(e)f(a)i(PC)g(retrie)n(v)o(e)e(a)i
(boot)e(image)h(from)f(a)i(netw)o(ork)e(in)h(the)g(TCP/IP)h(en)m
(vironment.)p Black 3797 5569 a Fe(17)p Black eop end
%%Page: 18 18
TeXDict begin 18 17 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.18) cvn H.B /DEST pdfmark
end
 -2 -102 a Black -2 -201
a
SDict begin H.S end
 -2 -201 a -2 -201 a
SDict begin 13 H.A end
 -2 -201 a -2 -201 a
SDict begin [ /View [/XYZ H.V] /Dest (455) cvn H.B /DEST pdfmark end
 -2 -201 a 2875
-132 a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p
Black -2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (429) cvn H.B /DEST pdfmark end
 -2
-11 a -2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (430) cvn H.B /DEST pdfmark end
 -2
-11 a 396 72 a Fe(\(gk\))p Fh(The)f(boot)g(may)h(tak)o(e)g(place)g
(from)f(a)i(netw)o(ork)e(adaptor)g(rom,)g(from)g(a)i(boot)e(\003opp)o
(y)-5 b(.)2980 72 y
SDict begin H.S end
 2980 72 a 2980 72 a
SDict begin 13 H.A end
 2980 72 a 2980
72 a
SDict begin [ /View [/XYZ H.V] /Dest (431) cvn H.B /DEST pdfmark end
 2980 72 a Fe(\(gk\))-2 132 y
SDict begin H.S end
 -2 132 a -2 132 a
SDict begin 13 H.A end
 -2
132 a -2 132 a
SDict begin [ /View [/XYZ H.V] /Dest (432) cvn H.B /DEST pdfmark end
 -2 132 a 359 x Fi(A.3.)39 b(Net)g(Boot)f(Pr)m(ocess)h
(Description)2326 491 y
SDict begin H.S end
 2326 491 a 2326 491 a
SDict begin 22.464 H.A end
 2326 491
a 2326 491 a
SDict begin [ /View [/XYZ H.V] /Dest (1.11.1) cvn H.B /DEST pdfmark
end
 2326 491 a -2 593 a
SDict begin H.S end
 -2 593 a -2 593 a
SDict begin 13 H.A end
 -2
593 a -2 593 a
SDict begin [ /View [/XYZ H.V] /Dest (434) cvn H.B /DEST pdfmark end
 -2 593 a -2 593 a
SDict begin H.S end
 -2 593 a -2 593 a
SDict begin 13 H.A end
 -2
593 a -2 593 a
SDict begin [ /View [/XYZ H.V] /Dest (435) cvn H.B /DEST pdfmark end
 -2 593 a 396 671 a Fe(\(gk\))p Fh(The)19
b(net)h(boot)f(process)h(is)h(started)f(as)h(a)f(result)g(of)g(the)g
(PC)h(boot)f(process.)f(The)h(net)g(boot)f(program)f(can)i(reside)g(on)
396 779 y(a)h(rom,)e(e.g.)h(on)g(an)g(adaptor)e(card,)i(or)g(in)g(ram)g
(as)h(a)f(result)h(of)f(reading)e(of)n(f)i(disk.)2740
779 y
SDict begin H.S end
 2740 779 a 2740 779 a
SDict begin 13 H.A end
 2740 779 a 2740 779 a
SDict begin [ /View [/XYZ H.V] /Dest (436) cvn H.B /DEST pdfmark end
 2740
779 a Fe(\(gk\))-2 838 y
SDict begin H.S end
 -2 838 a -2 838 a
SDict begin 13 H.A end
 -2 838 a -2
838 a
SDict begin [ /View [/XYZ H.V] /Dest (437) cvn H.B /DEST pdfmark end
 -2 838 a 396 928 a Fh(The)g(boot)f(process)h(may)g(e)o(x)o(ecute)
f(in)h(an)o(y)f(mode)h(\(e.g.)f(8086,)g(80386\))f(it)i(desires.)g(When)
h(it)f(jumps)g(to)h(the)f(start)396 1036 y(location)g(in)g(the)g(boot)f
(image,)h(it)h(must)f(be)g(in)g(8086)f(mode)g(and)h(be)g(capable)g(of)f
(going)g(into)h(an)o(y)g(mode)f(supported)f(by)396 1144
y(the)i(underlying)e(processor)-5 b(.)-2 1203 y
SDict begin H.S end
 -2 1203
a -2 1203 a
SDict begin 13 H.A end
 -2 1203 a -2 1203 a
SDict begin [ /View [/XYZ H.V] /Dest (438) cvn H.B /DEST pdfmark end
 -2 1203 a 396 1293 a
Fh(The)20 b(image)g(cannot)f(be)h(loaded)f(into)h(address)g(spaces)g
(belo)n(w)g(10000h,)d(or)j(between)g(A0000h)e(through)g(FFFFFh,)j(or)
396 1401 y(between)f(98000h)d(through)h(9FFFFh.)1551
1401 y
SDict begin H.S end
 1551 1401 a 1551 1401 a
SDict begin 13 H.A end
 1551 1401 a 1551 1401
a
SDict begin [ /View [/XYZ H.V] /Dest (439) cvn H.B /DEST pdfmark end
 1551 1401 a Fe(\(gk\))p Fh(Only)h(when)g(the)h(image)g(is)h(not)e
(going)g(to)h(return)f(to)h(the)h(boot)e(process,)g(all)396
1509 y(the)h(memory)f(is)i(a)n(v)n(ailable)f(to)g(it)h(once)f(it)g(has)
h(been)e(started,)h(so)h(it)g(can)f(relocate)f(parts)h(of)g(itself)h
(to)f(these)h(areas.)3686 1509 y
SDict begin H.S end
 3686 1509 a 3686 1509
a
SDict begin 13 H.A end
 3686 1509 a 3686 1509 a
SDict begin [ /View [/XYZ H.V] /Dest (440) cvn H.B /DEST pdfmark end
 3686 1509 a Fe(\(gk\))-2 1569
y
SDict begin H.S end
 -2 1569 a -2 1569 a
SDict begin 13 H.A end
 -2 1569 a -2 1569 a
SDict begin [ /View [/XYZ H.V] /Dest (441) cvn H.B /DEST pdfmark end
 -2 1569 a 396
1659 a Fh(The)f(boot)f(process)h(must)g(be)h(capable)e(of)h(loading)f
(the)h(image)f(into)h(all)h(other)f(memory)e(locations.)h
(Speci\002cally)-5 b(,)396 1767 y(where)20 b(the)g(machine)f(supports)g
(this,)i(this)f(means)g(memory)f(o)o(v)o(er)g(100000h.)-2
1826 y
SDict begin H.S end
 -2 1826 a -2 1826 a
SDict begin 13 H.A end
 -2 1826 a -2 1826 a
SDict begin [ /View [/XYZ H.V] /Dest (442) cvn H.B /DEST pdfmark end
 -2 1826
a 396 1916 a Fh(The)h(net)g(boot)g(process)f(must)i(e)o(x)o(ecute)d
(the)j(bootp)e(protocol,)f(follo)n(wed)h(by)g(the)i(tftp)f(protocol,)e
(as)j(de\002ned)e(in)h(the)396 2024 y(rele)n(v)n(ant)f(rfc')-5
b(s.)-2 2066 y
SDict begin H.S end
 -2 2066 a -2 2066 a
SDict begin 13 H.A end
 -2 2066 a -2 2066
a
SDict begin [ /View [/XYZ H.V] /Dest (443) cvn H.B /DEST pdfmark end
 -2 2066 a 396 2173 a Fh(The)20 b(\002le)h(name)f(used)f(in)i(the)f
(tftp)g(protocol)f(must)h(be)g(that)g(gi)n(v)o(en)f(by)h(the)g(bootp)f
(record.)-2 2233 y
SDict begin H.S end
 -2 2233 a -2 2233 a
SDict begin 13 H.A end
 -2 2233 a -2 2233
a
SDict begin [ /View [/XYZ H.V] /Dest (444) cvn H.B /DEST pdfmark end
 -2 2233 a 396 2323 a Fh(If)h(less)i(than)d(512)h(bytes)g(are)g
(loaded,)f(the)h(net)g(boot)f(process)h(attempts)g(to)h(display)e(on)h
(the)g(screen)g(an)o(y)f(ascii)i(data)f(at)396 2431 y(the)g(start)h(of)
f(the)g(image.)g(The)g(net)g(boot)f(process)h(then)g(e)o(xits)g(in)g
(the)g(normal)f(manner)-5 b(.)19 b(F)o(or)h(a)h(boot)e(prom,)g(this)i
(will)396 2539 y(allo)n(w)f(normal)f(disk)i(booting.)1310
2539 y
SDict begin H.S end
 1310 2539 a 1310 2539 a
SDict begin 13 H.A end
 1310 2539 a 1310 2539
a
SDict begin [ /View [/XYZ H.V] /Dest (445) cvn H.B /DEST pdfmark end
 1310 2539 a Fe(\(gk\))p Fh(Reference)d(to)i(DOS)h(deleted.)2335
2539 y
SDict begin H.S end
 2335 2539 a 2335 2539 a
SDict begin 13 H.A end
 2335 2539 a 2335 2539
a
SDict begin [ /View [/XYZ H.V] /Dest (446) cvn H.B /DEST pdfmark end
 2335 2539 a Fe(\(gk\))-2 2598 y
SDict begin H.S end
 -2 2598 a -2 2598 a
SDict begin 13 H.A end

-2 2598 a -2 2598 a
SDict begin [ /View [/XYZ H.V] /Dest (447) cvn H.B /DEST pdfmark end
 -2 2598 a 396 2688 a Fh(When)f(the)g(\002rst)h(512)
f(bytes)g(ha)n(v)o(e)f(been)h(loaded,)f(the)h(boot)f(process)h(checks)g
(for)f(an)h(initial)h(magic)e(number)m(,)f(which)i(is)396
2796 y(de\002ned)f(later)-5 b(.)21 b(If)f(this)h(number)d(is)j
(present,)e(the)i(net)f(process)g(continues)f(loading)f(under)h(the)h
(control)f(of)h(the)g(image)396 2904 y(format.)f(The)h(image,)f(which)h
(is)h(described)e(later)m(,)h(tells)h(the)f(net)g(boot)g(process)f
(where)h(to)g(put)g(this)h(record)e(and)g(all)396 3012
y(subsequent)g(data.)-2 3071 y
SDict begin H.S end
 -2 3071 a -2 3071 a
SDict begin 13 H.A end
 -2
3071 a -2 3071 a
SDict begin [ /View [/XYZ H.V] /Dest (448) cvn H.B /DEST pdfmark end
 -2 3071 a 396 3161 a Fh(If)h(no)g(initial)h(magic)e
(number)g(is)i(present)e(the)i(net)f(boot)f(process)h(checks)f(for)h(a)
h(second)e(magic)h(number)e(at)j(of)n(fset)396 3269 y(510.)e(If)h(the)h
(magic)e(number)g(510)g(=)h(55h,)g(511)f(=)h(AAh,)g(then)g(the)g(net)g
(process)g(continues.)f(If)h(this)h(second)e(magic)396
3377 y(number)g(is)i(not)f(present,)f(then)h(the)g(net)g(boot)f
(process)h(terminates)g(the)g(tftp)g(protocol,)e(displays)i(an)g(error)
f(message)396 3485 y(and)h(e)o(xits)g(in)h(the)f(normal)f(manner)-5
b(.)-2 3528 y
SDict begin H.S end
 -2 3528 a -2 3528 a
SDict begin 13 H.A end
 -2 3528 a -2 3528 a
SDict begin [ /View [/XYZ H.V] /Dest (449) cvn H.B /DEST pdfmark end

-2 3528 a 396 3635 a Fh(If)20 b(no)g(initial)h(magic)e(number)g(is)i
(present)e(and)h(the)g(second)f(one)h(is,)h(the)f(net)g(boot)g(process)
f(relocates)h(the)h(512)e(bytes)396 3743 y(to)i(location)e(7c00h.)f
(The)i(net)g(boot)g(process)f(continues)g(to)i(load)e(an)o(y)h(further)
f(image)g(data)h(to)h(10000h)c(up.)j(This)g(data)396
3851 y(can)g(o)o(v)o(erwrite)f(the)h(\002rst)h(512)e(boot)g(bytes.)h
(If)g(the)g(image)g(reaches)g(98000h,)d(then)j(an)o(y)f(further)g(data)
h(is)h(continued)e(to)396 3958 y(be)h(loaded)f(abo)o(v)o(e)g(100000h.)e
(When)j(all)h(the)f(data)g(has)h(been)e(loaded,)g(the)h(net)g(boot)g
(process)f(jumps)h(to)h(location)396 4066 y(0:7c00.)-2
4109 y
SDict begin H.S end
 -2 4109 a -2 4109 a
SDict begin 13 H.A end
 -2 4109 a -2 4109 a
SDict begin [ /View [/XYZ H.V] /Dest (450) cvn H.B /DEST pdfmark end
 -2 4109
a -2 4109 a
SDict begin H.S end
 -2 4109 a -2 4109 a
SDict begin 13 H.A end
 -2 4109 a -2 4109 a
SDict begin [ /View [/XYZ H.V] /Dest (451) cvn H.B /DEST pdfmark end
 -2
4109 a 396 4216 a Fe(\(gk\))p Fh(When)e(the)h(net)g(boot)g(program)e
(calls)j(the)f(image,)f(it)i(places)f(2)h(f)o(ar)f(pointers)f(onto)g
(the)i(stack,)f(in)g(standard)f(intel)396 4324 y(order)g(\(e.g.)g(se)o
(gment:of)n(fset)g(representation\).)e(The)j(\002rst)h(f)o(ar)f
(pointer)f(which)h(immediately)f(follo)n(ws)g(the)i(return)396
4432 y(address)f(on)g(the)g(stack,)g(points)g(to)g(the)g(loaded)f(boot)
h(image)g(header)-5 b(.)19 b(The)h(second)f(f)o(ar)h(pointer)f(which)h
(is)h(placed)396 4540 y(abo)o(v)o(e)e(the)h(\002rst)h(one,)e(sho)n(ws)i
(to)f(the)g(memory)f(area)h(where)f(the)h(net)h(boot)e(process)h(sa)n
(v)o(ed)g(the)g(bootp)f(reply)-5 b(.)-2 4599 y
SDict begin H.S end
 -2 4599
a -2 4599 a
SDict begin 13 H.A end
 -2 4599 a -2 4599 a
SDict begin [ /View [/XYZ H.V] /Dest (452) cvn H.B /DEST pdfmark end
 -2 4599 a 396 4689 a
Fh(If)20 b(the)h(boot)e(image)h(is)h(\003agged)e(as)i(being)e
(returnable)f(to)j(the)f(boot)f(process,)h(the)g(boot)f(program)f(has)j
(to)f(pro)o(vide)e(the)396 4797 y(boot)i(image)f(with)i(interrupt)d(v)o
(ector)h(78h.)g(It')-5 b(s)21 b(an)f(interf)o(ace)g(to)g(services)g
(pro)o(vided)e(by)i(the)g(net)g(boot)f(program)f(\(see)396
4905 y(belo)n(w)i(for)f(further)g(description\).)p Black
3800 5569 a Fe(18)p Black eop end
%%Page: 19 19
TeXDict begin 19 18 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.19) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
-2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (453) cvn H.B /DEST pdfmark end
 -2 -11 a
396 72 a Fh(If)g(the)h(boot)e(image)h(is)h(not)f(\003agged)f(as)i
(being)e(returnable)f(to)j(the)f(boot)f(process,)h(before)e(the)j(boot)
e(image)h(is)h(called,)396 180 y(the)f(boot)g(program)e(has)i(to)h(set)
g(the)f(system)g(into)g(a)h(state)g(in)f(which)g(it)h(w)o(as)g(before)d
(the)j(net)f(boot)f(process)h(has)396 288 y(started.)639
288 y
SDict begin H.S end
 639 288 a 639 288 a
SDict begin 13 H.A end
 639 288 a 639 288 a
SDict begin [ /View [/XYZ H.V] /Dest (454) cvn H.B /DEST pdfmark end
 639 288
a Fe(\(gk\))-2 347 y
SDict begin H.S end
 -2 347 a -2 347 a
SDict begin 13 H.A end
 -2 347 a -2 347
a
SDict begin [ /View [/XYZ H.V] /Dest (455) cvn H.B /DEST pdfmark end
 -2 347 a 360 x Fi(A.4.)39 b(Ima)o(g)q(e)f(Format)g(with)h(Initial)g
(Ma)o(gic)f(Number)-9 b(.)3043 707 y
SDict begin H.S end
 3043 707 a 3043
707 a
SDict begin 22.464 H.A end
 3043 707 a 3043 707 a
SDict begin [ /View [/XYZ H.V] /Dest (1.12.1) cvn H.B /DEST pdfmark
end
 3043 707 a -2 811 a
SDict begin H.S end
 -2 811
a -2 811 a
SDict begin 13 H.A end
 -2 811 a -2 811 a
SDict begin [ /View [/XYZ H.V] /Dest (457) cvn H.B /DEST pdfmark end
 -2 811 a 396 887 a Fh(The)20
b(\002rst)h(512)e(bytes)h(of)g(the)g(image)g(\002le)h(contain)e(the)h
(image)g(header)m(,)e(and)i(image)g(loading)f(information)e(records.)
396 995 y(This)k(contains)e(all)i(the)f(information)e(needed)h(by)h
(the)g(net)g(boot)f(process)h(as)h(to)f(where)g(data)g(is)h(to)f(be)h
(loaded.)-2 1054 y
SDict begin H.S end
 -2 1054 a -2 1054 a
SDict begin 13 H.A end
 -2 1054 a -2 1054
a
SDict begin [ /View [/XYZ H.V] /Dest (458) cvn H.B /DEST pdfmark end
 -2 1054 a 396 1144 a Fh(The)f(magic)g(number)e(\(in)i(time-honoured)d
(tradition)i(\(well)h(why)g(not?\)\))f(is:)-2 1245 y
SDict begin H.S end

-2 1245 a -2 1245 a
SDict begin 11.7 H.A end
 -2 1245 a -2 1245 a
SDict begin [ /View [/XYZ H.V] /Dest (459) cvn H.B /DEST pdfmark end
 -2 1245 a 755
1324 a Fd(0)45 b(=)f(36h)755 1421 y(1)h(=)f(13h)755 1518
y(2)h(=)f(03h)755 1616 y(3)h(=)f(1Bh)396 1807 y Fh(Apart)20
b(from)f(the)h(tw)o(o)h(magic)f(numbers,)e(all)j(w)o(ords)f(and)f
(double)g(w)o(ords)h(are)g(in)g(PC)i(nati)n(v)o(e)d(endian.)-2
1866 y
SDict begin H.S end
 -2 1866 a -2 1866 a
SDict begin 13 H.A end
 -2 1866 a -2 1866 a
SDict begin [ /View [/XYZ H.V] /Dest (460) cvn H.B /DEST pdfmark end
 -2 1866
a 396 1956 a Fh(Including)f(the)i(initial)h(magic)f(number)e(the)i
(header)f(record)g(is:)-2 2057 y
SDict begin H.S end
 -2 2057 a -2 2057 a
SDict begin 11.7 H.A end

-2 2057 a -2 2057 a
SDict begin [ /View [/XYZ H.V] /Dest (461) cvn H.B /DEST pdfmark end
 -2 2057 a 755 2136 a Fd(+---------------------+)755
2233 y(|)941 b(|)755 2330 y(|)45 b(Initial)e(Magic)h(No.)134
b(|)90 b(4)44 b(bytes)755 2428 y(+---------------------+)755
2525 y(|)941 b(|)755 2622 y(|)45 b(Flags)f(and)g(length)178
b(|)90 b(double)44 b(word)755 2719 y(+---------------------+)755
2816 y(|)941 b(|)755 2913 y(|)45 b(Location)e(Address)178
b(|)90 b(double)44 b(word)g(in)g(ds:bx)g(format)755 3010
y(+---------------------+)755 3107 y(|)941 b(|)755 3205
y(|)45 b(Execute)e(Address)223 b(|)90 b(double)44 b(word)g(in)g(cs:ip)g
(format)755 3302 y(+---------------------+)396 3493 y
Fh(The)20 b(Location)f(address)h(is)h(where)e(to)i(place)f(the)g(512)f
(bytes.)h(The)g(net)g(boot)f(process)h(does)g(this)h(before)e(loading)f
(the)396 3601 y(rest)j(of)f(the)g(image.)f(The)h(location)g(address)f
(cannot)g(be)h(one)g(of)g(the)g(reserv)o(ed)f(locations)g(mentioned)g
(abo)o(v)o(e,)f(b)n(ut)396 3709 y(must)i(be)h(an)f(address)f(lo)n(wer)h
(than)g(100000h.)-2 3751 y
SDict begin H.S end
 -2 3751 a -2 3751 a
SDict begin 13 H.A end
 -2 3751
a -2 3751 a
SDict begin [ /View [/XYZ H.V] /Dest (462) cvn H.B /DEST pdfmark end
 -2 3751 a 396 3858 a Fh(The)g(rest)h(of)f(the)g(image)g
(must)g(not)g(o)o(v)o(erwrite)e(these)i(initial)h(512)e(bytes,)h
(placed)f(at)i(the)f(required)f(location.)g(The)396 3966
y(writing)h(of)g(data)g(by)g(the)g(net)g(boot)f(process)h(into)g(these)
g(512)g(bytes)g(is)h(deprecated.)d(These)i(512)f(bytes)h(must)g(be)396
4074 y(a)n(v)n(ailable)g(for)g(the)g(image)f(to)i(interogate)d(once)i
(it)h(is)g(loaded)e(and)g(running.)-2 4133 y
SDict begin H.S end
 -2 4133
a -2 4133 a
SDict begin 13 H.A end
 -2 4133 a -2 4133 a
SDict begin [ /View [/XYZ H.V] /Dest (463) cvn H.B /DEST pdfmark end
 -2 4133 a 396 4223 a
Fh(The)h(e)o(x)o(ecute)f(address)h(is)h(the)f(location)f(in)i(cs:ip)f
(of)g(the)g(initial)h(instruction)e(once)g(the)h(full)h(image)e(has)i
(been)e(loaded.)396 4331 y(This)i(must)f(be)g(lo)n(wer)g(than)f
(100000h,)f(since)i(the)g(initial)h(instructions)e(will)i(be)f(e)o(x)o
(ecuted)e(in)j(8086)d(mode.)h(When)h(the)396 4439 y(jump)g(\(actually)f
(a)i(f)o(ar)f(call\))g(is)h(made)f(to)g(the)g(boot)g(image,)f(the)h
(stack)h(contains)e(a)i(f)o(ar)f(return)f(address,)g(with)i(a)f(f)o(ar)
396 4547 y(pointer)f(parameter)g(abo)o(v)o(e)f(that,)i(pointing)f(to)h
(the)h(location)e(of)h(this)g(header)-5 b(.)-2 4607 y
SDict begin H.S end

-2 4607 a -2 4607 a
SDict begin 13 H.A end
 -2 4607 a -2 4607 a
SDict begin [ /View [/XYZ H.V] /Dest (464) cvn H.B /DEST pdfmark end
 -2 4607 a -2
4607 a
SDict begin H.S end
 -2 4607 a -2 4607 a
SDict begin 13 H.A end
 -2 4607 a -2 4607 a
SDict begin [ /View [/XYZ H.V] /Dest (465) cvn H.B /DEST pdfmark end
 -2 4607
a 396 4697 a Fe(\(k)o(y\))20 b Fh(If)f(bit)h(31)f(in)h(the)f(\003ags)h
(is)h(set,)f(then)f(the)g(e)o(x)o(ecute)f(address)h(is)i(interpreted)d
(as)i(a)g(linear)f(32-bit)g(address,)f(and)h(a)h(call)396
4804 y(is)h(made)f(to)g(this)h(address.)f(There)f(is)i(no)f
(restriction)f(on)h(the)g(range)f(of)h(the)g(e)o(x)o(ecute)f(address.)h
(The)g(ar)o(guments)e(to)i(the)396 4912 y(routine)f(are:)h(a)h(pointer)
e(to)h(an)g(Etherboot)f(speci\002c)h(header)m(,)e(a)j(pointer)e(to)h
(the)h(tagged)e(image)g(header)m(,)g(and)g(a)i(pointer)396
5020 y(to)g(the)f(bootp)f(reply)-5 b(.)18 b(The)i(called)g(routine)f
(may)h(return)f(to)h(the)h(boot)e(loader)-5 b(.)2629
5020 y
SDict begin H.S end
 2629 5020 a 2629 5020 a
SDict begin 13 H.A end
 2629 5020 a 2629 5020
a
SDict begin [ /View [/XYZ H.V] /Dest (466) cvn H.B /DEST pdfmark end
 2629 5020 a Fe(\(k)o(y\))-2 5080 y
SDict begin H.S end
 -2 5080 a -2 5080
a
SDict begin 13 H.A end
 -2 5080 a -2 5080 a
SDict begin [ /View [/XYZ H.V] /Dest (467) cvn H.B /DEST pdfmark end
 -2 5080 a 396 5170 a Fh(The)20
b(\003ags)h(and)e(length)h(\002eld)g(is)h(brok)o(en)e(up)g(in)i(the)f
(follo)n(wing)e(w)o(ay:)p Black 3800 5569 a Fe(19)p Black
eop end
%%Page: 20 20
TeXDict begin 20 19 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.20) cvn H.B /DEST pdfmark
end
 -2 -102 a Black -2 -201
a
SDict begin H.S end
 -2 -201 a -2 -201 a
SDict begin 13 H.A end
 -2 -201 a -2 -201 a
SDict begin [ /View [/XYZ H.V] /Dest (492) cvn H.B /DEST pdfmark end
 -2 -201 a 2875
-132 a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p
Black -2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (468) cvn H.B /DEST pdfmark end
 -2
-11 a 396 72 a Fh(Bits)i(0)e(to)g(3)h(\(lo)n(west)f(4)g(bits\))g
(de\002ne)g(the)g(length)g(of)g(the)g(non-v)o(endor)c(header)j(in)h
(double)f(w)o(ords.)h(Currently)f(the)396 180 y(v)n(alue)h(is)h(4.)-2
223 y
SDict begin H.S end
 -2 223 a -2 223 a
SDict begin 13 H.A end
 -2 223 a -2 223 a
SDict begin [ /View [/XYZ H.V] /Dest (469) cvn H.B /DEST pdfmark end
 -2 223 a 396
330 a Fh(Bits)h(4)e(to)g(7)h(de\002ne)e(the)i(length)e(required)f(by)i
(the)g(v)o(endor)e(e)o(xtra)i(information)e(in)i(double)f(w)o(ords.)g
(A)i(v)n(alue)e(of)h(zero)396 438 y(indicates)g(no)g(e)o(xtra)f(v)o
(endor)f(information.)-2 480 y
SDict begin H.S end
 -2 480 a -2 480 a
SDict begin 13 H.A end
 -2 480
a -2 480 a
SDict begin [ /View [/XYZ H.V] /Dest (470) cvn H.B /DEST pdfmark end
 -2 480 a -2 480 a
SDict begin H.S end
 -2 480 a -2 480 a
SDict begin 13 H.A end
 -2 480
a -2 480 a
SDict begin [ /View [/XYZ H.V] /Dest (471) cvn H.B /DEST pdfmark end
 -2 480 a 396 587 a Fe(\(gk\))p Fh(Bit)i(8)g(is)h(set)g(if)f
(the)g(boot)f(image)g(can)h(return)f(to)h(the)g(net)g(boot)f(process)g
(after)h(e)o(x)o(ecution.)d(If)j(this)g(bit)h(is)f(not)g(set)h(the)396
695 y(boot)f(image)f(does)h(ne)n(v)o(er)f(return)g(to)h(the)h(net)f
(boot)f(process,)h(and)f(the)i(net)f(boot)f(program)f(has)j(to)f(set)h
(the)f(system)g(into)396 803 y(a)h(clean)f(state)h(before)e(calling)g
(the)h(boot)g(image.)1818 803 y
SDict begin H.S end
 1818 803 a 1818 803 a
SDict begin 13 H.A end

1818 803 a 1818 803 a
SDict begin [ /View [/XYZ H.V] /Dest (472) cvn H.B /DEST pdfmark end
 1818 803 a Fe(\(gk\))-2 863 y
SDict begin H.S end
 -2
863 a -2 863 a
SDict begin 13 H.A end
 -2 863 a -2 863 a
SDict begin [ /View [/XYZ H.V] /Dest (473) cvn H.B /DEST pdfmark end
 -2 863 a -2 863 a
SDict begin H.S end
 -2
863 a -2 863 a
SDict begin 13 H.A end
 -2 863 a -2 863 a
SDict begin [ /View [/XYZ H.V] /Dest (474) cvn H.B /DEST pdfmark end
 -2 863 a 396 953 a Fe(\(k)o(y\))p
Fh(Bit)h(31)f(is)h(set)g(if)f(the)g(e)o(x)o(ecute)f(address)h(of)g(the)
g(boot)f(image)h(is)h(a)g(linear)f(32-bit)f(address)g(to)i(be)f
(called.)g(The)f(boot)396 1060 y(image)h(may)g(return)f(to)h(the)g
(boot)g(loader)-5 b(.)1604 1060 y
SDict begin H.S end
 1604 1060 a 1604 1060
a
SDict begin 13 H.A end
 1604 1060 a 1604 1060 a
SDict begin [ /View [/XYZ H.V] /Dest (475) cvn H.B /DEST pdfmark end
 1604 1060 a Fe(\(k)o(y\))-2
1120 y
SDict begin H.S end
 -2 1120 a -2 1120 a
SDict begin 13 H.A end
 -2 1120 a -2 1120 a
SDict begin [ /View [/XYZ H.V] /Dest (476) cvn H.B /DEST pdfmark end
 -2 1120
a -2 1120 a
SDict begin H.S end
 -2 1120 a -2 1120 a
SDict begin 13 H.A end
 -2 1120 a -2 1120 a
SDict begin [ /View [/XYZ H.V] /Dest (477) cvn H.B /DEST pdfmark end
 -2
1120 a 396 1210 a Fe(\(gk+k)o(y\))p Fh(Bits)20 b(9)h(to)f(30)g(are)g
(reserv)o(ed)f(for)g(future)g(use)i(and)e(must)i(be)f(set)h(to)f(zero.)
2741 1210 y
SDict begin H.S end
 2741 1210 a 2741 1210 a
SDict begin 13 H.A end
 2741 1210 a 2741
1210 a
SDict begin [ /View [/XYZ H.V] /Dest (478) cvn H.B /DEST pdfmark end
 2741 1210 a Fe(\(gk+k)o(y\))-2 1268 y
SDict begin H.S end
 -2 1268
a -2 1268 a
SDict begin 13 H.A end
 -2 1268 a -2 1268 a
SDict begin [ /View [/XYZ H.V] /Dest (479) cvn H.B /DEST pdfmark end
 -2 1268 a 396 1359 a
Fh(After)g(this)h(header)m(,)d(and)i(an)o(y)f(v)o(endor)f(header)m(,)h
(come)g(the)i(image)e(loading)g(information)f(records.)h(These)h
(specify)396 1467 y(where)g(data)g(is)h(to)f(be)h(loaded,)d(ho)n(w)i
(long)f(it)i(is,)g(and)f(communicates)e(to)j(the)f(loaded)f(image)g
(what)i(sort)f(of)g(data)g(it)h(is.)-2 1527 y
SDict begin H.S end
 -2 1527
a -2 1527 a
SDict begin 13 H.A end
 -2 1527 a -2 1527 a
SDict begin [ /View [/XYZ H.V] /Dest (480) cvn H.B /DEST pdfmark end
 -2 1527 a 396 1617 a
Fh(The)f(format)f(of)h(each)g(image)g(loading)e(information)g(record)h
(is)i(:)-2 1718 y
SDict begin H.S end
 -2 1718 a -2 1718 a
SDict begin 11.7 H.A end
 -2 1718 a -2 1718
a
SDict begin [ /View [/XYZ H.V] /Dest (481) cvn H.B /DEST pdfmark end
 -2 1718 a 845 1797 a Fd(+---------------------+)845
1894 y(|)44 b(Flags,)g(tags)g(and)224 b(|)89 b(double)44
b(word)845 1991 y(|)g(lengths)582 b(|)845 2088 y
(+---------------------+)845 2185 y(|)941 b(|)845 2283
y(|)44 b(Load)g(Address)358 b(|)89 b(double)44 b(word)845
2380 y(+---------------------+)845 2477 y(|)941 b(|)845
2574 y(|)44 b(Image)g(Length)358 b(|)89 b(double)44 b(word)845
2671 y(+---------------------+)845 2768 y(|)941 b(|)845
2865 y(|)44 b(Memory)g(Length)313 b(|)89 b(double)44
b(word)845 2962 y(+---------------------+)396 3153 y
Fh(Each)20 b(image)g(loading)e(information)g(record)h(follo)n(ws)h(the)
g(pre)n(vious,)e(or)i(the)g(header)-5 b(.)-2 3213 y
SDict begin H.S end
 -2
3213 a -2 3213 a
SDict begin 13 H.A end
 -2 3213 a -2 3213 a
SDict begin [ /View [/XYZ H.V] /Dest (482) cvn H.B /DEST pdfmark end
 -2 3213 a 396 3303
a Fh(The)20 b(memory)e(length,)g(image)i(length)f(and)g(load)g(address)
g(\002elds)i(are)e(unsigned)g(32)g(numbers.)f(The)o(y)h(do)g(not)h(ha)n
(v)o(e)f(the)396 3411 y(se)o(gment:of)n(fset)g(format)g(used)h(by)f
(the)i(8086.)-2 3470 y
SDict begin H.S end
 -2 3470 a -2 3470 a
SDict begin 13 H.A end
 -2 3470 a
-2 3470 a
SDict begin [ /View [/XYZ H.V] /Dest (483) cvn H.B /DEST pdfmark end
 -2 3470 a 396 3560 a Fh(The)f(\003ags,)g(tags)h(and)f
(lengths)f(\002eld)i(is)g(brok)o(en)d(up)i(as)h(follo)n(ws:)-2
3620 y
SDict begin H.S end
 -2 3620 a -2 3620 a
SDict begin 13 H.A end
 -2 3620 a -2 3620 a
SDict begin [ /View [/XYZ H.V] /Dest (484) cvn H.B /DEST pdfmark end
 -2 3620
a 396 3710 a Fh(Bits)h(0)e(to)g(3)h(\(lo)n(west)f(4)g(bits\))g(are)h
(the)f(length)f(of)h(the)g(non)f(v)o(endor)g(part)g(of)h(this)h(header)
e(in)h(double)f(w)o(ords.)h(Currently)396 3818 y(this)h(v)n(alue)e(is)j
(4.)-2 3860 y
SDict begin H.S end
 -2 3860 a -2 3860 a
SDict begin 13 H.A end
 -2 3860 a -2 3860 a
SDict begin [ /View [/XYZ H.V] /Dest (485) cvn H.B /DEST pdfmark end

-2 3860 a 396 3967 a Fh(Bits)g(4)e(to)g(7)h(indicate)e(the)i(length)e
(of)h(an)o(y)f(v)o(endor)f(information,)g(in)i(double)f(w)o(ords.)-2
4027 y
SDict begin H.S end
 -2 4027 a -2 4027 a
SDict begin 13 H.A end
 -2 4027 a -2 4027 a
SDict begin [ /View [/XYZ H.V] /Dest (486) cvn H.B /DEST pdfmark end
 -2 4027
a 396 4116 a Fh(Bits)j(8)e(to)g(15)g(are)g(for)g(v)o(endor')-5
b(s)18 b(tags.)j(The)e(v)o(endor)g(tag)h(is)h(a)f(pri)n(v)n(ate)g
(number)e(that)i(the)h(loaded)e(image)g(can)h(use)h(to)396
4224 y(determine)e(what)h(sort)g(of)g(image)g(is)h(at)g(this)g
(particular)d(location.)-2 4284 y
SDict begin H.S end
 -2 4284 a -2 4284 a
SDict begin 13 H.A end

-2 4284 a -2 4284 a
SDict begin [ /View [/XYZ H.V] /Dest (487) cvn H.B /DEST pdfmark end
 -2 4284 a 396 4374 a Fh(Bits)k(16)e(to)g(23)g(are)g
(for)f(future)g(e)o(xpansion)g(and)g(should)g(be)i(set)g(to)f(zero.)-2
4433 y
SDict begin H.S end
 -2 4433 a -2 4433 a
SDict begin 13 H.A end
 -2 4433 a -2 4433 a
SDict begin [ /View [/XYZ H.V] /Dest (488) cvn H.B /DEST pdfmark end
 -2 4433
a 396 4523 a Fh(Bits)i(24)e(to)g(31)g(are)g(for)f(\003ags,)i(which)e
(are)i(de\002ned)e(later)-5 b(.)-2 4583 y
SDict begin H.S end
 -2 4583 a -2
4583 a
SDict begin 13 H.A end
 -2 4583 a -2 4583 a
SDict begin [ /View [/XYZ H.V] /Dest (489) cvn H.B /DEST pdfmark end
 -2 4583 a 396 4673 a Fh(V)c(endors)19
b(may)h(place)g(further)e(information)g(after)i(this)h(information)d
(record,)g(and)i(before)e(the)j(ne)o(xt.)e(Each)396 4781
y(information)f(record)h(may)h(ha)n(v)o(e)f(a)i(dif)n(ferent)d(v)o
(endor)g(length.)-2 4840 y
SDict begin H.S end
 -2 4840 a -2 4840 a
SDict begin 13 H.A end
 -2 4840
a -2 4840 a
SDict begin [ /View [/XYZ H.V] /Dest (490) cvn H.B /DEST pdfmark end
 -2 4840 a 396 4930 a Fh(There)i(are)g(tw)o(o)g
(restrictions)g(on)g(v)o(endor)e(information.)p Black
3800 5569 a Fe(20)p Black eop end
%%Page: 21 21
TeXDict begin 21 20 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.21) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
-2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (491) cvn H.B /DEST pdfmark end
 -2 -11 a
396 72 a Fh(One)g(is)h(that)g(the)f(header)f(and)h(all)g(information)e
(records)h(that)i(the)f(net)g(boot)f(process)h(is)h(to)g(use)f(f)o(all)
h(within)e(the)i(\002rst)396 180 y(512)f(bytes.)396 330
y(The)g(second)f(restriction)h(is)h(that)f(the)g(net)h(boot)e(process)h
(must)g(ignore)f(all)i(v)o(endor)d(additions.)h(The)h(net)g(boot)f
(process)396 438 y(may)h(not)g(o)o(v)o(erwrite)e(v)o(endor)g(supplied)h
(information,)f(or)i(other)f(unde\002ned)f(data)i(in)h(the)f(initial)h
(512)e(bytes.)-2 497 y
SDict begin H.S end
 -2 497 a -2 497 a
SDict begin 13 H.A end
 -2 497 a -2
497 a
SDict begin [ /View [/XYZ H.V] /Dest (493) cvn H.B /DEST pdfmark end
 -2 497 a 396 587 a Fh(The)h(\003ags)h(are)f(used)g(to)g(modify)f
(the)h(load)g(address)f(\002eld,)h(and)g(to)g(indicate)g(that)g(this)h
(is)g(the)f(last)h(information)d(record)396 695 y(that)j(the)f(net)g
(boot)f(process)h(should)f(use.)-2 755 y
SDict begin H.S end
 -2 755 a -2
755 a
SDict begin 13 H.A end
 -2 755 a -2 755 a
SDict begin [ /View [/XYZ H.V] /Dest (494) cvn H.B /DEST pdfmark end
 -2 755 a 396 845 a Fh(Bit)j(24)d(w)o(orks)h(in)
h(conjunction)c(with)k(bit)f(25)g(to)g(specify)g(the)g(meaning)f(of)h
(the)g(load)f(address.)-2 946 y
SDict begin H.S end
 -2 946 a -2 946 a
SDict begin 11.7 H.A end
 -2
946 a -2 946 a
SDict begin [ /View [/XYZ H.V] /Dest (495) cvn H.B /DEST pdfmark end
 -2 946 a 486 1025 a Fd(B24)179 b(B25)531
1219 y(0)224 b(0)179 b(load)44 b(address)g(is)g(an)h(absolute)e(32)i
(number)531 1413 y(1)224 b(0)179 b(add)44 b(the)h(load)f(address)f(to)i
(the)f(location)g(one)g(past)g(the)h(last)f(byte)710
1510 y(of)h(the)f(memory)g(area)g(required)f(by)i(the)f(last)g(image)g
(loaded.)710 1608 y(If)h(the)f(first)g(image,)g(then)g(add)g(to)h(512)f
(plus)g(the)h(location)710 1705 y(where)f(the)g(512)h(bytes)f(were)g
(placed)531 1899 y(0)224 b(1)179 b(subtract)43 b(the)i(load)f(address)g
(from)g(the)g(one)g(past)h(the)710 1996 y(last)f(writeable)g(location)f
(in)i(memory.)e(Thus)h(1)h(would)710 2093 y(be)g(the)f(last)g(location)
g(one)g(could)g(write)g(in)g(memory.)531 2288 y(1)224
b(1)179 b(load)44 b(address)g(is)g(subtracted)f(from)i(the)f(start)g
(of)710 2385 y(the)g(last)h(image)f(loaded.)f(If)i(the)f(first)g
(image,)g(then)710 2482 y(subtract)g(from)g(the)g(start)g(of)h(where)f
(the)g(512)g(bytes)g(were)710 2579 y(placed)396 2770
y Fh(\(F)o(or)20 b(con)m(v)o(enience)d(bit)j(24)g(is)h(byte)f(0)g(of)g
(the)g(\003ag)h(\002eld\))-2 2829 y
SDict begin H.S end
 -2 2829 a -2 2829
a
SDict begin 13 H.A end
 -2 2829 a -2 2829 a
SDict begin [ /View [/XYZ H.V] /Dest (496) cvn H.B /DEST pdfmark end
 -2 2829 a 396 2919 a Fh(Bit)h(26)d(is)i(the)g
(end)e(mark)o(er)g(for)h(the)g(net)g(boot)g(process.)f(It)i(is)g(set)g
(when)e(this)i(is)g(the)f(last)h(information)d(record)h(the)h(net)396
3027 y(boot)g(process)f(should)h(look)f(at.)h(More)g(records)f(may)h
(be)g(present,)f(b)n(ut)h(the)h(net)f(boot)f(process)h(will)h(not)f
(look)f(at)i(them.)396 3135 y(\(V)-9 b(endors)19 b(can)h(continue)e
(information)g(records)h(out)h(past)h(the)f(512)f(boundary)e(for)j(pri)
n(v)n(ate)f(use)i(in)f(this)h(manner\).)-2 3195 y
SDict begin H.S end
 -2
3195 a -2 3195 a
SDict begin 13 H.A end
 -2 3195 a -2 3195 a
SDict begin [ /View [/XYZ H.V] /Dest (497) cvn H.B /DEST pdfmark end
 -2 3195 a 396 3285
a Fh(The)f(image)g(length)f(tells)i(the)f(net)h(boot)e(process)h(ho)n
(w)f(man)o(y)g(bytes)h(are)h(to)f(be)g(loaded.)f(Zero)g(is)i(a)g(v)n
(alid)f(v)n(alue.)f(This)396 3393 y(can)h(be)g(used)g(to)h(mark)e
(memory)f(areas)j(such)f(as)h(shared)e(memory)g(for)g(interprocessor)f
(communication,)f(\003ash)396 3500 y(eproms,)i(data)h(in)h(eproms.)-2
3560 y
SDict begin H.S end
 -2 3560 a -2 3560 a
SDict begin 13 H.A end
 -2 3560 a -2 3560 a
SDict begin [ /View [/XYZ H.V] /Dest (498) cvn H.B /DEST pdfmark end
 -2 3560
a 396 3650 a Fh(The)f(image)g(length)f(can)h(also)h(be)f(dif)n(ferent)e
(from)h(the)i(memory)d(length.)h(This)h(allo)n(ws)h(decompression)d
(programs)g(to)396 3758 y(\003uf)n(f)i(up)g(the)g(k)o(ernel)f(image.)h
(It)g(also)h(allo)n(ws)f(a)h(\002le)g(system)f(to)g(be)g(lar)o(ger)f
(then)h(the)g(loaded)f(\002le)i(system)g(image.)-2 3817
y
SDict begin H.S end
 -2 3817 a -2 3817 a
SDict begin 13 H.A end
 -2 3817 a -2 3817 a
SDict begin [ /View [/XYZ H.V] /Dest (499) cvn H.B /DEST pdfmark end
 -2 3817 a 396
3907 a Fh(Bits)h(27)e(through)e(31)h(are)i(not)e(de\002ned)h(as)h(yet)f
(and)f(must)i(be)f(set)h(to)f(zero)g(until)g(the)o(y)f(are.)-2
3967 y
SDict begin H.S end
 -2 3967 a -2 3967 a
SDict begin 13 H.A end
 -2 3967 a -2 3967 a
SDict begin [ /View [/XYZ H.V] /Dest (500) cvn H.B /DEST pdfmark end
 -2 3967
a 359 x Fi(A.5.)39 b(Boot)f(pr)m(om)h(entr)q(y)g(points.)1927
4326 y
SDict begin H.S end
 1927 4326 a 1927 4326 a
SDict begin 22.464 H.A end
 1927 4326 a 1927 4326
a
SDict begin [ /View [/XYZ H.V] /Dest (1.13.1) cvn H.B /DEST pdfmark
end
 1927 4326 a -2 4427 a
SDict begin H.S end
 -2 4427 a -2 4427 a
SDict begin 13 H.A end
 -2 4427 a
-2 4427 a
SDict begin [ /View [/XYZ H.V] /Dest (502) cvn H.B /DEST pdfmark end
 -2 4427 a -2 4427 a
SDict begin H.S end
 -2 4427 a -2 4427 a
SDict begin 13 H.A end
 -2
4427 a -2 4427 a
SDict begin [ /View [/XYZ H.V] /Dest (503) cvn H.B /DEST pdfmark end
 -2 4427 a 396 4506 a Fe(\(gk\))p Fh(As)20
b(mentioned)e(abo)o(v)o(e)h(the)h(net)g(boot)f(process)h(has)h(to)f
(pro)o(vide)e(interrupt)h(78h)g(as)i(an)f(entry)g(point)f(in)h(case,)h
(the)396 4613 y(returnable)e(\003ag)h(\(bit)g(9)g(of)g(the)g(\003ags)h
(\002eld)f(in)h(the)f(image)f(header\))g(of)h(the)g(boot)g(image)f(has)
i(been)e(set.)i(When)f(calling)396 4721 y(this)h(interf)o(ace)e
(interrupt,)g(the)h(caller)g(has)h(to)f(load)g(the)g(AH)g(re)o(gister)g
(with)g(a)h(v)n(alue)e(indicating)g(the)h(type)g(of)g(operation)396
4829 y(requested:)-2 4930 y
SDict begin H.S end
 -2 4930 a -2 4930 a
SDict begin 11.7 H.A end
 -2 4930
a -2 4930 a
SDict begin [ /View [/XYZ H.V] /Dest (504) cvn H.B /DEST pdfmark end
 -2 4930 a 396 5009 a Fd(00h)89 b(-)h(Installation)43
b(check)710 5107 y(Input:)89 b(none)p Black 3800 5569
a Fe(21)p Black eop end
%%Page: 22 22
TeXDict begin 22 21 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.22) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
710 72 a Fd(Output:)44 b(AX)89 b(-)h(returns)43 b(the)i(value)f(474Bh)
755 170 y(BX)89 b(-)h(flags)44 b(indicating)f(what)h(further)g
(services)f(are)755 267 y(provided)g(by)i(the)f(net)h(boot)f(program:)
800 364 y(Bit)g(0)h(-)f(packet)g(driver)g(interface)f(\(see)i(below\))
800 461 y(Bits)f(1)h(to)f(15)h(are)f(unused)g(and)g(have)g(to)h(be)f
(zero)396 655 y(01h)89 b(-)h(Cleanup)44 b(and)g(terminate)f(the)i(boot)
f(process)f(services.)h(This)g(will)710 752 y(also)g(remove)g(the)g
(services)g(provided)f(by)i(interrupt)e(87h.)710 850
y(Input:)89 b(none)710 947 y(Output:)44 b(none)396 1138
y Fh(Further)19 b(functions)g(are)h(not)g(yet)g(de\002ned.)f(These)h
(functions)f(are)h(only)g(a)n(v)n(ailable)f(to)i(boot)e(images)h(which)
g(ha)n(v)o(e)f(the)396 1246 y(\002rst)h(magic)f(number)f(at)h(the)h(be)
o(ginning)c(of)j(the)h(image)e(header)m(,)g(and)h(ha)n(v)o(e)f(the)i
(returnable)d(\003ag)i(set)h(in)g(the)f(\003ags)h(\002eld.)-2
1305 y
SDict begin H.S end
 -2 1305 a -2 1305 a
SDict begin 13 H.A end
 -2 1305 a -2 1305 a
SDict begin [ /View [/XYZ H.V] /Dest (505) cvn H.B /DEST pdfmark end
 -2 1305
a 396 1395 a Fh(In)g(order)f(to)h(pro)o(vide)f(compatibility)f(with)j
(net)f(boot)f(programs)f(written)i(to)h(match)e(an)i(earlier)e(v)o
(ersion)g(of)h(this)396 1503 y(document,)e(the)i(loaded)g(image)f
(should)g(check)h(for)f(the)h(e)o(xistence)g(of)g(interrupt)e(78h)i(by)
g(looking)e(at)j(it')-5 b(s)21 b(v)o(ector)-5 b(.)19
b(If)396 1611 y(that')-5 b(s)21 b(0:0,)f(or)f(if)i(it)g(does)f(not)g
(return)f(a)h(proper)f(magic)g(ID)i(after)f(calling)f(the)h
(installation)g(check)g(function,)e(the)i(boot)396 1719
y(image)g(has)g(to)h(assume)f(that)g(the)g(net)h(boot)e(program)f(does)
i(not)g(support)f(this)h(services)g(interrupt.)-2 1778
y
SDict begin H.S end
 -2 1778 a -2 1778 a
SDict begin 13 H.A end
 -2 1778 a -2 1778 a
SDict begin [ /View [/XYZ H.V] /Dest (506) cvn H.B /DEST pdfmark end
 -2 1778 a 396
1868 a Fh(If)g(the)h(bit)f(0)g(of)g(re)o(gister)g(BX)h(of)f(function)e
(00h)h(is)i(set,)g(the)f(boot)g(program)e(has)i(to)h(pro)o(vide)d(a)
3142 1868 y
SDict begin H.S end
 3142 1868 a 3142 1868 a
SDict begin 13 H.A end
 3142 1868 a 3142
1868 a
SDict begin [ /View [/XYZ H.V] /Dest (507) cvn H.B /DEST pdfmark end
 3142 1868 a Fh(pack)o(et)i(dri)n(v)o(er)396 1976
y(\(http://www)-5 b(.crynwr)g(.com\))16 b(interf)o(ace)k(at)g
(interrupt)f(79h)g(as)i(described)e(in)h(the)h(pack)o(et)e(dri)n(v)o
(er)g(interf)o(ace)g(standard,)396 2084 y(v)o(ersion)g(1.09,)g
(published)g(by)g(FTP)i(Softw)o(are,)f(Inc.,)f(which)h(is)h(not)f
(repeated)e(here.)i(It)g(serv)o(es)g(as)h(an)f(interf)o(ace)g(to)g(the)
396 2192 y(system')-5 b(s)21 b(netw)o(ork)e(card.)g(It)i(is)g
(important)e(to)h(note)g(that)g(the)g(net)g(boot)g(process)g(has)g(to)g
(pro)o(vide)e(a)j(clean)f(pack)o(et)396 2300 y(dri)n(v)o(er)f(interf)o
(ace)g(without)h(an)o(y)f(handles)h(being)f(de\002ned)g(when)h(the)g
(boot)f(image)h(gets)g(started.)g(It)h(is)g(e)o(xpected)d(that)396
2408 y(the)i(boot)g(image)f(sets)j(up)e(it')-5 b(s)21
b(o)n(wn)e(TCP/IP)i(or)f(other)g(netw)o(ork')-5 b(s)19
b(stack)h(on)g(top)g(of)g(this)h(pack)o(et)e(dri)n(v)o(er)g(interf)o
(ace.)396 2516 y(When)h(the)g(boot)g(image)g(returns)f(to)h(the)g(net)h
(boot)e(process,)g(it)i(has)g(to)f(return)f(a)i(clean)f(pack)o(et)f
(dri)n(v)o(er)g(interf)o(ace)g(as)396 2624 y(well,)i(without)e(an)o(y)h
(handles)f(being)g(de\002ned.)1741 2624 y
SDict begin H.S end
 1741 2624 a
1741 2624 a
SDict begin 13 H.A end
 1741 2624 a 1741 2624 a
SDict begin [ /View [/XYZ H.V] /Dest (508) cvn H.B /DEST pdfmark end
 1741 2624 a Fe(\(gk\))-2
2683 y
SDict begin H.S end
 -2 2683 a -2 2683 a
SDict begin 13 H.A end
 -2 2683 a -2 2683 a
SDict begin [ /View [/XYZ H.V] /Dest (509) cvn H.B /DEST pdfmark end
 -2 2683
a 359 x Fi(A.6.)39 b(Example)f(of)h(a)h(boot)e(ima)o(g)q(e)s(.)2035
3042 y
SDict begin H.S end
 2035 3042 a 2035 3042 a
SDict begin 22.464 H.A end
 2035 3042 a 2035 3042
a
SDict begin [ /View [/XYZ H.V] /Dest (1.14.1) cvn H.B /DEST pdfmark
end
 2035 3042 a -2 3146 a
SDict begin H.S end
 -2 3146 a -2 3146 a
SDict begin 13 H.A end
 -2 3146 a
-2 3146 a
SDict begin [ /View [/XYZ H.V] /Dest (511) cvn H.B /DEST pdfmark end
 -2 3146 a 396 3222 a Fh(Here)20 b(is)h(an)g(e)o(xample)d(of)i
(ho)n(w)g(the)g(boot)g(image)f(w)o(ould)h(look)f(for)h(Linux:)-2
3323 y
SDict begin H.S end
 -2 3323 a -2 3323 a
SDict begin 11.7 H.A end
 -2 3323 a -2 3323 a
SDict begin [ /View [/XYZ H.V] /Dest (512) cvn H.B /DEST pdfmark end
 -2 3323
a 486 3402 a Fd(0x1B031336,)88 b(/*)44 b(magic)g(number)g(*/)486
3499 y(0x4,)403 b(/*)44 b(length)g(of)h(header)e(is)i(16)f(bytes,)g(no)
h(vendor)f(info)g(*/)486 3596 y(0x90000000,)88 b(/*)44
b(location)g(in)g(ds:bx)g(format)g(*/)486 3694 y(0x90000200,)88
b(/*)44 b(execute)g(address)g(in)g(cs:ip)g(format)g(*/)755
3888 y(/*)g(2048)h(setup.S)e(bytes)h(*/)486 3985 y(0x4,)358
b(/*)44 b(flags,)g(not)h(end,)f(absolute)f(address,)h(16)g(bytes)g
(this)576 4082 y(record,)f(no)i(vendor)f(info)g(*/)486
4179 y(0x90200,)223 b(/*)44 b(load)g(address)g(-)h(note)f(format)g(*/)
486 4276 y(0x800,)313 b(/*)44 b(4)h(8)g(512)f(byte)g(blocks)g(for)g
(linux)g(*/)486 4374 y(0x800,)755 4568 y(/*)g(kernel)g(image)g(*/)486
4665 y(0x4,)358 b(/*)44 b(flags,)g(not)h(end,)f(absolute)f(address,)h
(16)g(bytes)g(this)576 4762 y(record,)f(no)i(vendor)f(info)g(*/)486
4859 y(0x10000,)223 b(/*)44 b(load)g(address)g(-)h(note)f(format)g(*/)
486 4956 y(0x80000,)223 b(/*)44 b(512K)g(\(this)g(could)g(be)h(shorter)
f(*/)486 5053 y(0x80000,)p Black 3800 5569 a Fe(22)p
Black eop end
%%Page: 23 23
TeXDict begin 23 22 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.23) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
755 72 a Fd(/*)44 b(ramdisk)g(for)g(root)h(file)f(system)g(*/)486
170 y(0x04000004,)88 b(/*)44 b(flags)g(=)h(last,)f(absolute)f(address,)
h(16)g(bytes)g(this)576 267 y(record,)f(no)i(vendor)f(info)g(*//)486
364 y(0x100000,)178 b(/*)44 b(load)g(address)g(-)h(in)f(extended)g
(memory)g(*/)486 461 y(0x80000,)223 b(/*)44 b(512K)g(for)h(instance)e
(*/)486 558 y(0x80000,)755 655 y(/*)h(Then)h(follows)e(linux)h
(specific)g(information)f(*/)-2 888 y
SDict begin H.S end
 -2 888 a -2 888
a
SDict begin 13 H.A end
 -2 888 a -2 888 a
SDict begin [ /View [/XYZ H.V] /Dest (513) cvn H.B /DEST pdfmark end
 -2 888 a 377 x Fi(A.7.)c(T)-9 b(erms)724
1265 y
SDict begin H.S end
 724 1265 a 724 1265 a
SDict begin 22.464 H.A end
 724 1265 a 724 1265 a
SDict begin [ /View [/XYZ H.V] /Dest (1.15.1) cvn H.B /DEST pdfmark
end
 724
1265 a -2 1338 a
SDict begin H.S end
 -2 1338 a -2 1338 a
SDict begin 13 H.A end
 -2 1338 a -2 1338
a
SDict begin [ /View [/XYZ H.V] /Dest (515) cvn H.B /DEST pdfmark end
 -2 1338 a 396 1445 a Fh(When)20 b(I)h(say)f(')o(the)f(net)i(boot)e
(process',)g(I)i(mean)e(the)h(act)h(of)f(loading)f(the)h(image)g(into)f
(memory)-5 b(,)18 b(setting)i(up)g(an)o(y)396 1552 y(tables,)g(up)g
(until)g(the)g(jump)g(to)g(the)g(required)f(location)g(in)h(the)h
(image.)-2 1612 y
SDict begin H.S end
 -2 1612 a -2 1612 a
SDict begin 13 H.A end
 -2 1612 a -2 1612
a
SDict begin [ /View [/XYZ H.V] /Dest (516) cvn H.B /DEST pdfmark end
 -2 1612 a 396 1702 a Fh(The)f(net)g(booting)f(program)f(e)o(x)o
(ecutes)h(the)h(net)g(boot)g(process.)f(The)h(net)g(boot)g(program)e
(may)h(be)i(a)f(rom,)f(b)n(ut)i(not)396 1810 y(neccassarily)-5
b(.)19 b(It)i(is)g(a)f(set)h(of)f(instructions)f(and)h(data)g(residing)
f(on)h(the)g(booting)f(machine.)-2 1869 y
SDict begin H.S end
 -2 1869 a -2
1869 a
SDict begin 13 H.A end
 -2 1869 a -2 1869 a
SDict begin [ /View [/XYZ H.V] /Dest (517) cvn H.B /DEST pdfmark end
 -2 1869 a 396 1959 a Fh(The)h(image,)g(or)f
(boot)h(image,)f(consists)i(of)f(the)g(data)g(loaded)f(by)h(the)g(net)g
(boot)g(process.)-2 2019 y
SDict begin H.S end
 -2 2019 a -2 2019 a
SDict begin 13 H.A end
 -2 2019
a -2 2019 a
SDict begin [ /View [/XYZ H.V] /Dest (518) cvn H.B /DEST pdfmark end
 -2 2019 a 396 2109 a Fh(When)g(I)h(say)f(')o(the)f(PC)j
(boot)d(process',)g(I)i(mean)e(the)h(general)g(PC)h(rom)e(bios)h(boot)g
(process,)f(the)i(setting)f(up)f(of)396 2217 y(hardw)o(are,)g(the)h
(scanning)f(for)g(adaptor)g(roms,)h(the)g(e)o(x)o(ecution)e(of)i
(adaptor)f(roms,)g(the)h(loading)f(in)i(of)e(the)i(initial)f(boot)396
2325 y(track.)g(The)g(PC)h(boot)e(process)h(will)h(include)e(the)h(net)
g(boot)g(process,)f(if)i(one)e(is)j(present.)-2 2384
y
SDict begin H.S end
 -2 2384 a -2 2384 a
SDict begin 13 H.A end
 -2 2384 a -2 2384 a
SDict begin [ /View [/XYZ H.V] /Dest (519) cvn H.B /DEST pdfmark end
 -2 2384 a 396
2474 a Fh(When)e(I)h(say)f(client,)g(I)g(mean)g(the)g(PC)i(booting)c
(up.)-2 2533 y
SDict begin H.S end
 -2 2533 a -2 2533 a
SDict begin 13 H.A end
 -2 2533 a -2 2533
a
SDict begin [ /View [/XYZ H.V] /Dest (520) cvn H.B /DEST pdfmark end
 -2 2533 a 396 2623 a Fh(When)i(I)h(say)f('image)f(host',)h(I)g(mean)g
(the)g(host)g(where)g(the)g(boot)f(image)h(is)h(comming)e(from.)g(This)
h(may)g(not)f(ha)n(v)o(e)h(the)396 2731 y(same)h(architecture)d(as)j
(the)f(client.)-2 2774 y
SDict begin H.S end
 -2 2774 a -2 2774 a
SDict begin 13 H.A end
 -2 2774
a -2 2774 a
SDict begin [ /View [/XYZ H.V] /Dest (521) cvn H.B /DEST pdfmark end
 -2 2774 a 396 2881 a Fh(The)g(bootp)f(protocol)f(is)k
(de\002ned)d(in)h(RFC951)g(and)g(RFC1084.)f(The)h(tftp)g(protocol)f(is)
i(de\002ned)e(in)h(RFC783.)g(These)396 2989 y(are)g(a)n(v)n(ailable)g
(on)g(man)o(y)f(sites.)-2 3048 y
SDict begin H.S end
 -2 3048 a -2 3048 a
SDict begin 13 H.A end

-2 3048 a -2 3048 a
SDict begin [ /View [/XYZ H.V] /Dest (522) cvn H.B /DEST pdfmark end
 -2 3048 a 396 3138 a Fh(A)i(bootp)e(serv)o(er)g(is)
i(the)g(machine)e(that)h(answers)g(the)g(bootp)f(request.)g(It)i(is)g
(not)f(neccessarily)f(the)i(image)e(host.)-2 3198 y
SDict begin H.S end
 -2
3198 a -2 3198 a
SDict begin 13 H.A end
 -2 3198 a -2 3198 a
SDict begin [ /View [/XYZ H.V] /Dest (523) cvn H.B /DEST pdfmark end
 -2 3198 a 396 3288
a Fh("Can")i(and)e("may")h(means)f(doesn')o(t)g(ha)n(v)o(e)h(to,)g(b)n
(ut)g(is)h(allo)n(wed)f(to)g(and)g(might.)f("Must")h(means)g(just)h
(that.)f("Cannot")396 3396 y(means)g(must)g(not.)-2 3438
y
SDict begin H.S end
 -2 3438 a -2 3438 a
SDict begin 13 H.A end
 -2 3438 a -2 3438 a
SDict begin [ /View [/XYZ H.V] /Dest (524) cvn H.B /DEST pdfmark end
 -2 3438 a 376
x Fi(A.8.)39 b(Ref)o(erences)1076 3814 y
SDict begin H.S end
 1076 3814 a
1076 3814 a
SDict begin 22.464 H.A end
 1076 3814 a 1076 3814 a
SDict begin [ /View [/XYZ H.V] /Dest (1.16.1) cvn H.B /DEST pdfmark
end
 1076 3814 a -2 3888
a
SDict begin H.S end
 -2 3888 a -2 3888 a
SDict begin 13 H.A end
 -2 3888 a -2 3888 a
SDict begin [ /View [/XYZ H.V] /Dest (526) cvn H.B /DEST pdfmark end
 -2 3888 a 396
3994 a Fh(Ste)n(v)o(ens,)20 b(W)-8 b(.R)21 b(1990,)e(Unix)h(Netw)o(ork)
f(Programming,)e(Prentice)j(Hall,)h(Engle)n(w)o(ood)d(Clif)n(fs,)i
(N.J.,)g(1990)-2 4136 y
SDict begin H.S end
 -2 4136 a -2 4136 a
SDict begin 13 H.A end
 -2 4136 a
-2 4136 a
SDict begin [ /View [/XYZ H.V] /Dest (compressor) cvn H.B /DEST pdfmark
end
 -2 4136 a 418 x Fa(B.)48 b(Compression)g(algorithm,)g(1)f(J)m
(ul)m(y)h(1997)3160 4554 y
SDict begin H.S end
 3160 4554 a 3160 4554 a
SDict begin 26.957 H.A end
 3160
4554 a 3160 4554 a
SDict begin [ /View [/XYZ H.V] /Dest (2.0) cvn H.B /DEST pdfmark end
 3160 4554 a -2 4679 a
SDict begin H.S end
 -2 4679 a -2
4679 a
SDict begin 13 H.A end
 -2 4679 a -2 4679 a
SDict begin [ /View [/XYZ H.V] /Dest (529) cvn H.B /DEST pdfmark end
 -2 4679 a -2 4679 a
SDict begin H.S end
 -2 4679
a -2 4679 a
SDict begin 13 H.A end
 -2 4679 a -2 4679 a
SDict begin [ /View [/XYZ H.V] /Dest (530) cvn H.B /DEST pdfmark end
 -2 4679 a 396 4748 a
Fh(Markus)20 b(Gutschk)o(e,)f(gutschk)g(A)-9 b(T)20 b(math)g(PERIOD)g
(uni-muenster)e(PERIOD)j(de)-2 4808 y
SDict begin H.S end
 -2 4808 a -2 4808
a
SDict begin 13 H.A end
 -2 4808 a -2 4808 a
SDict begin [ /View [/XYZ H.V] /Dest (532) cvn H.B /DEST pdfmark end
 -2 4808 a 396 4898 a Fh(The)f(compressor)f(achie)
n(v)o(es)g(an)h(a)n(v)o(erage)f(compression)f(rate)j(of)f(60\045)f(of)h
(the)h(original)e(size)h(which)g(is)h(on)f(par)g(with)396
5006 y("gzip".)f(It)i(seems)g(that)f(you)f(cannot)g(do)h(much)f(better)
h(for)g(compressing)e(compiled)h(binaries.)g(This)i(means)e(that)i(the)
396 5114 y(break)e(e)n(v)o(en)g(point)f(for)h(using)h(compressed)e
(images)h(is)i(reached,)d(once)h(the)h(uncompressed)d(size)j
(approaches)e(1.5kB.)p Black 3800 5569 a Fe(23)p Black
eop end
%%Page: 24 24
TeXDict begin 24 23 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.24) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
396 72 a Fh(W)-7 b(e)22 b(can)e(stuf)n(f)f(more)h(than)g(12kB)f(into)h
(an)g(8kB)g(EPR)m(OM)h(and)f(more)f(than)h(25kB)f(into)h(an)g(16kB)g
(EPR)m(OM.)g(As)h(there)396 180 y(is)g(only)e(32kB)g(of)h(RAM)g(for)f
(both)g(the)h(uncompressed)d(image)i(and)g(its)i(BSS)g(area,)e(this)i
(means)e(that)h(32kB)f(EPR)m(OMs)396 288 y(will)i(hardly)e(e)n(v)o(er)g
(be)i(required.)-2 348 y
SDict begin H.S end
 -2 348 a -2 348 a
SDict begin 13 H.A end
 -2 348 a -2
348 a
SDict begin [ /View [/XYZ H.V] /Dest (533) cvn H.B /DEST pdfmark end
 -2 348 a 396 438 a Fh(The)f(compression)f(algorithm)f(uses)j(a)g
(4kB)f(ring)f(b)n(uf)n(fer)g(for)h(b)n(uf)n(fering)d(the)k
(uncompressed)c(data.)j(Before)396 546 y(compression)f(starts,)h(the)h
(ring)e(b)n(uf)n(fer)g(is)i(\002lled)g(with)f(spaces)g(\(ASCII)h
(character)e(0x20\).)f(The)i(algorithm)e(tries)j(to)396
654 y(\002nd)f(repeated)f(input)h(sequences)f(of)h(a)g(maximum)f
(length)g(of)h(60)g(bytes.)g(All)h(256)e(dif)n(ferent)f(input)i(bytes)g
(plus)g(the)g(58)396 762 y(\(60)g(minus)f(a)i(threshold)e(of)h(2\))g
(possible)g(repeat)f(lengths)h(form)f(a)h(set)h(of)f(314)g(symbols.)f
(These)h(symbols)g(are)396 869 y(adapti)n(v)o(ely)f(Huf)n(fman)f
(encoded.)g(The)i(algorithm)f(starts)i(out)e(with)i(a)f(Huf)n(fmann)e
(tree)j(that)f(assigns)g(equal)g(code)396 977 y(lengths)g(to)g(each)g
(of)g(the)g(314)f(symbols)h(\(slightly)g(f)o(a)n(v)n(oring)e(the)j
(repeat)e(symbols)h(o)o(v)o(er)f(symbols)g(for)h(re)o(gular)e(input)396
1085 y(characters\),)h(b)n(ut)h(it)h(will)g(be)f(changed)e(whene)n(v)o
(er)h(the)h(frequenc)o(y)d(of)j(an)o(y)g(of)f(the)i(symbols)e(changes.)
g(Frequenc)o(y)396 1193 y(counts)h(are)g(k)o(ept)g(in)g(16bit)g(w)o
(ords)f(until)h(the)h(total)f(number)e(of)i(compressed)f(codes)h
(totals)g(2^15.)f(Then,)h(all)396 1301 y(frequenc)o(y)e(counts)h(will)i
(be)f(halfed)g(\(rounding)d(to)j(the)g(bigger)f(number\).)f(F)o(or)i
(unrepeated)e(characters)h(\(symbols)396 1409 y(0..255\))f(the)i(Huf)n
(fman)f(code)g(is)i(written)f(to)h(the)f(output)f(stream.)h(F)o(or)g
(repeated)f(characters)g(the)h(Huf)n(fmann)e(code,)396
1517 y(which)i(denotes)f(the)i(length)e(of)h(the)g(repeated)f
(character)g(sequence,)g(is)i(written)f(out)g(and)f(then)h(the)g(inde)o
(x)f(in)h(the)h(ring)396 1625 y(b)n(uf)n(fer)e(is)i(computed.)d(From)i
(this)h(inde)o(x,)d(the)j(algorithm)d(computes)h(the)h(of)n(fset)g
(relati)n(v)o(e)f(to)i(the)f(current)f(inde)o(x)g(into)396
1733 y(the)h(ring)g(b)n(uf)n(fer)-5 b(.)19 b(Thus,)h(for)f(typical)h
(input)f(data,)h(one)g(w)o(ould)f(e)o(xpect)g(that)i(short)f(to)g
(medium)f(range)g(of)n(fsets)h(are)396 1841 y(more)g(frequent)e(than)i
(e)o(xtremely)e(short)i(or)g(medium)f(range)g(to)h(long)g(range)f(of)n
(fsets.)h(Thus)f(the)i(12bit)e(\(for)g(a)i(4kB)396 1949
y(b)n(uf)n(fer\))e(of)n(fset)g(v)n(alue)h(is)h(statically)g(Huf)n(fman)
d(encoded)g(using)i(a)h(precomputed)c(Huf)n(fman)h(tree)i(that)h(f)o(a)
n(v)n(ors)f(those)396 2057 y(of)n(fset)g(v)n(alues)g(that)g(are)g
(deemed)f(to)h(be)h(more)e(frequent.)f(The)i(Huf)n(fman)e(encoded)h(of)
n(fset)g(is)j(written)e(to)g(the)g(output)396 2165 y(data)g(stream,)g
(directly)g(follo)n(wing)e(the)i(code)g(that)g(determines)f(the)h
(length)g(of)g(repeated)f(characters.)-2 2224 y
SDict begin H.S end
 -2 2224
a -2 2224 a
SDict begin 13 H.A end
 -2 2224 a -2 2224 a
SDict begin [ /View [/XYZ H.V] /Dest (534) cvn H.B /DEST pdfmark end
 -2 2224 a 396 2314 a
Fh(This)i(algorithm,)d(as)j(implemented)d(in)j(the)f(C)h(e)o(xample)e
(code,)g(looks)h(v)o(ery)f(good)f(and)i(its)h(operating)e(parameters)g
(are)396 2422 y(already)g(well)i(optimized.)e(This)h(also)h(e)o
(xplains)e(why)g(it)i(achie)n(v)o(es)e(compression)g(ratios)h
(comparable)e(with)i("gzip".)396 2530 y(Depending)e(on)i(the)g(input)g
(data,)g(it)g(sometimes)g(e)o(xcells)g(considerably)e(be)o(yond)g(what)
j("gzip)e(-9")h(does,)g(b)n(ut)g(this)396 2638 y(phenomenon)d(does)j
(not)g(appear)f(to)h(be)g(typical.)g(There)f(are)h(some)g(\003a)o(ws)h
(with)f(the)h(algorithm,)d(such)i(as)h(the)f(limited)396
2746 y(b)n(uf)n(fer)f(sizes,)i(the)f(adapti)n(v)o(e)f(Huf)n(fman)f
(tree)j(which)e(tak)o(es)i(v)o(ery)e(long)g(to)h(change,)f(if)i(the)f
(input)f(characters)396 2854 y(e)o(xperience)f(a)j(sudden)e(change)g
(in)h(distrib)n(ution,)f(and)h(the)g(static)h(Huf)n(fman)d(tree)i(for)g
(encoding)e(of)n(fsets)i(into)g(the)396 2962 y(b)n(uf)n(fer)-5
b(.)19 b(The)h(slo)n(w)h(changes)e(of)h(the)g(adapti)n(v)o(e)f(Huf)n
(fman)f(tree)i(are)g(partially)g(counteracted)e(by)i(arti\002cally)f(k)
o(eeping)g(a)396 3070 y(16bit)h(precision)f(for)g(the)i(frequenc)o(y)c
(counts,)i(b)n(ut)h(this)h(does)f(not)g(come)g(into)g(play)f(until)h
(32kB)g(of)g(compressed)f(data)396 3178 y(is)i(output,)e(so)i(it)g
(does)f(not)f(ha)n(v)o(e)h(an)o(y)f(impact)h(on)g(our)f(use)i(for)e
("etherboot",)f(because)i(the)g(BOO)m(T)g(Prom)g(does)g(not)396
3285 y(support)f(uncompressed)f(data)i(of)g(more)f(then)h(32kB)g
(\(c.f.)f(doc/spec.doc\).)-2 3345 y
SDict begin H.S end
 -2 3345 a -2 3345
a
SDict begin 13 H.A end
 -2 3345 a -2 3345 a
SDict begin [ /View [/XYZ H.V] /Dest (535) cvn H.B /DEST pdfmark end
 -2 3345 a 396 3435 a Fh(Nonetheless,)h(these)g
(problems)f(do)g(not)h(seem)h(to)f(af)n(fect)g(compression)e(of)i
(compiled)f(programs)f(v)o(ery)h(much.)396 3543 y(Mixing)h(object)f
(code)h(with)g(English)g(te)o(xt,)f(w)o(ould)h(not)g(w)o(ork)f(too)h
(well)h(though,)d(and)i(the)g(algorithm)e(should)i(be)g(reset)396
3651 y(in)h(between.)e(Actually)-5 b(,)19 b(we)h(might)g(gain)f(a)i
(little)g(impro)o(v)o(ement,)c(if)j(te)o(xt)g(and)g(data)g(se)o(gments)
f(were)h(compressed)396 3759 y(indi)n(vidually)-5 b(,)18
b(b)n(ut)i(I)g(ha)n(v)o(e)g(not)g(e)o(xperimented)d(with)j(this)h
(option,)e(yet.)-2 3818 y
SDict begin H.S end
 -2 3818 a -2 3818 a
SDict begin 13 H.A end
 -2 3818
a -2 3818 a
SDict begin [ /View [/XYZ H.V] /Dest (536) cvn H.B /DEST pdfmark end
 -2 3818 a 418 x Fa(C.)48 b(Cop)m(ying)h(conditions)f(of)g
(the)g(compression)-2 4460 y(code)r(,)f(1)h(J)m(ul)m(y)f(1997)1411
4460 y
SDict begin H.S end
 1411 4460 a 1411 4460 a
SDict begin 26.957 H.A end
 1411 4460 a 1411 4460
a
SDict begin [ /View [/XYZ H.V] /Dest (3.0) cvn H.B /DEST pdfmark end
 1411 4460 a -2 4582 a
SDict begin H.S end
 -2 4582 a -2 4582 a
SDict begin 13 H.A end
 -2 4582 a
-2 4582 a
SDict begin [ /View [/XYZ H.V] /Dest (538) cvn H.B /DEST pdfmark end
 -2 4582 a -2 4582 a
SDict begin H.S end
 -2 4582 a -2 4582 a
SDict begin 13 H.A end
 -2
4582 a -2 4582 a
SDict begin [ /View [/XYZ H.V] /Dest (539) cvn H.B /DEST pdfmark end
 -2 4582 a 396 4654 a Fh(Markus)20 b(Gutschk)o(e,)f
(gutschk)g(A)-9 b(T)20 b(math)g(PERIOD)g(uni-muenster)e(PERIOD)j(de)-2
4713 y
SDict begin H.S end
 -2 4713 a -2 4713 a
SDict begin 13 H.A end
 -2 4713 a -2 4713 a
SDict begin [ /View [/XYZ H.V] /Dest (541) cvn H.B /DEST pdfmark end
 -2 4713
a 396 4803 a Fh(The)f(compression)f(code)g(as)i(implemented)d(in)j
("lzhuf.c")d(w)o(as)j(tak)o(en)f(from)f(a)i(BBS)h(program)c(written)i
(by)f(Joachim)396 4911 y(Schurig)g(<jschurig)g(A)-9 b(T)21
b(zedat)f(PERIOD)g(fu-berlin)e(PERIOD)j(de>.)f(He)g(states)h(that)g
(the)f(code)f(can)h(be)g(used)g(freely)396 5019 y(for)g(programs)e
(that)i(are)h(co)o(v)o(ered)d(by)h(a)i("free)n(w)o(are")e(license.)h
(This)g(probably)e(includes)i(both)f(BSD)i(style)g(licenses)396
5127 y(and)f(the)g(GPL.)p Black 3800 5569 a Fe(24)p Black
eop end
%%Page: 25 25
TeXDict begin 25 24 bop -600 -600 a
SDict begin /product where{pop product(Distiller)search{pop pop pop
version(.)search{exch pop exch pop(3011)eq{gsave newpath 0 0 moveto
closepath clip/Courier findfont 10 scalefont setfont 72 72 moveto(.)show
grestore}if}{pop}ifelse}{pop}ifelse}if end
 -600 -600 a Black
0 TeXcolorgray -2 -102 a
SDict begin H.S end
 -2 -102 a 0 TeXcolorgray 0 TeXcolorgray
-2 -102 a
SDict begin H.R end
 -2 -102 a -2 -102 a
SDict begin [ /View [/XYZ H.V] /Dest (page.25) cvn H.B /DEST pdfmark
end
 -2 -102 a Black 2875 -132
a Fe(Etherboot)19 b(De)o(veloper)o(s)h(Manual)p Black
-2 -11 a
SDict begin H.S end
 -2 -11 a -2 -11 a
SDict begin 13 H.A end
 -2 -11 a -2 -11 a
SDict begin [ /View [/XYZ H.V] /Dest (542) cvn H.B /DEST pdfmark end
 -2 -11 a
396 72 a Fh(The)g(code)g(in)g("zloader)-5 b(.asm")19
b(is)i(a)f(reimplementation)e(of)i(the)g(uncompressor)-5
b(.)18 b(It)i(has)h(been)e(written)h(from)f(scratch)396
180 y(and)h(is)h(hereby)e(placed)g(under)g(the)h(conditions)f(of)h(the)
g(GNU)h(General)e(Public)h(License)g(\(GPL\).)g(The)f(algorithm)g(is)
396 288 y(outlined)g(in)p 0 TeXcolorgray 775 288 a
SDict begin H.S end
 775
288 a Fh(Appendix)f(B)1178 288 y
SDict begin 13 H.L end
 1178 288 a 1178 288
a
SDict begin [ /Subtype /Link /Dest (compressor) cvn /H /I /Border [0
0 0] /Color [1 0 0] H.B /ANN pdfmark end
 1178 288 a Black Fh(.)-2 348 y
SDict begin H.S end
 -2 348 a -2 348 a
SDict begin 13 H.A end
 -2
348 a -2 348 a
SDict begin [ /View [/XYZ H.V] /Dest (544) cvn H.B /DEST pdfmark end
 -2 348 a 396 438 a Fh(Thus,)i(there)g(are)g(no)f(cop)o
(yright)g(problems)f(with)j(using)e(this)i(code,)e(b)n(ut)i(there)e
(still)j(might)d(be)h(dif)n(\002culties)g(with)396 546
y(softw)o(are)g(patents.)g(These)g(patents)g(are)g(not)g(le)o(gal)f(in)
i(most)f(parts)g(of)g(the)g(w)o(orld,)f(b)n(ut)i(if)f(you)f(li)n(v)o(e)
h(in)h(a)f(country)f(that)396 654 y(honors)g(softw)o(are)h(patents)g
(then)f(you)h(should)f(v)o(erify)g(that)h(using)g(these)g(algorithms)f
(is)i(le)o(gally)e(permitted.)g(Unless)396 762 y(you)h(are)g
(absolutely)f(sure,)h(that)g(there)g(are)g(no)f(le)o(gal)h(obstacles,)g
(you)f(should)g(use)i(the)f(code)f(for)h(educational)396
869 y(purposes)f(only)h(\(this)g(assumes)g(that)h(your)e(educational)f
(institution)i(is)h(e)o(x)o(empted)d(from)h(patent)h(la)o(ws\).)g(The)g
(author)396 977 y(cannot)f(be)h(held)g(responsible)f(for)h(using)f(the)
i(program)d(code)h(in)h(violation)f(of)h(applicable)f(local)h(la)o(ws.)
-2 1037 y
SDict begin H.S end
 -2 1037 a -2 1037 a
SDict begin 13 H.A end
 -2 1037 a -2 1037 a
SDict begin [ /View [/XYZ H.V] /Dest (545) cvn H.B /DEST pdfmark end
 -2
1037 a 396 1127 a Fh(If)g(you)g(are)g(a)o(w)o(are)g(of)f(patents)h
(that)h(might)e(af)n(fect)h(the)g(le)o(gality)f(of)h(using)g(the)g
(code)g(in)g(some)g(parts)g(of)g(the)g(w)o(orld,)396
1235 y(please)g(let)h(me)f(kno)n(w)-5 b(.)p Black 3800
5569 a Fe(25)p Black eop end
%%Trailer

userdict /end-hook known{end-hook}if
%%EOF
